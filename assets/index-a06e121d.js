import{o as bt,B as kt,C as Me,v as qn,u as Nc,f as Pc,b as Do,d as ni,c as Is,D as Ti,E as Tf,F as Rc,a as an,G as Of,H as Or,w as Lc,I as Fc,J as Mc,r as Nf}from"./vue-f54ef53e.js";import{d as Uc,u as Zi,a as es,b as $c,g as So,c as Bc,m as kc,_ as ii,C as jc,E as zc}from"./index-43e1755e.js";import{W as tn,c as lt,g as As,r as Pf,a as Rf}from"./es-a9c9a203.js";import{d as Lf}from"./dijkstra-59d11638.js";const Ff={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Mf=Me("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2Z"},null,-1),Uf=[Mf];function $f(t,e){return bt(),kt("svg",Ff,Uf)}const Bf={name:"carbon-logo-github",render:$f},kf={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},jf=Me("path",{fill:"currentColor",d:"M489.972 119.059a23.839 23.839 0 0 0-17-7.059H456V72a24.027 24.027 0 0 0-24-24H86.627A70.628 70.628 0 0 0 16 118.627v274.746A70.628 70.628 0 0 0 86.627 464h385.4a24.047 24.047 0 0 0 24-23.923l.944-303.995a23.837 23.837 0 0 0-6.999-17.023ZM464.053 432H86.627A38.627 38.627 0 0 1 48 393.373V118.627A38.627 38.627 0 0 1 86.627 80H424v32H88v32h376.947Z"},null,-1),zf=Me("path",{fill:"currentColor",d:"M392 264h32v32h-32z"},null,-1),Hf=[jf,zf];function qf(t,e){return bt(),kt("svg",kf,Hf)}const Kf={name:"cil-wallet",render:qf},Vf={class:"icon inline",fill:"currentColor",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Wf=Me("circle",{cx:"12",cy:"12",r:"12",fill:"#F3B92F"},null,-1),Gf=Me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.55251 13.8109L3.72675 12.0709L5.60979 10.2764L7.43555 12.0163L5.55251 13.8109ZM15.4653 10.694L12.1499 7.53357L8.83264 10.694L7.00689 8.95401L12.135 4.06689L12.1493 4.08014L12.1629 4.06689L17.291 8.95401L15.4653 10.694ZM12.1278 19.9335L12.1141 19.9199L12.0998 19.9335L6.97173 15.0464L8.79749 13.3064L12.1141 16.467L15.4301 13.3064L17.2559 15.0464L12.1278 19.9335ZM12.115 13.8658L10.2893 12.1259L12.1723 10.3313L13.998 12.0713L12.115 13.8658ZM18.6482 13.7237L16.8225 11.9838L18.7055 10.1892L20.5312 11.9292L18.6482 13.7237Z",fill:"white"},null,-1),Yf=[Wf,Gf];function Jf(t,e){return bt(),kt("svg",Vf,Yf)}const Xf={name:"coin-bnb-chain",render:Jf},Co=Uc("MetaMaskStore",()=>{const t=qn(window.ethereum),e=qn(),r=Nc(()=>!!e.value),{provider:n,setProvider:i}=$c();t.value&&(t.value.removeListener("chainChanged",s),t.value.removeListener("accountsChanged",a),t.value.on("chainChanged",s),t.value.on("accountsChanged",a),e.value=new tn(t.value),t.value.request({method:"eth_accounts"}).then(p=>{p[0]&&o()}));function s(p){const d=new tn(t.value);i(d),Zi().updateNetwork()}function a(p){const{ethereumStore:d,ethereumState:b}=es();p[0]?b.account.value=p[0]:d.reset()}async function o(){if(!t.value)return;const[p]=await t.value.request({method:"eth_accounts"});if(!e.value)return;i(e.value);const{ethereumStore:d,ethereumState:b}=es(),N=Zi();if(p){const{chainId:E}=await e.value.getNetwork();b.account.value=p,N.setNetwork(E)}else d.reset()}const u=async()=>{if(!t.value)return;e.value||(e.value=new tn(t.value));const[p]=await e.value.send("eth_requestAccounts",[]).catch(d=>(d==null||d.message,[]));p&&o()};return Pc(e,()=>{e.value&&n.value&&i(e.value)}),{metamaskProvider:e,initialized:r,ethereum:t,requestConnect:u}});async function Hc(t){const e=So(t),r=Bc();try{await r.send("wallet_switchEthereumChain",[{chainId:e.chainId}])}catch(n){if(n.code===4902)try{const i=So(t);await Qf(i)}catch{}}}async function Qf(t){const e=Bc();try{await e.send("wallet_addEthereumChain",[t])}catch{throw Error(`wallet_addEthereumChain 
`)}}function Zf(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ed=td;function td(t,e,r){var n=r&&r.stringify||Zf,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var a=new Array(s);a[0]=n(t);for(var o=1;o<s;o++)a[o]=n(e[o]);return a.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var p="",d=1-i,b=-1,N=t&&t.length||0,E=0;E<N;){if(t.charCodeAt(E)===37&&E+1<N){switch(b=b>-1?b:0,t.charCodeAt(E+1)){case 100:case 102:if(d>=u||e[d]==null)break;b<E&&(p+=t.slice(b,E)),p+=Number(e[d]),b=E+2,E++;break;case 105:if(d>=u||e[d]==null)break;b<E&&(p+=t.slice(b,E)),p+=Math.floor(Number(e[d])),b=E+2,E++;break;case 79:case 111:case 106:if(d>=u||e[d]===void 0)break;b<E&&(p+=t.slice(b,E));var w=typeof e[d];if(w==="string"){p+="'"+e[d]+"'",b=E+2,E++;break}if(w==="function"){p+=e[d].name||"<anonymous>",b=E+2,E++;break}p+=n(e[d]),b=E+2,E++;break;case 115:if(d>=u)break;b<E&&(p+=t.slice(b,E)),p+=String(e[d]),b=E+2,E++;break;case 37:b<E&&(p+=t.slice(b,E)),p+="%",b=E+2,E++,d--;break}++d}++E}return b===-1?t:(b<N&&(p+=t.slice(b)),p)}const Io=ed;var gn=Bt;const cn=hd().console||{},rd={mapHttpRequest:Fn,mapHttpResponse:Fn,wrapRequestSerializer:Oi,wrapResponseSerializer:Oi,wrapErrorSerializer:Oi,req:Fn,res:Fn,err:ad};function nd(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Bt(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||cn;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=nd(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const a=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const o=t.level||"info",u=Object.create(r);u.log||(u.log=un),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:b,set:N});const p={transmit:e,serialize:i,asObject:t.browser.asObject,levels:a,timestamp:cd(t)};u.levels=Bt.levels,u.level=o,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=un,u.serializers=n,u._serialize=i,u._stdErrSerialize=s,u.child=E,e&&(u._logEvent=ts());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function b(){return this._level}function N(w){if(w!=="silent"&&!this.levels.values[w])throw Error("unknown level "+w);this._level=w,Sr(p,u,"error","log"),Sr(p,u,"fatal","error"),Sr(p,u,"warn","error"),Sr(p,u,"info","log"),Sr(p,u,"debug","log"),Sr(p,u,"trace","log")}function E(w,L){if(!w)throw new Error("missing bindings for child Pino");L=L||{},i&&w.serializers&&(L.serializers=w.serializers);const P=L.serializers;if(i&&P){var U=Object.assign({},n,P),x=t.browser.serialize===!0?Object.keys(U):i;delete w.serializers,si([w],x,U,this._stdErrSerialize)}function I(v){this._childLevel=(v._childLevel|0)+1,this.error=Cr(v,w,"error"),this.fatal=Cr(v,w,"fatal"),this.warn=Cr(v,w,"warn"),this.info=Cr(v,w,"info"),this.debug=Cr(v,w,"debug"),this.trace=Cr(v,w,"trace"),U&&(this.serializers=U,this._serialize=x),e&&(this._logEvent=ts([].concat(v._logEvent.bindings,w)))}return I.prototype=this,new I(this)}return u}Bt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Bt.stdSerializers=rd;Bt.stdTimeFunctions=Object.assign({},{nullTime:qc,epochTime:Kc,unixTime:ud,isoTime:ld});function Sr(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?un:i[r]?i[r]:cn[r]||cn[n]||un,id(t,e,r)}function id(t,e,r){!t.transmit&&e[r]===un||(e[r]=function(n){return function(){const s=t.timestamp(),a=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===cn?cn:this;for(var u=0;u<a.length;u++)a[u]=arguments[u];if(t.serialize&&!t.asObject&&si(a,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(o,sd(this,r,a,s)):n.apply(o,a),t.transmit){const p=t.transmit.level||e.level,d=Bt.levels.values[p],b=Bt.levels.values[r];if(b<d)return;od(this,{ts:s,methodLevel:r,methodValue:b,transmitLevel:p,transmitValue:Bt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},a)}}}(e[r]))}function sd(t,e,r,n){t._serialize&&si(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const a={};n&&(a.time=n),a.level=Bt.levels.values[e];let o=(t._childLevel|0)+1;if(o<1&&(o=1),s!==null&&typeof s=="object"){for(;o--&&typeof i[0]=="object";)Object.assign(a,i.shift());s=i.length?Io(i.shift(),i):void 0}else typeof s=="string"&&(s=Io(i.shift(),i));return s!==void 0&&(a.msg=s),a}function si(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Bt.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function Cr(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function od(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,a=e.methodValue,o=e.val,u=t._logEvent.bindings;si(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(p){return u.indexOf(p)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=a,n(s,t._logEvent,o),t._logEvent=ts(u)}function ts(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function ad(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function cd(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?qc:Kc}function Fn(){return{}}function Oi(t){return t}function un(){}function qc(){return!1}function Kc(){return Date.now()}function ud(){return Math.round(Date.now()/1e3)}function ld(){return new Date(Date.now()).toISOString()}function hd(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}var it={},fd={get exports(){return it},set exports(t){it=t}},Pr=typeof Reflect=="object"?Reflect:null,Ao=Pr&&typeof Pr.apply=="function"?Pr.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},jn;Pr&&typeof Pr.ownKeys=="function"?jn=Pr.ownKeys:Object.getOwnPropertySymbols?jn=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jn=function(e){return Object.getOwnPropertyNames(e)};function dd(t){console&&console.warn&&console.warn(t)}var Vc=Number.isNaN||function(e){return e!==e};function Oe(){Oe.init.call(this)}fd.exports=Oe;it.once=yd;Oe.EventEmitter=Oe;Oe.prototype._events=void 0;Oe.prototype._eventsCount=0;Oe.prototype._maxListeners=void 0;var To=10;function oi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Oe,"defaultMaxListeners",{enumerable:!0,get:function(){return To},set:function(t){if(typeof t!="number"||t<0||Vc(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");To=t}});Oe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Oe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Vc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Wc(t){return t._maxListeners===void 0?Oe.defaultMaxListeners:t._maxListeners}Oe.prototype.getMaxListeners=function(){return Wc(this)};Oe.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")Ao(u,this,r);else for(var p=u.length,d=Qc(u,p),n=0;n<p;++n)Ao(d[n],this,r);return!0};function Gc(t,e,r,n){var i,s,a;if(oi(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=Wc(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,dd(o)}return t}Oe.prototype.addListener=function(e,r){return Gc(this,e,r,!1)};Oe.prototype.on=Oe.prototype.addListener;Oe.prototype.prependListener=function(e,r){return Gc(this,e,r,!0)};function pd(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Yc(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=pd.bind(n);return i.listener=r,n.wrapFn=i,i}Oe.prototype.once=function(e,r){return oi(r),this.on(e,Yc(this,e,r)),this};Oe.prototype.prependOnceListener=function(e,r){return oi(r),this.prependListener(e,Yc(this,e,r)),this};Oe.prototype.removeListener=function(e,r){var n,i,s,a,o;if(oi(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){o=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():gd(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};Oe.prototype.off=Oe.prototype.removeListener;Oe.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Jc(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?_d(i):Qc(i,i.length)}Oe.prototype.listeners=function(e){return Jc(this,e,!0)};Oe.prototype.rawListeners=function(e){return Jc(this,e,!1)};Oe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Xc.call(t,e)};Oe.prototype.listenerCount=Xc;function Xc(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Oe.prototype.eventNames=function(){return this._eventsCount>0?jn(this._events):[]};function Qc(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function gd(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function _d(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function yd(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Zc(t,e,s,{once:!0}),e!=="error"&&vd(t,i,{once:!0})})}function vd(t,e,r){typeof t.on=="function"&&Zc(t,"error",e,r)}function Zc(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ai={},yt={},md={get exports(){return yt},set exports(t){yt=t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(t){var e,r,n,i,s,a,o,u,p,d,b,N,E,w,L,P,U,x,I,v,C,A,c;(function(_){var Y=typeof lt=="object"?lt:typeof self=="object"?self:typeof this=="object"?this:{};_(O(Y,O(t.exports)));function O(B,z){return B!==Y&&(typeof Object.create=="function"?Object.defineProperty(B,"__esModule",{value:!0}):B.__esModule=!0),function(W,g){return B[W]=z?z(W,g):g}}})(function(_){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,B){O.__proto__=B}||function(O,B){for(var z in B)B.hasOwnProperty(z)&&(O[z]=B[z])};e=function(O,B){Y(O,B);function z(){this.constructor=O}O.prototype=B===null?Object.create(B):(z.prototype=B.prototype,new z)},r=Object.assign||function(O){for(var B,z=1,W=arguments.length;z<W;z++){B=arguments[z];for(var g in B)Object.prototype.hasOwnProperty.call(B,g)&&(O[g]=B[g])}return O},n=function(O,B){var z={};for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&B.indexOf(W)<0&&(z[W]=O[W]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,W=Object.getOwnPropertySymbols(O);g<W.length;g++)B.indexOf(W[g])<0&&Object.prototype.propertyIsEnumerable.call(O,W[g])&&(z[W[g]]=O[W[g]]);return z},i=function(O,B,z,W){var g=arguments.length,m=g<3?B:W===null?W=Object.getOwnPropertyDescriptor(B,z):W,H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(O,B,z,W);else for(var V=O.length-1;V>=0;V--)(H=O[V])&&(m=(g<3?H(m):g>3?H(B,z,m):H(B,z))||m);return g>3&&m&&Object.defineProperty(B,z,m),m},s=function(O,B){return function(z,W){B(z,W,O)}},a=function(O,B){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,B)},o=function(O,B,z,W){function g(m){return m instanceof z?m:new z(function(H){H(m)})}return new(z||(z=Promise))(function(m,H){function V(J){try{$(W.next(J))}catch(X){H(X)}}function q(J){try{$(W.throw(J))}catch(X){H(X)}}function $(J){J.done?m(J.value):g(J.value).then(V,q)}$((W=W.apply(O,B||[])).next())})},u=function(O,B){var z={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},W,g,m,H;return H={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function V($){return function(J){return q([$,J])}}function q($){if(W)throw new TypeError("Generator is already executing.");for(;z;)try{if(W=1,g&&(m=$[0]&2?g.return:$[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,$[1])).done)return m;switch(g=0,m&&($=[$[0]&2,m.value]),$[0]){case 0:case 1:m=$;break;case 4:return z.label++,{value:$[1],done:!1};case 5:z.label++,g=$[1],$=[0];continue;case 7:$=z.ops.pop(),z.trys.pop();continue;default:if(m=z.trys,!(m=m.length>0&&m[m.length-1])&&($[0]===6||$[0]===2)){z=0;continue}if($[0]===3&&(!m||$[1]>m[0]&&$[1]<m[3])){z.label=$[1];break}if($[0]===6&&z.label<m[1]){z.label=m[1],m=$;break}if(m&&z.label<m[2]){z.label=m[2],z.ops.push($);break}m[2]&&z.ops.pop(),z.trys.pop();continue}$=B.call(O,z)}catch(J){$=[6,J],g=0}finally{W=m=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}},c=function(O,B,z,W){W===void 0&&(W=z),O[W]=B[z]},p=function(O,B){for(var z in O)z!=="default"&&!B.hasOwnProperty(z)&&(B[z]=O[z])},d=function(O){var B=typeof Symbol=="function"&&Symbol.iterator,z=B&&O[B],W=0;if(z)return z.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&W>=O.length&&(O=void 0),{value:O&&O[W++],done:!O}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(O,B){var z=typeof Symbol=="function"&&O[Symbol.iterator];if(!z)return O;var W=z.call(O),g,m=[],H;try{for(;(B===void 0||B-- >0)&&!(g=W.next()).done;)m.push(g.value)}catch(V){H={error:V}}finally{try{g&&!g.done&&(z=W.return)&&z.call(W)}finally{if(H)throw H.error}}return m},N=function(){for(var O=[],B=0;B<arguments.length;B++)O=O.concat(b(arguments[B]));return O},E=function(){for(var O=0,B=0,z=arguments.length;B<z;B++)O+=arguments[B].length;for(var W=Array(O),g=0,B=0;B<z;B++)for(var m=arguments[B],H=0,V=m.length;H<V;H++,g++)W[g]=m[H];return W},w=function(O){return this instanceof w?(this.v=O,this):new w(O)},L=function(O,B,z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=z.apply(O,B||[]),g,m=[];return g={},H("next"),H("throw"),H("return"),g[Symbol.asyncIterator]=function(){return this},g;function H(re){W[re]&&(g[re]=function(Z){return new Promise(function(fe,oe){m.push([re,Z,fe,oe])>1||V(re,Z)})})}function V(re,Z){try{q(W[re](Z))}catch(fe){X(m[0][3],fe)}}function q(re){re.value instanceof w?Promise.resolve(re.value.v).then($,J):X(m[0][2],re)}function $(re){V("next",re)}function J(re){V("throw",re)}function X(re,Z){re(Z),m.shift(),m.length&&V(m[0][0],m[0][1])}},P=function(O){var B,z;return B={},W("next"),W("throw",function(g){throw g}),W("return"),B[Symbol.iterator]=function(){return this},B;function W(g,m){B[g]=O[g]?function(H){return(z=!z)?{value:w(O[g](H)),done:g==="return"}:m?m(H):H}:m}},U=function(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B=O[Symbol.asyncIterator],z;return B?B.call(O):(O=typeof d=="function"?d(O):O[Symbol.iterator](),z={},W("next"),W("throw"),W("return"),z[Symbol.asyncIterator]=function(){return this},z);function W(m){z[m]=O[m]&&function(H){return new Promise(function(V,q){H=O[m](H),g(V,q,H.done,H.value)})}}function g(m,H,V,q){Promise.resolve(q).then(function($){m({value:$,done:V})},H)}},x=function(O,B){return Object.defineProperty?Object.defineProperty(O,"raw",{value:B}):O.raw=B,O},I=function(O){if(O&&O.__esModule)return O;var B={};if(O!=null)for(var z in O)Object.hasOwnProperty.call(O,z)&&(B[z]=O[z]);return B.default=O,B},v=function(O){return O&&O.__esModule?O:{default:O}},C=function(O,B){if(!B.has(O))throw new TypeError("attempted to get private field on non-instance");return B.get(O)},A=function(O,B,z){if(!B.has(O))throw new TypeError("attempted to set private field on non-instance");return B.set(O,z),z},_("__extends",e),_("__assign",r),_("__rest",n),_("__decorate",i),_("__param",s),_("__metadata",a),_("__awaiter",o),_("__generator",u),_("__exportStar",p),_("__createBinding",c),_("__values",d),_("__read",b),_("__spread",N),_("__spreadArrays",E),_("__await",w),_("__asyncGenerator",L),_("__asyncDelegator",P),_("__asyncValues",U),_("__makeTemplateObject",x),_("__importStar",I),_("__importDefault",v),_("__classPrivateFieldGet",C),_("__classPrivateFieldSet",A)})})(md);var _n={};Object.defineProperty(_n,"__esModule",{value:!0});function wd(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}_n.safeJsonParse=wd;function bd(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}_n.safeJsonStringify=bd;var Kn={},Ni={get exports(){return Kn},set exports(t){Kn=t}},Oo;function Ed(){return Oo||(Oo=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof lt<"u"&&lt.localStorage?Ni.exports=lt.localStorage:typeof window<"u"&&window.localStorage?Ni.exports=window.localStorage:Ni.exports=new e}()),Kn}var Pi={},Vr={},No;function xd(){if(No)return Vr;No=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.IKeyValueStorage=void 0;class t{}return Vr.IKeyValueStorage=t,Vr}var Wr={},Po;function Dd(){if(Po)return Wr;Po=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.parseEntry=void 0;const t=_n;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Wr.parseEntry=e,Wr}var Ro;function Sd(){return Ro||(Ro=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(xd(),t),e.__exportStar(Dd(),t)}(Pi)),Pi}Object.defineProperty(ai,"__esModule",{value:!0});ai.KeyValueStorage=void 0;const Tr=yt,Lo=_n,Cd=Tr.__importDefault(Ed()),Id=Sd();class eu{constructor(){this.localStorage=Cd.default}getKeys(){return Tr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Tr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(Id.parseEntry)})}getItem(e){return Tr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Lo.safeJsonParse(r)})}setItem(e,r){return Tr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Lo.safeJsonStringify(r))})}removeItem(e){return Tr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ai.KeyValueStorage=eu;var Ad=ai.default=eu,yn={},Gr={},de={},Ri={},Yr={},Fo;function Td(){if(Fo)return Yr;Fo=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Yr.delay=t,Yr}var pr={},Li={},gr={},Mo;function Od(){return Mo||(Mo=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.ONE_THOUSAND=gr.ONE_HUNDRED=void 0,gr.ONE_HUNDRED=100,gr.ONE_THOUSAND=1e3),gr}var Fi={},Uo;function Nd(){return Uo||(Uo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Fi)),Fi}var $o;function tu(){return $o||($o=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(Od(),t),e.__exportStar(Nd(),t)}(Li)),Li}var Bo;function Pd(){if(Bo)return pr;Bo=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.fromMiliseconds=pr.toMiliseconds=void 0;const t=tu();function e(n){return n*t.ONE_THOUSAND}pr.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return pr.fromMiliseconds=r,pr}var ko;function Rd(){return ko||(ko=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(Td(),t),e.__exportStar(Pd(),t)}(Ri)),Ri}var Ir={},jo;function Ld(){if(jo)return Ir;jo=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ir.Watch=t,Ir.default=t,Ir}var Mi={},Jr={},zo;function Fd(){if(zo)return Jr;zo=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.IWatch=void 0;class t{}return Jr.IWatch=t,Jr}var Ho;function Md(){return Ho||(Ho=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yt.__exportStar(Fd(),t)}(Mi)),Mi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(Rd(),t),e.__exportStar(Ld(),t),e.__exportStar(Md(),t),e.__exportStar(tu(),t)})(de);var Ui={},Xr={};let mr=class{};const Ud=Object.freeze(Object.defineProperty({__proto__:null,IEvents:mr},Symbol.toStringTag,{value:"Module"})),$d=As(Ud);var qo;function Bd(){if(qo)return Xr;qo=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.IHeartBeat=void 0;const t=$d;class e extends t.IEvents{constructor(n){super()}}return Xr.IHeartBeat=e,Xr}var Ko;function ru(){return Ko||(Ko=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yt.__exportStar(Bd(),t)}(Ui)),Ui}var $i={},_r={},Vo;function kd(){if(Vo)return _r;Vo=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.HEARTBEAT_EVENTS=_r.HEARTBEAT_INTERVAL=void 0;const t=de;return _r.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,_r.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},_r}var Wo;function nu(){return Wo||(Wo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yt.__exportStar(kd(),t)}($i)),$i}var Go;function jd(){if(Go)return Gr;Go=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.HeartBeat=void 0;const t=yt,e=it,r=de,n=ru(),i=nu();class s extends n.IHeartBeat{constructor(o){super(o),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(o==null?void 0:o.interval)||i.HEARTBEAT_INTERVAL}static init(o){return t.__awaiter(this,void 0,void 0,function*(){const u=new s(o);return yield u.init(),u})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(o,u){this.events.on(o,u)}once(o,u){this.events.once(o,u)}off(o,u){this.events.off(o,u)}removeListener(o,u){this.events.removeListener(o,u)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Gr.HeartBeat=s,Gr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(jd(),t),e.__exportStar(ru(),t),e.__exportStar(nu(),t)})(yn);var Te={},yr={},Yo;function iu(){return Yo||(Yo=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.PINO_CUSTOM_CONTEXT_KEY=yr.PINO_LOGGER_DEFAULTS=void 0,yr.PINO_LOGGER_DEFAULTS={level:"info"},yr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),yr}var ht={},Jo;function zd(){if(Jo)return ht;Jo=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const t=iu();function e(o){return Object.assign(Object.assign({},o),{level:(o==null?void 0:o.level)||t.PINO_LOGGER_DEFAULTS.level})}ht.getDefaultLoggerOptions=e;function r(o,u=t.PINO_CUSTOM_CONTEXT_KEY){return o[u]||""}ht.getBrowserLoggerContext=r;function n(o,u,p=t.PINO_CUSTOM_CONTEXT_KEY){return o[p]=u,o}ht.setBrowserLoggerContext=n;function i(o,u=t.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof o.bindings>"u"?p=r(o,u):p=o.bindings().context||"",p}ht.getLoggerContext=i;function s(o,u,p=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(o,p);return d.trim()?`${d}/${u}`:u}ht.formatChildLoggerContext=s;function a(o,u,p=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(o,u,p),b=o.child({context:d});return n(b,d,p)}return ht.generateChildLogger=a,ht}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=yt,r=e.__importDefault(gn);Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(iu(),t),e.__exportStar(zd(),t)})(Te);let Hd=class extends mr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},qd=class extends mr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},Kd=class{constructor(e,r){this.logger=e,this.core=r}},Vd=class extends mr{constructor(e,r){super(),this.relayer=e,this.logger=r}},Wd=class extends mr{constructor(e){super()}},Gd=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},Yd=class extends mr{constructor(e,r){super(),this.relayer=e,this.logger=r}},Jd=class extends mr{constructor(e,r){super(),this.core=e,this.logger=r}},Xd=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Qd=class{constructor(e){this.client=e}};function Ts(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function ln(t){return typeof t=="string"?t:JSON.stringify(t)}var Os={},Br={},ci={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.BrowserRandomSource=void 0;const Xo=65536;class Zd{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Xo)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Xo)));return r}}ui.BrowserRandomSource=Zd;function ep(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var li={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});function tp(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Et.wipe=tp;Object.defineProperty(li,"__esModule",{value:!0});li.NodeRandomSource=void 0;const rp=Et;class np{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof ep<"u"){const e=Pf;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,rp.wipe)(r),n}}li.NodeRandomSource=np;Object.defineProperty(ci,"__esModule",{value:!0});ci.SystemRandomSource=void 0;const ip=ui,sp=li;class op{constructor(){if(this.isAvailable=!1,this.name="",this._source=new ip.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new sp.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ci.SystemRandomSource=op;var ye={},su={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,u){var p=o>>>16&65535,d=o&65535,b=u>>>16&65535,N=u&65535;return d*N+(p*N+d*b<<16>>>0)|0}t.mul=Math.imul||e;function r(o,u){return o+u|0}t.add=r;function n(o,u){return o-u|0}t.sub=n;function i(o,u){return o<<u|o>>>32-u}t.rotl=i;function s(o,u){return o<<32-u|o>>>u}t.rotr=s;function a(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(o){return t.isInteger(o)&&o>=-t.MAX_SAFE_INTEGER&&o<=t.MAX_SAFE_INTEGER}})(su);Object.defineProperty(ye,"__esModule",{value:!0});var ou=su;function ap(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}ye.readInt16BE=ap;function cp(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}ye.readUint16BE=cp;function up(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}ye.readInt16LE=up;function lp(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}ye.readUint16LE=lp;function au(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}ye.writeUint16BE=au;ye.writeInt16BE=au;function cu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}ye.writeUint16LE=cu;ye.writeInt16LE=cu;function rs(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}ye.readInt32BE=rs;function ns(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}ye.readUint32BE=ns;function is(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}ye.readInt32LE=is;function ss(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}ye.readUint32LE=ss;function Vn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}ye.writeUint32BE=Vn;ye.writeInt32BE=Vn;function Wn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}ye.writeUint32LE=Wn;ye.writeInt32LE=Wn;function hp(t,e){e===void 0&&(e=0);var r=rs(t,e),n=rs(t,e+4);return r*4294967296+n-(n>>31)*4294967296}ye.readInt64BE=hp;function fp(t,e){e===void 0&&(e=0);var r=ns(t,e),n=ns(t,e+4);return r*4294967296+n}ye.readUint64BE=fp;function dp(t,e){e===void 0&&(e=0);var r=is(t,e),n=is(t,e+4);return n*4294967296+r-(r>>31)*4294967296}ye.readInt64LE=dp;function pp(t,e){e===void 0&&(e=0);var r=ss(t,e),n=ss(t,e+4);return n*4294967296+r}ye.readUint64LE=pp;function uu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Vn(t/4294967296>>>0,e,r),Vn(t>>>0,e,r+4),e}ye.writeUint64BE=uu;ye.writeInt64BE=uu;function lu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Wn(t>>>0,e,r),Wn(t/4294967296>>>0,e,r+4),e}ye.writeUint64LE=lu;ye.writeInt64LE=lu;function gp(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}ye.readUintBE=gp;function _p(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}ye.readUintLE=_p;function yp(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ou.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}ye.writeUintBE=yp;function vp(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ou.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}ye.writeUintLE=vp;function mp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}ye.readFloat32BE=mp;function wp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}ye.readFloat32LE=wp;function bp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}ye.readFloat64BE=bp;function Ep(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}ye.readFloat64LE=Ep;function xp(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}ye.writeFloat32BE=xp;function Dp(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}ye.writeFloat32LE=Dp;function Sp(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}ye.writeFloat64BE=Sp;function Cp(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}ye.writeFloat64LE=Cp;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=ci,r=ye,n=Et;t.defaultRandomSource=new e.SystemRandomSource;function i(p,d=t.defaultRandomSource){return d.randomBytes(p)}t.randomBytes=i;function s(p=t.defaultRandomSource){const d=i(4,p),b=(0,r.readUint32LE)(d);return(0,n.wipe)(d),b}t.randomUint32=s;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(p,d=a,b=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let N="";const E=d.length,w=256-256%E;for(;p>0;){const L=i(Math.ceil(p*256/w),b);for(let P=0;P<L.length&&p>0;P++){const U=L[P];U<w&&(N+=d.charAt(U%E),p--)}(0,n.wipe)(L)}return N}t.randomString=o;function u(p,d=a,b=t.defaultRandomSource){const N=Math.ceil(p/(Math.log(d.length)/Math.LN2));return o(N,d,b)}t.randomStringForEntropy=u})(Br);var hu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ye,r=Et;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},o.prototype.update=function(u,p){if(p===void 0&&(p=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=u[d++],p--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,d,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=u[d++],p--;return this},o.prototype.finish=function(u){if(!this._finished){var p=this._bytesHashed,d=this._bufferLength,b=p/536870912|0,N=p<<3,E=p%128<112?128:256;this._buffer[d]=128;for(var w=d+1;w<E-8;w++)this._buffer[w]=0;e.writeUint32BE(b,this._buffer,E-8),e.writeUint32BE(N,this._buffer,E-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,E),this._finished=!0}for(var w=0;w<this.digestLength/8;w++)e.writeUint32BE(this._stateHi[w],u,w*8),e.writeUint32BE(this._stateLo[w],u,w*8+4);return this},o.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},o}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(o,u,p,d,b,N,E){for(var w=p[0],L=p[1],P=p[2],U=p[3],x=p[4],I=p[5],v=p[6],C=p[7],A=d[0],c=d[1],_=d[2],Y=d[3],O=d[4],B=d[5],z=d[6],W=d[7],g,m,H,V,q,$,J,X;E>=128;){for(var re=0;re<16;re++){var Z=8*re+N;o[re]=e.readUint32BE(b,Z),u[re]=e.readUint32BE(b,Z+4)}for(var re=0;re<80;re++){var fe=w,oe=L,me=P,j=U,k=x,F=I,l=v,T=C,ee=A,te=c,we=_,xe=Y,y=O,h=B,f=z,S=W;if(g=C,m=W,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=(x>>>14|O<<32-14)^(x>>>18|O<<32-18)^(O>>>41-32|x<<32-(41-32)),m=(O>>>14|x<<32-14)^(O>>>18|x<<32-18)^(x>>>41-32|O<<32-(41-32)),q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,g=x&I^~x&v,m=O&B^~O&z,q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,g=i[re*2],m=i[re*2+1],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,g=o[re%16],m=u[re%16],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,H=J&65535|X<<16,V=q&65535|$<<16,g=H,m=V,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=(w>>>28|A<<32-28)^(A>>>34-32|w<<32-(34-32))^(A>>>39-32|w<<32-(39-32)),m=(A>>>28|w<<32-28)^(w>>>34-32|A<<32-(34-32))^(w>>>39-32|A<<32-(39-32)),q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,g=w&L^w&P^L&P,m=A&c^A&_^c&_,q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,T=J&65535|X<<16,S=q&65535|$<<16,g=j,m=xe,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=H,m=V,q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,j=J&65535|X<<16,xe=q&65535|$<<16,L=fe,P=oe,U=me,x=j,I=k,v=F,C=l,w=T,c=ee,_=te,Y=we,O=xe,B=y,z=h,W=f,A=S,re%16===15)for(var Z=0;Z<16;Z++)g=o[Z],m=u[Z],q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=o[(Z+9)%16],m=u[(Z+9)%16],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,H=o[(Z+1)%16],V=u[(Z+1)%16],g=(H>>>1|V<<32-1)^(H>>>8|V<<32-8)^H>>>7,m=(V>>>1|H<<32-1)^(V>>>8|H<<32-8)^(V>>>7|H<<32-7),q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,H=o[(Z+14)%16],V=u[(Z+14)%16],g=(H>>>19|V<<32-19)^(V>>>61-32|H<<32-(61-32))^H>>>6,m=(V>>>19|H<<32-19)^(H>>>61-32|V<<32-(61-32))^(V>>>6|H<<32-6),q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,o[Z]=J&65535|X<<16,u[Z]=q&65535|$<<16}g=w,m=A,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[0],m=d[0],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[0]=w=J&65535|X<<16,d[0]=A=q&65535|$<<16,g=L,m=c,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[1],m=d[1],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[1]=L=J&65535|X<<16,d[1]=c=q&65535|$<<16,g=P,m=_,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[2],m=d[2],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[2]=P=J&65535|X<<16,d[2]=_=q&65535|$<<16,g=U,m=Y,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[3],m=d[3],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[3]=U=J&65535|X<<16,d[3]=Y=q&65535|$<<16,g=x,m=O,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[4],m=d[4],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[4]=x=J&65535|X<<16,d[4]=O=q&65535|$<<16,g=I,m=B,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[5],m=d[5],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[5]=I=J&65535|X<<16,d[5]=B=q&65535|$<<16,g=v,m=z,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[6],m=d[6],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[6]=v=J&65535|X<<16,d[6]=z=q&65535|$<<16,g=C,m=W,q=m&65535,$=m>>>16,J=g&65535,X=g>>>16,g=p[7],m=d[7],q+=m&65535,$+=m>>>16,J+=g&65535,X+=g>>>16,$+=q>>>16,J+=$>>>16,X+=J>>>16,p[7]=C=J&65535|X<<16,d[7]=W=q&65535|$<<16,N+=128,E-=128}return N}function a(o){var u=new n;u.update(o);var p=u.digest();return u.clean(),p}t.hash=a})(hu);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Br,r=hu,n=Et;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(j){const k=new Float64Array(16);if(j)for(let F=0;F<j.length;F++)k[F]=j[F];return k}const s=new Uint8Array(32);s[0]=9;const a=i(),o=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),N=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(j,k){for(let F=0;F<16;F++)j[F]=k[F]|0}function w(j){let k=1;for(let F=0;F<16;F++){let l=j[F]+k+65535;k=Math.floor(l/65536),j[F]=l-k*65536}j[0]+=k-1+37*(k-1)}function L(j,k,F){const l=~(F-1);for(let T=0;T<16;T++){const ee=l&(j[T]^k[T]);j[T]^=ee,k[T]^=ee}}function P(j,k){const F=i(),l=i();for(let T=0;T<16;T++)l[T]=k[T];w(l),w(l),w(l);for(let T=0;T<2;T++){F[0]=l[0]-65517;for(let te=1;te<15;te++)F[te]=l[te]-65535-(F[te-1]>>16&1),F[te-1]&=65535;F[15]=l[15]-32767-(F[14]>>16&1);const ee=F[15]>>16&1;F[14]&=65535,L(l,F,1-ee)}for(let T=0;T<16;T++)j[2*T]=l[T]&255,j[2*T+1]=l[T]>>8}function U(j,k){let F=0;for(let l=0;l<32;l++)F|=j[l]^k[l];return(1&F-1>>>8)-1}function x(j,k){const F=new Uint8Array(32),l=new Uint8Array(32);return P(F,j),P(l,k),U(F,l)}function I(j){const k=new Uint8Array(32);return P(k,j),k[0]&1}function v(j,k){for(let F=0;F<16;F++)j[F]=k[2*F]+(k[2*F+1]<<8);j[15]&=32767}function C(j,k,F){for(let l=0;l<16;l++)j[l]=k[l]+F[l]}function A(j,k,F){for(let l=0;l<16;l++)j[l]=k[l]-F[l]}function c(j,k,F){let l,T,ee=0,te=0,we=0,xe=0,y=0,h=0,f=0,S=0,R=0,K=0,G=0,ne=0,ae=0,le=0,he=0,ce=0,_e=0,be=0,ge=0,De=0,Se=0,Ie=0,Ae=0,Ce=0,Tt=0,Rt=0,Xt=0,mt=0,lr=0,Hr=0,An=0,je=F[0],Ue=F[1],ze=F[2],He=F[3],qe=F[4],$e=F[5],Ge=F[6],Ye=F[7],Je=F[8],Xe=F[9],Qe=F[10],Ve=F[11],Ke=F[12],Le=F[13],Ze=F[14],et=F[15];l=k[0],ee+=l*je,te+=l*Ue,we+=l*ze,xe+=l*He,y+=l*qe,h+=l*$e,f+=l*Ge,S+=l*Ye,R+=l*Je,K+=l*Xe,G+=l*Qe,ne+=l*Ve,ae+=l*Ke,le+=l*Le,he+=l*Ze,ce+=l*et,l=k[1],te+=l*je,we+=l*Ue,xe+=l*ze,y+=l*He,h+=l*qe,f+=l*$e,S+=l*Ge,R+=l*Ye,K+=l*Je,G+=l*Xe,ne+=l*Qe,ae+=l*Ve,le+=l*Ke,he+=l*Le,ce+=l*Ze,_e+=l*et,l=k[2],we+=l*je,xe+=l*Ue,y+=l*ze,h+=l*He,f+=l*qe,S+=l*$e,R+=l*Ge,K+=l*Ye,G+=l*Je,ne+=l*Xe,ae+=l*Qe,le+=l*Ve,he+=l*Ke,ce+=l*Le,_e+=l*Ze,be+=l*et,l=k[3],xe+=l*je,y+=l*Ue,h+=l*ze,f+=l*He,S+=l*qe,R+=l*$e,K+=l*Ge,G+=l*Ye,ne+=l*Je,ae+=l*Xe,le+=l*Qe,he+=l*Ve,ce+=l*Ke,_e+=l*Le,be+=l*Ze,ge+=l*et,l=k[4],y+=l*je,h+=l*Ue,f+=l*ze,S+=l*He,R+=l*qe,K+=l*$e,G+=l*Ge,ne+=l*Ye,ae+=l*Je,le+=l*Xe,he+=l*Qe,ce+=l*Ve,_e+=l*Ke,be+=l*Le,ge+=l*Ze,De+=l*et,l=k[5],h+=l*je,f+=l*Ue,S+=l*ze,R+=l*He,K+=l*qe,G+=l*$e,ne+=l*Ge,ae+=l*Ye,le+=l*Je,he+=l*Xe,ce+=l*Qe,_e+=l*Ve,be+=l*Ke,ge+=l*Le,De+=l*Ze,Se+=l*et,l=k[6],f+=l*je,S+=l*Ue,R+=l*ze,K+=l*He,G+=l*qe,ne+=l*$e,ae+=l*Ge,le+=l*Ye,he+=l*Je,ce+=l*Xe,_e+=l*Qe,be+=l*Ve,ge+=l*Ke,De+=l*Le,Se+=l*Ze,Ie+=l*et,l=k[7],S+=l*je,R+=l*Ue,K+=l*ze,G+=l*He,ne+=l*qe,ae+=l*$e,le+=l*Ge,he+=l*Ye,ce+=l*Je,_e+=l*Xe,be+=l*Qe,ge+=l*Ve,De+=l*Ke,Se+=l*Le,Ie+=l*Ze,Ae+=l*et,l=k[8],R+=l*je,K+=l*Ue,G+=l*ze,ne+=l*He,ae+=l*qe,le+=l*$e,he+=l*Ge,ce+=l*Ye,_e+=l*Je,be+=l*Xe,ge+=l*Qe,De+=l*Ve,Se+=l*Ke,Ie+=l*Le,Ae+=l*Ze,Ce+=l*et,l=k[9],K+=l*je,G+=l*Ue,ne+=l*ze,ae+=l*He,le+=l*qe,he+=l*$e,ce+=l*Ge,_e+=l*Ye,be+=l*Je,ge+=l*Xe,De+=l*Qe,Se+=l*Ve,Ie+=l*Ke,Ae+=l*Le,Ce+=l*Ze,Tt+=l*et,l=k[10],G+=l*je,ne+=l*Ue,ae+=l*ze,le+=l*He,he+=l*qe,ce+=l*$e,_e+=l*Ge,be+=l*Ye,ge+=l*Je,De+=l*Xe,Se+=l*Qe,Ie+=l*Ve,Ae+=l*Ke,Ce+=l*Le,Tt+=l*Ze,Rt+=l*et,l=k[11],ne+=l*je,ae+=l*Ue,le+=l*ze,he+=l*He,ce+=l*qe,_e+=l*$e,be+=l*Ge,ge+=l*Ye,De+=l*Je,Se+=l*Xe,Ie+=l*Qe,Ae+=l*Ve,Ce+=l*Ke,Tt+=l*Le,Rt+=l*Ze,Xt+=l*et,l=k[12],ae+=l*je,le+=l*Ue,he+=l*ze,ce+=l*He,_e+=l*qe,be+=l*$e,ge+=l*Ge,De+=l*Ye,Se+=l*Je,Ie+=l*Xe,Ae+=l*Qe,Ce+=l*Ve,Tt+=l*Ke,Rt+=l*Le,Xt+=l*Ze,mt+=l*et,l=k[13],le+=l*je,he+=l*Ue,ce+=l*ze,_e+=l*He,be+=l*qe,ge+=l*$e,De+=l*Ge,Se+=l*Ye,Ie+=l*Je,Ae+=l*Xe,Ce+=l*Qe,Tt+=l*Ve,Rt+=l*Ke,Xt+=l*Le,mt+=l*Ze,lr+=l*et,l=k[14],he+=l*je,ce+=l*Ue,_e+=l*ze,be+=l*He,ge+=l*qe,De+=l*$e,Se+=l*Ge,Ie+=l*Ye,Ae+=l*Je,Ce+=l*Xe,Tt+=l*Qe,Rt+=l*Ve,Xt+=l*Ke,mt+=l*Le,lr+=l*Ze,Hr+=l*et,l=k[15],ce+=l*je,_e+=l*Ue,be+=l*ze,ge+=l*He,De+=l*qe,Se+=l*$e,Ie+=l*Ge,Ae+=l*Ye,Ce+=l*Je,Tt+=l*Xe,Rt+=l*Qe,Xt+=l*Ve,mt+=l*Ke,lr+=l*Le,Hr+=l*Ze,An+=l*et,ee+=38*_e,te+=38*be,we+=38*ge,xe+=38*De,y+=38*Se,h+=38*Ie,f+=38*Ae,S+=38*Ce,R+=38*Tt,K+=38*Rt,G+=38*Xt,ne+=38*mt,ae+=38*lr,le+=38*Hr,he+=38*An,T=1,l=ee+T+65535,T=Math.floor(l/65536),ee=l-T*65536,l=te+T+65535,T=Math.floor(l/65536),te=l-T*65536,l=we+T+65535,T=Math.floor(l/65536),we=l-T*65536,l=xe+T+65535,T=Math.floor(l/65536),xe=l-T*65536,l=y+T+65535,T=Math.floor(l/65536),y=l-T*65536,l=h+T+65535,T=Math.floor(l/65536),h=l-T*65536,l=f+T+65535,T=Math.floor(l/65536),f=l-T*65536,l=S+T+65535,T=Math.floor(l/65536),S=l-T*65536,l=R+T+65535,T=Math.floor(l/65536),R=l-T*65536,l=K+T+65535,T=Math.floor(l/65536),K=l-T*65536,l=G+T+65535,T=Math.floor(l/65536),G=l-T*65536,l=ne+T+65535,T=Math.floor(l/65536),ne=l-T*65536,l=ae+T+65535,T=Math.floor(l/65536),ae=l-T*65536,l=le+T+65535,T=Math.floor(l/65536),le=l-T*65536,l=he+T+65535,T=Math.floor(l/65536),he=l-T*65536,l=ce+T+65535,T=Math.floor(l/65536),ce=l-T*65536,ee+=T-1+37*(T-1),T=1,l=ee+T+65535,T=Math.floor(l/65536),ee=l-T*65536,l=te+T+65535,T=Math.floor(l/65536),te=l-T*65536,l=we+T+65535,T=Math.floor(l/65536),we=l-T*65536,l=xe+T+65535,T=Math.floor(l/65536),xe=l-T*65536,l=y+T+65535,T=Math.floor(l/65536),y=l-T*65536,l=h+T+65535,T=Math.floor(l/65536),h=l-T*65536,l=f+T+65535,T=Math.floor(l/65536),f=l-T*65536,l=S+T+65535,T=Math.floor(l/65536),S=l-T*65536,l=R+T+65535,T=Math.floor(l/65536),R=l-T*65536,l=K+T+65535,T=Math.floor(l/65536),K=l-T*65536,l=G+T+65535,T=Math.floor(l/65536),G=l-T*65536,l=ne+T+65535,T=Math.floor(l/65536),ne=l-T*65536,l=ae+T+65535,T=Math.floor(l/65536),ae=l-T*65536,l=le+T+65535,T=Math.floor(l/65536),le=l-T*65536,l=he+T+65535,T=Math.floor(l/65536),he=l-T*65536,l=ce+T+65535,T=Math.floor(l/65536),ce=l-T*65536,ee+=T-1+37*(T-1),j[0]=ee,j[1]=te,j[2]=we,j[3]=xe,j[4]=y,j[5]=h,j[6]=f,j[7]=S,j[8]=R,j[9]=K,j[10]=G,j[11]=ne,j[12]=ae,j[13]=le,j[14]=he,j[15]=ce}function _(j,k){c(j,k,k)}function Y(j,k){const F=i();let l;for(l=0;l<16;l++)F[l]=k[l];for(l=253;l>=0;l--)_(F,F),l!==2&&l!==4&&c(F,F,k);for(l=0;l<16;l++)j[l]=F[l]}function O(j,k){const F=i();let l;for(l=0;l<16;l++)F[l]=k[l];for(l=250;l>=0;l--)_(F,F),l!==1&&c(F,F,k);for(l=0;l<16;l++)j[l]=F[l]}function B(j,k){const F=i(),l=i(),T=i(),ee=i(),te=i(),we=i(),xe=i(),y=i(),h=i();A(F,j[1],j[0]),A(h,k[1],k[0]),c(F,F,h),C(l,j[0],j[1]),C(h,k[0],k[1]),c(l,l,h),c(T,j[3],k[3]),c(T,T,p),c(ee,j[2],k[2]),C(ee,ee,ee),A(te,l,F),A(we,ee,T),C(xe,ee,T),C(y,l,F),c(j[0],te,we),c(j[1],y,xe),c(j[2],xe,we),c(j[3],te,y)}function z(j,k,F){for(let l=0;l<4;l++)L(j[l],k[l],F)}function W(j,k){const F=i(),l=i(),T=i();Y(T,k[2]),c(F,k[0],T),c(l,k[1],T),P(j,l),j[31]^=I(F)<<7}function g(j,k,F){E(j[0],a),E(j[1],o),E(j[2],o),E(j[3],a);for(let l=255;l>=0;--l){const T=F[l/8|0]>>(l&7)&1;z(j,k,T),B(k,j),B(j,j),z(j,k,T)}}function m(j,k){const F=[i(),i(),i(),i()];E(F[0],d),E(F[1],b),E(F[2],o),c(F[3],d,b),g(j,F,k)}function H(j){if(j.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const k=(0,r.hash)(j);k[0]&=248,k[31]&=127,k[31]|=64;const F=new Uint8Array(32),l=[i(),i(),i(),i()];m(l,k),W(F,l);const T=new Uint8Array(64);return T.set(j),T.set(F,32),{publicKey:F,secretKey:T}}t.generateKeyPairFromSeed=H;function V(j){const k=(0,e.randomBytes)(32,j),F=H(k);return(0,n.wipe)(k),F}t.generateKeyPair=V;function q(j){if(j.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(j.subarray(32))}t.extractPublicKeyFromSecretKey=q;const $=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(j,k){let F,l,T,ee;for(l=63;l>=32;--l){for(F=0,T=l-32,ee=l-12;T<ee;++T)k[T]+=F-16*k[l]*$[T-(l-32)],F=Math.floor((k[T]+128)/256),k[T]-=F*256;k[T]+=F,k[l]=0}for(F=0,T=0;T<32;T++)k[T]+=F-(k[31]>>4)*$[T],F=k[T]>>8,k[T]&=255;for(T=0;T<32;T++)k[T]-=F*$[T];for(l=0;l<32;l++)k[l+1]+=k[l]>>8,j[l]=k[l]&255}function X(j){const k=new Float64Array(64);for(let F=0;F<64;F++)k[F]=j[F];for(let F=0;F<64;F++)j[F]=0;J(j,k)}function re(j,k){const F=new Float64Array(64),l=[i(),i(),i(),i()],T=(0,r.hash)(j.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const ee=new Uint8Array(64);ee.set(T.subarray(32),32);const te=new r.SHA512;te.update(ee.subarray(32)),te.update(k);const we=te.digest();te.clean(),X(we),m(l,we),W(ee,l),te.reset(),te.update(ee.subarray(0,32)),te.update(j.subarray(32)),te.update(k);const xe=te.digest();X(xe);for(let y=0;y<32;y++)F[y]=we[y];for(let y=0;y<32;y++)for(let h=0;h<32;h++)F[y+h]+=xe[y]*T[h];return J(ee.subarray(32),F),ee}t.sign=re;function Z(j,k){const F=i(),l=i(),T=i(),ee=i(),te=i(),we=i(),xe=i();return E(j[2],o),v(j[1],k),_(T,j[1]),c(ee,T,u),A(T,T,j[2]),C(ee,j[2],ee),_(te,ee),_(we,te),c(xe,we,te),c(F,xe,T),c(F,F,ee),O(F,F),c(F,F,T),c(F,F,ee),c(F,F,ee),c(j[0],F,ee),_(l,j[0]),c(l,l,ee),x(l,T)&&c(j[0],j[0],N),_(l,j[0]),c(l,l,ee),x(l,T)?-1:(I(j[0])===k[31]>>7&&A(j[0],a,j[0]),c(j[3],j[0],j[1]),0)}function fe(j,k,F){const l=new Uint8Array(32),T=[i(),i(),i(),i()],ee=[i(),i(),i(),i()];if(F.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Z(ee,j))return!1;const te=new r.SHA512;te.update(F.subarray(0,32)),te.update(j),te.update(k);const we=te.digest();return X(we),g(T,ee,we),m(ee,F.subarray(32)),B(T,ee),W(l,T),!U(F,l)}t.verify=fe;function oe(j){let k=[i(),i(),i(),i()];if(Z(k,j))throw new Error("Ed25519: invalid public key");let F=i(),l=i(),T=k[1];C(F,o,T),A(l,o,T),Y(l,l),c(F,F,l);let ee=new Uint8Array(32);return P(ee,F),ee}t.convertPublicKeyToX25519=oe;function me(j){const k=(0,r.hash)(j.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const F=new Uint8Array(k.subarray(0,32));return(0,n.wipe)(k),F}t.convertSecretKeyToX25519=me})(Os);const Ip="EdDSA",Ap="JWT",fu=".",du="base64url",Tp="utf8",Op="utf8",Np=":",Pp="did",Rp="key",Qo="base58btc",Lp="z",Fp="K36",Mp=32;function pu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function os(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=pu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Up(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,u=t.charAt(0),p=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function b(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var L=0,P=0,U=0,x=w.length;U!==x&&w[U]===0;)U++,L++;for(var I=(x-U)*d+1>>>0,v=new Uint8Array(I);U!==x;){for(var C=w[U],A=0,c=I-1;(C!==0||A<P)&&c!==-1;c--,A++)C+=256*v[c]>>>0,v[c]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");P=A,U++}for(var _=I-P;_!==I&&v[_]===0;)_++;for(var Y=u.repeat(L);_<I;++_)Y+=t.charAt(v[_]);return Y}function N(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var L=0;if(w[L]!==" "){for(var P=0,U=0;w[L]===u;)P++,L++;for(var x=(w.length-L)*p+1>>>0,I=new Uint8Array(x);w[L];){var v=r[w.charCodeAt(L)];if(v===255)return;for(var C=0,A=x-1;(v!==0||C<U)&&A!==-1;A--,C++)v+=o*I[A]>>>0,I[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");U=C,L++}if(w[L]!==" "){for(var c=x-U;c!==x&&I[c]===0;)c++;for(var _=new Uint8Array(P+(x-c)),Y=P;c!==x;)_[Y++]=I[c++];return _}}}function E(w){var L=N(w);if(L)return L;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:N,decode:E}}var $p=Up,Bp=$p;const kp=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jp=t=>new TextEncoder().encode(t),zp=t=>new TextDecoder().decode(t);class Hp{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qp{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gu(this,e)}}class Kp{constructor(e){this.decoders=e}or(e){return gu(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gu=(t,e)=>new Kp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Vp{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Hp(e,r,n),this.decoder=new qp(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const hi=({name:t,prefix:e,encode:r,decode:n})=>new Vp(t,e,r,n),vn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Bp(r,e);return hi({prefix:t,name:e,encode:n,decode:s=>kp(i(s))})},Wp=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,u=0,p=0;for(let d=0;d<s;++d){const b=i[t[d]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,o+=r,o>=8&&(o-=8,a[p++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return a},Gp=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let u=0;u<t.length;++u)for(o=o<<8|t[u],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},st=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>hi({prefix:e,name:t,encode(i){return Gp(i,n,r)},decode(i){return Wp(i,n,r,t)}}),Yp=hi({prefix:"\0",name:"identity",encode:t=>zp(t),decode:t=>jp(t)}),Jp=Object.freeze(Object.defineProperty({__proto__:null,identity:Yp},Symbol.toStringTag,{value:"Module"})),Xp=st({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qp=Object.freeze(Object.defineProperty({__proto__:null,base2:Xp},Symbol.toStringTag,{value:"Module"})),Zp=st({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),e0=Object.freeze(Object.defineProperty({__proto__:null,base8:Zp},Symbol.toStringTag,{value:"Module"})),t0=vn({prefix:"9",name:"base10",alphabet:"0123456789"}),r0=Object.freeze(Object.defineProperty({__proto__:null,base10:t0},Symbol.toStringTag,{value:"Module"})),n0=st({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),i0=st({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),s0=Object.freeze(Object.defineProperty({__proto__:null,base16:n0,base16upper:i0},Symbol.toStringTag,{value:"Module"})),o0=st({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a0=st({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c0=st({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),u0=st({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),l0=st({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h0=st({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f0=st({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),d0=st({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p0=st({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),g0=Object.freeze(Object.defineProperty({__proto__:null,base32:o0,base32hex:l0,base32hexpad:f0,base32hexpadupper:d0,base32hexupper:h0,base32pad:c0,base32padupper:u0,base32upper:a0,base32z:p0},Symbol.toStringTag,{value:"Module"})),_0=vn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),y0=vn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),v0=Object.freeze(Object.defineProperty({__proto__:null,base36:_0,base36upper:y0},Symbol.toStringTag,{value:"Module"})),m0=vn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),w0=vn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),b0=Object.freeze(Object.defineProperty({__proto__:null,base58btc:m0,base58flickr:w0},Symbol.toStringTag,{value:"Module"})),E0=st({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x0=st({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),D0=st({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),S0=st({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),C0=Object.freeze(Object.defineProperty({__proto__:null,base64:E0,base64pad:x0,base64url:D0,base64urlpad:S0},Symbol.toStringTag,{value:"Module"})),_u=Array.from(""),I0=_u.reduce((t,e,r)=>(t[r]=e,t),[]),A0=_u.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function T0(t){return t.reduce((e,r)=>(e+=I0[r],e),"")}function O0(t){const e=[];for(const r of t){const n=A0[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const N0=hi({prefix:"",name:"base256emoji",encode:T0,decode:O0}),P0=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:N0},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Zo={...Jp,...Qp,...e0,...r0,...s0,...g0,...v0,...b0,...C0,...P0};function yu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const ea=yu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Bi=yu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=pu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),vu={utf8:ea,"utf-8":ea,hex:Zo.base16,latin1:Bi,ascii:Bi,binary:Bi,...Zo};function vt(t,e="utf8"){const r=vu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function pt(t,e="utf8"){const r=vu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Gn(t){return vt(pt(ln(t),Tp),du)}function mu(t){const e=pt(Fp,Qo),r=Lp+vt(os([e,t]),Qo);return[Pp,Rp,r].join(Np)}function R0(t){return vt(t,du)}function L0(t){return pt([Gn(t.header),Gn(t.payload)].join(fu),Op)}function F0(t){return[Gn(t.header),Gn(t.payload),R0(t.signature)].join(fu)}function ta(t=Br.randomBytes(Mp)){return Os.generateKeyPairFromSeed(t)}async function M0(t,e,r,n,i=de.fromMiliseconds(Date.now())){const s={alg:Ip,typ:Ap},a=mu(n.publicKey),o=i+r,u={iss:a,sub:t,aud:e,iat:i,exp:o},p=L0({header:s,payload:u}),d=Os.sign(n.secretKey,p);return F0({header:s,payload:u,signature:d})}var Ns={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});var ct=ye,as=Et,U0=20;function $0(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,a=1797285236,o=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],p=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],b=r[19]<<24|r[18]<<16|r[17]<<8|r[16],N=r[23]<<24|r[22]<<16|r[21]<<8|r[20],E=r[27]<<24|r[26]<<16|r[25]<<8|r[24],w=r[31]<<24|r[30]<<16|r[29]<<8|r[28],L=e[3]<<24|e[2]<<16|e[1]<<8|e[0],P=e[7]<<24|e[6]<<16|e[5]<<8|e[4],U=e[11]<<24|e[10]<<16|e[9]<<8|e[8],x=e[15]<<24|e[14]<<16|e[13]<<8|e[12],I=n,v=i,C=s,A=a,c=o,_=u,Y=p,O=d,B=b,z=N,W=E,g=w,m=L,H=P,V=U,q=x,$=0;$<U0;$+=2)I=I+c|0,m^=I,m=m>>>32-16|m<<16,B=B+m|0,c^=B,c=c>>>32-12|c<<12,v=v+_|0,H^=v,H=H>>>32-16|H<<16,z=z+H|0,_^=z,_=_>>>32-12|_<<12,C=C+Y|0,V^=C,V=V>>>32-16|V<<16,W=W+V|0,Y^=W,Y=Y>>>32-12|Y<<12,A=A+O|0,q^=A,q=q>>>32-16|q<<16,g=g+q|0,O^=g,O=O>>>32-12|O<<12,C=C+Y|0,V^=C,V=V>>>32-8|V<<8,W=W+V|0,Y^=W,Y=Y>>>32-7|Y<<7,A=A+O|0,q^=A,q=q>>>32-8|q<<8,g=g+q|0,O^=g,O=O>>>32-7|O<<7,v=v+_|0,H^=v,H=H>>>32-8|H<<8,z=z+H|0,_^=z,_=_>>>32-7|_<<7,I=I+c|0,m^=I,m=m>>>32-8|m<<8,B=B+m|0,c^=B,c=c>>>32-7|c<<7,I=I+_|0,q^=I,q=q>>>32-16|q<<16,W=W+q|0,_^=W,_=_>>>32-12|_<<12,v=v+Y|0,m^=v,m=m>>>32-16|m<<16,g=g+m|0,Y^=g,Y=Y>>>32-12|Y<<12,C=C+O|0,H^=C,H=H>>>32-16|H<<16,B=B+H|0,O^=B,O=O>>>32-12|O<<12,A=A+c|0,V^=A,V=V>>>32-16|V<<16,z=z+V|0,c^=z,c=c>>>32-12|c<<12,C=C+O|0,H^=C,H=H>>>32-8|H<<8,B=B+H|0,O^=B,O=O>>>32-7|O<<7,A=A+c|0,V^=A,V=V>>>32-8|V<<8,z=z+V|0,c^=z,c=c>>>32-7|c<<7,v=v+Y|0,m^=v,m=m>>>32-8|m<<8,g=g+m|0,Y^=g,Y=Y>>>32-7|Y<<7,I=I+_|0,q^=I,q=q>>>32-8|q<<8,W=W+q|0,_^=W,_=_>>>32-7|_<<7;ct.writeUint32LE(I+n|0,t,0),ct.writeUint32LE(v+i|0,t,4),ct.writeUint32LE(C+s|0,t,8),ct.writeUint32LE(A+a|0,t,12),ct.writeUint32LE(c+o|0,t,16),ct.writeUint32LE(_+u|0,t,20),ct.writeUint32LE(Y+p|0,t,24),ct.writeUint32LE(O+d|0,t,28),ct.writeUint32LE(B+b|0,t,32),ct.writeUint32LE(z+N|0,t,36),ct.writeUint32LE(W+E|0,t,40),ct.writeUint32LE(g+w|0,t,44),ct.writeUint32LE(m+L|0,t,48),ct.writeUint32LE(H+P|0,t,52),ct.writeUint32LE(V+U|0,t,56),ct.writeUint32LE(q+x|0,t,60)}function wu(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,a;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),a=s.length-e.length,s.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,a=i}for(var o=new Uint8Array(64),u=0;u<r.length;u+=64){$0(o,s,t);for(var p=u;p<u+64&&p<r.length;p++)n[p]=r[p]^o[p-u];k0(s,0,a)}return as.wipe(o),i===0&&as.wipe(s),n}fi.streamXOR=wu;function B0(t,e,r,n){return n===void 0&&(n=0),as.wipe(r),wu(t,e,r,r,n)}fi.stream=B0;function k0(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var bu={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});function j0(t,e,r){return~(t-1)&e|t-1&r}ar.select=j0;function z0(t,e){return(t|0)-(e|0)-1>>>31&1}ar.lessOrEqual=z0;function Eu(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ar.compare=Eu;function H0(t,e){return t.length===0||e.length===0?!1:Eu(t,e)!==0}ar.equal=H0;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ar,r=Et;t.DIGEST_LENGTH=16;var n=function(){function a(o){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var u=o[0]|o[1]<<8;this._r[0]=u&8191;var p=o[2]|o[3]<<8;this._r[1]=(u>>>13|p<<3)&8191;var d=o[4]|o[5]<<8;this._r[2]=(p>>>10|d<<6)&7939;var b=o[6]|o[7]<<8;this._r[3]=(d>>>7|b<<9)&8191;var N=o[8]|o[9]<<8;this._r[4]=(b>>>4|N<<12)&255,this._r[5]=N>>>1&8190;var E=o[10]|o[11]<<8;this._r[6]=(N>>>14|E<<2)&8191;var w=o[12]|o[13]<<8;this._r[7]=(E>>>11|w<<5)&8065;var L=o[14]|o[15]<<8;this._r[8]=(w>>>8|L<<8)&8191,this._r[9]=L>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return a.prototype._blocks=function(o,u,p){for(var d=this._fin?0:2048,b=this._h[0],N=this._h[1],E=this._h[2],w=this._h[3],L=this._h[4],P=this._h[5],U=this._h[6],x=this._h[7],I=this._h[8],v=this._h[9],C=this._r[0],A=this._r[1],c=this._r[2],_=this._r[3],Y=this._r[4],O=this._r[5],B=this._r[6],z=this._r[7],W=this._r[8],g=this._r[9];p>=16;){var m=o[u+0]|o[u+1]<<8;b+=m&8191;var H=o[u+2]|o[u+3]<<8;N+=(m>>>13|H<<3)&8191;var V=o[u+4]|o[u+5]<<8;E+=(H>>>10|V<<6)&8191;var q=o[u+6]|o[u+7]<<8;w+=(V>>>7|q<<9)&8191;var $=o[u+8]|o[u+9]<<8;L+=(q>>>4|$<<12)&8191,P+=$>>>1&8191;var J=o[u+10]|o[u+11]<<8;U+=($>>>14|J<<2)&8191;var X=o[u+12]|o[u+13]<<8;x+=(J>>>11|X<<5)&8191;var re=o[u+14]|o[u+15]<<8;I+=(X>>>8|re<<8)&8191,v+=re>>>5|d;var Z=0,fe=Z;fe+=b*C,fe+=N*(5*g),fe+=E*(5*W),fe+=w*(5*z),fe+=L*(5*B),Z=fe>>>13,fe&=8191,fe+=P*(5*O),fe+=U*(5*Y),fe+=x*(5*_),fe+=I*(5*c),fe+=v*(5*A),Z+=fe>>>13,fe&=8191;var oe=Z;oe+=b*A,oe+=N*C,oe+=E*(5*g),oe+=w*(5*W),oe+=L*(5*z),Z=oe>>>13,oe&=8191,oe+=P*(5*B),oe+=U*(5*O),oe+=x*(5*Y),oe+=I*(5*_),oe+=v*(5*c),Z+=oe>>>13,oe&=8191;var me=Z;me+=b*c,me+=N*A,me+=E*C,me+=w*(5*g),me+=L*(5*W),Z=me>>>13,me&=8191,me+=P*(5*z),me+=U*(5*B),me+=x*(5*O),me+=I*(5*Y),me+=v*(5*_),Z+=me>>>13,me&=8191;var j=Z;j+=b*_,j+=N*c,j+=E*A,j+=w*C,j+=L*(5*g),Z=j>>>13,j&=8191,j+=P*(5*W),j+=U*(5*z),j+=x*(5*B),j+=I*(5*O),j+=v*(5*Y),Z+=j>>>13,j&=8191;var k=Z;k+=b*Y,k+=N*_,k+=E*c,k+=w*A,k+=L*C,Z=k>>>13,k&=8191,k+=P*(5*g),k+=U*(5*W),k+=x*(5*z),k+=I*(5*B),k+=v*(5*O),Z+=k>>>13,k&=8191;var F=Z;F+=b*O,F+=N*Y,F+=E*_,F+=w*c,F+=L*A,Z=F>>>13,F&=8191,F+=P*C,F+=U*(5*g),F+=x*(5*W),F+=I*(5*z),F+=v*(5*B),Z+=F>>>13,F&=8191;var l=Z;l+=b*B,l+=N*O,l+=E*Y,l+=w*_,l+=L*c,Z=l>>>13,l&=8191,l+=P*A,l+=U*C,l+=x*(5*g),l+=I*(5*W),l+=v*(5*z),Z+=l>>>13,l&=8191;var T=Z;T+=b*z,T+=N*B,T+=E*O,T+=w*Y,T+=L*_,Z=T>>>13,T&=8191,T+=P*c,T+=U*A,T+=x*C,T+=I*(5*g),T+=v*(5*W),Z+=T>>>13,T&=8191;var ee=Z;ee+=b*W,ee+=N*z,ee+=E*B,ee+=w*O,ee+=L*Y,Z=ee>>>13,ee&=8191,ee+=P*_,ee+=U*c,ee+=x*A,ee+=I*C,ee+=v*(5*g),Z+=ee>>>13,ee&=8191;var te=Z;te+=b*g,te+=N*W,te+=E*z,te+=w*B,te+=L*O,Z=te>>>13,te&=8191,te+=P*Y,te+=U*_,te+=x*c,te+=I*A,te+=v*C,Z+=te>>>13,te&=8191,Z=(Z<<2)+Z|0,Z=Z+fe|0,fe=Z&8191,Z=Z>>>13,oe+=Z,b=fe,N=oe,E=me,w=j,L=k,P=F,U=l,x=T,I=ee,v=te,u+=16,p-=16}this._h[0]=b,this._h[1]=N,this._h[2]=E,this._h[3]=w,this._h[4]=L,this._h[5]=P,this._h[6]=U,this._h[7]=x,this._h[8]=I,this._h[9]=v},a.prototype.finish=function(o,u){u===void 0&&(u=0);var p=new Uint16Array(10),d,b,N,E;if(this._leftover){for(E=this._leftover,this._buffer[E++]=1;E<16;E++)this._buffer[E]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,E=2;E<10;E++)this._h[E]+=d,d=this._h[E]>>>13,this._h[E]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,p[0]=this._h[0]+5,d=p[0]>>>13,p[0]&=8191,E=1;E<10;E++)p[E]=this._h[E]+d,d=p[E]>>>13,p[E]&=8191;for(p[9]-=1<<13,b=(d^1)-1,E=0;E<10;E++)p[E]&=b;for(b=~b,E=0;E<10;E++)this._h[E]=this._h[E]&b|p[E];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,N=this._h[0]+this._pad[0],this._h[0]=N&65535,E=1;E<8;E++)N=(this._h[E]+this._pad[E]|0)+(N>>>16)|0,this._h[E]=N&65535;return o[u+0]=this._h[0]>>>0,o[u+1]=this._h[0]>>>8,o[u+2]=this._h[1]>>>0,o[u+3]=this._h[1]>>>8,o[u+4]=this._h[2]>>>0,o[u+5]=this._h[2]>>>8,o[u+6]=this._h[3]>>>0,o[u+7]=this._h[3]>>>8,o[u+8]=this._h[4]>>>0,o[u+9]=this._h[4]>>>8,o[u+10]=this._h[5]>>>0,o[u+11]=this._h[5]>>>8,o[u+12]=this._h[6]>>>0,o[u+13]=this._h[6]>>>8,o[u+14]=this._h[7]>>>0,o[u+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(o){var u=0,p=o.length,d;if(this._leftover){d=16-this._leftover,d>p&&(d=p);for(var b=0;b<d;b++)this._buffer[this._leftover+b]=o[u+b];if(p-=d,u+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(d=p-p%16,this._blocks(o,u,d),u+=d,p-=d),p){for(var b=0;b<p;b++)this._buffer[this._leftover+b]=o[u+b];this._leftover+=p}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},a.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();t.Poly1305=n;function i(a,o){var u=new n(a);u.update(o);var p=u.digest();return u.clean(),p}t.oneTimeAuth=i;function s(a,o){return a.length!==t.DIGEST_LENGTH||o.length!==t.DIGEST_LENGTH?!1:e.equal(a,o)}t.equal=s})(bu);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fi,r=bu,n=Et,i=ye,s=ar;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var a=new Uint8Array(16),o=function(){function u(p){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,p.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return u.prototype.seal=function(p,d,b,N){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var E=new Uint8Array(16);E.set(p,E.length-p.length);var w=new Uint8Array(32);e.stream(this._key,E,w,4);var L=d.length+this.tagLength,P;if(N){if(N.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");P=N}else P=new Uint8Array(L);return e.streamXOR(this._key,E,d,P,4),this._authenticate(P.subarray(P.length-this.tagLength,P.length),w,P.subarray(0,P.length-this.tagLength),b),n.wipe(E),P},u.prototype.open=function(p,d,b,N){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var E=new Uint8Array(16);E.set(p,E.length-p.length);var w=new Uint8Array(32);e.stream(this._key,E,w,4);var L=new Uint8Array(this.tagLength);if(this._authenticate(L,w,d.subarray(0,d.length-this.tagLength),b),!s.equal(L,d.subarray(d.length-this.tagLength,d.length)))return null;var P=d.length-this.tagLength,U;if(N){if(N.length!==P)throw new Error("ChaCha20Poly1305: incorrect destination length");U=N}else U=new Uint8Array(P);return e.streamXOR(this._key,E,d.subarray(0,d.length-this.tagLength),U,4),n.wipe(E),U},u.prototype.clean=function(){return n.wipe(this._key),this},u.prototype._authenticate=function(p,d,b,N){var E=new r.Poly1305(d);N&&(E.update(N),N.length%16>0&&E.update(a.subarray(N.length%16))),E.update(b),b.length%16>0&&E.update(a.subarray(b.length%16));var w=new Uint8Array(8);N&&i.writeUint64LE(N.length,w),E.update(w),i.writeUint64LE(b.length,w),E.update(w);for(var L=E.digest(),P=0;P<L.length;P++)p[P]=L[P];E.clean(),n.wipe(L),n.wipe(w)},u}();t.ChaCha20Poly1305=o})(Ns);var xu={},mn={},Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});function q0(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Ps.isSerializableHash=q0;Object.defineProperty(mn,"__esModule",{value:!0});var Lt=Ps,K0=ar,V0=Et,Du=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Lt.isSerializableHash(this._inner)&&Lt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),V0.wipe(n)}return t.prototype.reset=function(){if(!Lt.isSerializableHash(this._inner)||!Lt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Lt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Lt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Lt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Lt.isSerializableHash(this._inner)||!Lt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Lt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();mn.HMAC=Du;function W0(t,e,r){var n=new Du(t,e);n.update(r);var i=n.digest();return n.clean(),i}mn.hmac=W0;mn.equal=K0.equal;Object.defineProperty(xu,"__esModule",{value:!0});var ra=mn,na=Et,G0=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=ra.hmac(this._hash,n,r);this._hmac=new ra.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),na.wipe(this._buffer),na.wipe(this._counter),this._bufpos=0},t}(),Y0=xu.HKDF=G0,di={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ye,r=Et;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},o.prototype.update=function(u,p){if(p===void 0&&(p=u.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=u[d++],p--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(d=s(this._temp,this._state,u,d,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=u[d++],p--;return this},o.prototype.finish=function(u){if(!this._finished){var p=this._bytesHashed,d=this._bufferLength,b=p/536870912|0,N=p<<3,E=p%64<56?64:128;this._buffer[d]=128;for(var w=d+1;w<E-8;w++)this._buffer[w]=0;e.writeUint32BE(b,this._buffer,E-8),e.writeUint32BE(N,this._buffer,E-4),s(this._temp,this._state,this._buffer,0,E),this._finished=!0}for(var w=0;w<this.digestLength/4;w++)e.writeUint32BE(this._state[w],u,w*4);return this},o.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(u){return this._state.set(u.state),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(u){r.wipe(u.state),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},o}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(o,u,p,d,b){for(;b>=64;){for(var N=u[0],E=u[1],w=u[2],L=u[3],P=u[4],U=u[5],x=u[6],I=u[7],v=0;v<16;v++){var C=d+v*4;o[v]=e.readUint32BE(p,C)}for(var v=16;v<64;v++){var A=o[v-2],c=(A>>>17|A<<32-17)^(A>>>19|A<<32-19)^A>>>10;A=o[v-15];var _=(A>>>7|A<<32-7)^(A>>>18|A<<32-18)^A>>>3;o[v]=(c+o[v-7]|0)+(_+o[v-16]|0)}for(var v=0;v<64;v++){var c=(((P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7))+(P&U^~P&x)|0)+(I+(i[v]+o[v]|0)|0)|0,_=((N>>>2|N<<32-2)^(N>>>13|N<<32-13)^(N>>>22|N<<32-22))+(N&E^N&w^E&w)|0;I=x,x=U,U=P,P=L+c|0,L=w,w=E,E=N,N=c+_|0}u[0]+=N,u[1]+=E,u[2]+=w,u[3]+=L,u[4]+=P,u[5]+=U,u[6]+=x,u[7]+=I,d+=64,b-=64}return d}function a(o){var u=new n;u.update(o);var p=u.digest();return u.clean(),p}t.hash=a})(di);var Rs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Br,r=Et;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(v){const C=new Float64Array(16);if(v)for(let A=0;A<v.length;A++)C[A]=v[A];return C}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function a(v){let C=1;for(let A=0;A<16;A++){let c=v[A]+C+65535;C=Math.floor(c/65536),v[A]=c-C*65536}v[0]+=C-1+37*(C-1)}function o(v,C,A){const c=~(A-1);for(let _=0;_<16;_++){const Y=c&(v[_]^C[_]);v[_]^=Y,C[_]^=Y}}function u(v,C){const A=n(),c=n();for(let _=0;_<16;_++)c[_]=C[_];a(c),a(c),a(c);for(let _=0;_<2;_++){A[0]=c[0]-65517;for(let O=1;O<15;O++)A[O]=c[O]-65535-(A[O-1]>>16&1),A[O-1]&=65535;A[15]=c[15]-32767-(A[14]>>16&1);const Y=A[15]>>16&1;A[14]&=65535,o(c,A,1-Y)}for(let _=0;_<16;_++)v[2*_]=c[_]&255,v[2*_+1]=c[_]>>8}function p(v,C){for(let A=0;A<16;A++)v[A]=C[2*A]+(C[2*A+1]<<8);v[15]&=32767}function d(v,C,A){for(let c=0;c<16;c++)v[c]=C[c]+A[c]}function b(v,C,A){for(let c=0;c<16;c++)v[c]=C[c]-A[c]}function N(v,C,A){let c,_,Y=0,O=0,B=0,z=0,W=0,g=0,m=0,H=0,V=0,q=0,$=0,J=0,X=0,re=0,Z=0,fe=0,oe=0,me=0,j=0,k=0,F=0,l=0,T=0,ee=0,te=0,we=0,xe=0,y=0,h=0,f=0,S=0,R=A[0],K=A[1],G=A[2],ne=A[3],ae=A[4],le=A[5],he=A[6],ce=A[7],_e=A[8],be=A[9],ge=A[10],De=A[11],Se=A[12],Ie=A[13],Ae=A[14],Ce=A[15];c=C[0],Y+=c*R,O+=c*K,B+=c*G,z+=c*ne,W+=c*ae,g+=c*le,m+=c*he,H+=c*ce,V+=c*_e,q+=c*be,$+=c*ge,J+=c*De,X+=c*Se,re+=c*Ie,Z+=c*Ae,fe+=c*Ce,c=C[1],O+=c*R,B+=c*K,z+=c*G,W+=c*ne,g+=c*ae,m+=c*le,H+=c*he,V+=c*ce,q+=c*_e,$+=c*be,J+=c*ge,X+=c*De,re+=c*Se,Z+=c*Ie,fe+=c*Ae,oe+=c*Ce,c=C[2],B+=c*R,z+=c*K,W+=c*G,g+=c*ne,m+=c*ae,H+=c*le,V+=c*he,q+=c*ce,$+=c*_e,J+=c*be,X+=c*ge,re+=c*De,Z+=c*Se,fe+=c*Ie,oe+=c*Ae,me+=c*Ce,c=C[3],z+=c*R,W+=c*K,g+=c*G,m+=c*ne,H+=c*ae,V+=c*le,q+=c*he,$+=c*ce,J+=c*_e,X+=c*be,re+=c*ge,Z+=c*De,fe+=c*Se,oe+=c*Ie,me+=c*Ae,j+=c*Ce,c=C[4],W+=c*R,g+=c*K,m+=c*G,H+=c*ne,V+=c*ae,q+=c*le,$+=c*he,J+=c*ce,X+=c*_e,re+=c*be,Z+=c*ge,fe+=c*De,oe+=c*Se,me+=c*Ie,j+=c*Ae,k+=c*Ce,c=C[5],g+=c*R,m+=c*K,H+=c*G,V+=c*ne,q+=c*ae,$+=c*le,J+=c*he,X+=c*ce,re+=c*_e,Z+=c*be,fe+=c*ge,oe+=c*De,me+=c*Se,j+=c*Ie,k+=c*Ae,F+=c*Ce,c=C[6],m+=c*R,H+=c*K,V+=c*G,q+=c*ne,$+=c*ae,J+=c*le,X+=c*he,re+=c*ce,Z+=c*_e,fe+=c*be,oe+=c*ge,me+=c*De,j+=c*Se,k+=c*Ie,F+=c*Ae,l+=c*Ce,c=C[7],H+=c*R,V+=c*K,q+=c*G,$+=c*ne,J+=c*ae,X+=c*le,re+=c*he,Z+=c*ce,fe+=c*_e,oe+=c*be,me+=c*ge,j+=c*De,k+=c*Se,F+=c*Ie,l+=c*Ae,T+=c*Ce,c=C[8],V+=c*R,q+=c*K,$+=c*G,J+=c*ne,X+=c*ae,re+=c*le,Z+=c*he,fe+=c*ce,oe+=c*_e,me+=c*be,j+=c*ge,k+=c*De,F+=c*Se,l+=c*Ie,T+=c*Ae,ee+=c*Ce,c=C[9],q+=c*R,$+=c*K,J+=c*G,X+=c*ne,re+=c*ae,Z+=c*le,fe+=c*he,oe+=c*ce,me+=c*_e,j+=c*be,k+=c*ge,F+=c*De,l+=c*Se,T+=c*Ie,ee+=c*Ae,te+=c*Ce,c=C[10],$+=c*R,J+=c*K,X+=c*G,re+=c*ne,Z+=c*ae,fe+=c*le,oe+=c*he,me+=c*ce,j+=c*_e,k+=c*be,F+=c*ge,l+=c*De,T+=c*Se,ee+=c*Ie,te+=c*Ae,we+=c*Ce,c=C[11],J+=c*R,X+=c*K,re+=c*G,Z+=c*ne,fe+=c*ae,oe+=c*le,me+=c*he,j+=c*ce,k+=c*_e,F+=c*be,l+=c*ge,T+=c*De,ee+=c*Se,te+=c*Ie,we+=c*Ae,xe+=c*Ce,c=C[12],X+=c*R,re+=c*K,Z+=c*G,fe+=c*ne,oe+=c*ae,me+=c*le,j+=c*he,k+=c*ce,F+=c*_e,l+=c*be,T+=c*ge,ee+=c*De,te+=c*Se,we+=c*Ie,xe+=c*Ae,y+=c*Ce,c=C[13],re+=c*R,Z+=c*K,fe+=c*G,oe+=c*ne,me+=c*ae,j+=c*le,k+=c*he,F+=c*ce,l+=c*_e,T+=c*be,ee+=c*ge,te+=c*De,we+=c*Se,xe+=c*Ie,y+=c*Ae,h+=c*Ce,c=C[14],Z+=c*R,fe+=c*K,oe+=c*G,me+=c*ne,j+=c*ae,k+=c*le,F+=c*he,l+=c*ce,T+=c*_e,ee+=c*be,te+=c*ge,we+=c*De,xe+=c*Se,y+=c*Ie,h+=c*Ae,f+=c*Ce,c=C[15],fe+=c*R,oe+=c*K,me+=c*G,j+=c*ne,k+=c*ae,F+=c*le,l+=c*he,T+=c*ce,ee+=c*_e,te+=c*be,we+=c*ge,xe+=c*De,y+=c*Se,h+=c*Ie,f+=c*Ae,S+=c*Ce,Y+=38*oe,O+=38*me,B+=38*j,z+=38*k,W+=38*F,g+=38*l,m+=38*T,H+=38*ee,V+=38*te,q+=38*we,$+=38*xe,J+=38*y,X+=38*h,re+=38*f,Z+=38*S,_=1,c=Y+_+65535,_=Math.floor(c/65536),Y=c-_*65536,c=O+_+65535,_=Math.floor(c/65536),O=c-_*65536,c=B+_+65535,_=Math.floor(c/65536),B=c-_*65536,c=z+_+65535,_=Math.floor(c/65536),z=c-_*65536,c=W+_+65535,_=Math.floor(c/65536),W=c-_*65536,c=g+_+65535,_=Math.floor(c/65536),g=c-_*65536,c=m+_+65535,_=Math.floor(c/65536),m=c-_*65536,c=H+_+65535,_=Math.floor(c/65536),H=c-_*65536,c=V+_+65535,_=Math.floor(c/65536),V=c-_*65536,c=q+_+65535,_=Math.floor(c/65536),q=c-_*65536,c=$+_+65535,_=Math.floor(c/65536),$=c-_*65536,c=J+_+65535,_=Math.floor(c/65536),J=c-_*65536,c=X+_+65535,_=Math.floor(c/65536),X=c-_*65536,c=re+_+65535,_=Math.floor(c/65536),re=c-_*65536,c=Z+_+65535,_=Math.floor(c/65536),Z=c-_*65536,c=fe+_+65535,_=Math.floor(c/65536),fe=c-_*65536,Y+=_-1+37*(_-1),_=1,c=Y+_+65535,_=Math.floor(c/65536),Y=c-_*65536,c=O+_+65535,_=Math.floor(c/65536),O=c-_*65536,c=B+_+65535,_=Math.floor(c/65536),B=c-_*65536,c=z+_+65535,_=Math.floor(c/65536),z=c-_*65536,c=W+_+65535,_=Math.floor(c/65536),W=c-_*65536,c=g+_+65535,_=Math.floor(c/65536),g=c-_*65536,c=m+_+65535,_=Math.floor(c/65536),m=c-_*65536,c=H+_+65535,_=Math.floor(c/65536),H=c-_*65536,c=V+_+65535,_=Math.floor(c/65536),V=c-_*65536,c=q+_+65535,_=Math.floor(c/65536),q=c-_*65536,c=$+_+65535,_=Math.floor(c/65536),$=c-_*65536,c=J+_+65535,_=Math.floor(c/65536),J=c-_*65536,c=X+_+65535,_=Math.floor(c/65536),X=c-_*65536,c=re+_+65535,_=Math.floor(c/65536),re=c-_*65536,c=Z+_+65535,_=Math.floor(c/65536),Z=c-_*65536,c=fe+_+65535,_=Math.floor(c/65536),fe=c-_*65536,Y+=_-1+37*(_-1),v[0]=Y,v[1]=O,v[2]=B,v[3]=z,v[4]=W,v[5]=g,v[6]=m,v[7]=H,v[8]=V,v[9]=q,v[10]=$,v[11]=J,v[12]=X,v[13]=re,v[14]=Z,v[15]=fe}function E(v,C){N(v,C,C)}function w(v,C){const A=n();for(let c=0;c<16;c++)A[c]=C[c];for(let c=253;c>=0;c--)E(A,A),c!==2&&c!==4&&N(A,A,C);for(let c=0;c<16;c++)v[c]=A[c]}function L(v,C){const A=new Uint8Array(32),c=new Float64Array(80),_=n(),Y=n(),O=n(),B=n(),z=n(),W=n();for(let V=0;V<31;V++)A[V]=v[V];A[31]=v[31]&127|64,A[0]&=248,p(c,C);for(let V=0;V<16;V++)Y[V]=c[V];_[0]=B[0]=1;for(let V=254;V>=0;--V){const q=A[V>>>3]>>>(V&7)&1;o(_,Y,q),o(O,B,q),d(z,_,O),b(_,_,O),d(O,Y,B),b(Y,Y,B),E(B,z),E(W,_),N(_,O,_),N(O,Y,z),d(z,_,O),b(_,_,O),E(Y,_),b(O,B,W),N(_,O,s),d(_,_,B),N(O,O,_),N(_,B,W),N(B,Y,c),E(Y,z),o(_,Y,q),o(O,B,q)}for(let V=0;V<16;V++)c[V+16]=_[V],c[V+32]=O[V],c[V+48]=Y[V],c[V+64]=B[V];const g=c.subarray(32),m=c.subarray(16);w(g,g),N(m,m,g);const H=new Uint8Array(32);return u(H,m),H}t.scalarMult=L;function P(v){return L(v,i)}t.scalarMultBase=P;function U(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(v);return{publicKey:P(C),secretKey:C}}t.generateKeyPairFromSeed=U;function x(v){const C=(0,e.randomBytes)(32,v),A=U(C);return(0,r.wipe)(C),A}t.generateKeyPair=x;function I(v,C,A=!1){if(v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=L(v,C);if(A){let _=0;for(let Y=0;Y<c.length;Y++)_|=c[Y];if(_===0)throw new Error("X25519: invalid shared key")}return c}t.sharedKey=I})(Rs);var ia=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},J0=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),X0=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Q0=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Z0=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),eg=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),tg=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,rg=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sa=3,ng=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",tg]],oa=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ig(t){return t?aa(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new eg:typeof navigator<"u"?aa(navigator.userAgent):ag()}function sg(t){return t!==""&&ng.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function aa(t){var e=sg(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Z0;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<sa&&(i=ia(ia([],i,!0),cg(sa-i.length),!0)):i=[];var s=i.join("."),a=og(t),o=rg.exec(t);return o&&o[1]?new Q0(r,s,a,o[1]):new J0(r,s,a)}function og(t){for(var e=0,r=oa.length;e<r;e++){var n=oa[e],i=n[0],s=n[1],a=s.exec(t);if(a)return i}return null}function ag(){var t=typeof process<"u"&&process.version;return t?new X0(process.version.slice(1)):null}function cg(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=Cu=Ne.getLocation=Ne.getLocationOrThrow=Ls=Ne.getNavigator=Ne.getNavigatorOrThrow=Su=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0;function wr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ne.getFromWindow=wr;function kr(t){const e=wr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ne.getFromWindowOrThrow=kr;function ug(){return kr("document")}Ne.getDocumentOrThrow=ug;function lg(){return wr("document")}var Su=Ne.getDocument=lg;function hg(){return kr("navigator")}Ne.getNavigatorOrThrow=hg;function fg(){return wr("navigator")}var Ls=Ne.getNavigator=fg;function dg(){return kr("location")}Ne.getLocationOrThrow=dg;function pg(){return wr("location")}var Cu=Ne.getLocation=pg;function gg(){return kr("crypto")}Ne.getCryptoOrThrow=gg;function _g(){return wr("crypto")}Ne.getCrypto=_g;function yg(){return kr("localStorage")}Ne.getLocalStorageOrThrow=yg;function vg(){return wr("localStorage")}Ne.getLocalStorage=vg;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});var Iu=Fs.getWindowMetadata=void 0;const ca=Ne;function mg(){let t,e;try{t=ca.getDocumentOrThrow(),e=ca.getLocationOrThrow()}catch{return null}function r(){const b=t.getElementsByTagName("link"),N=[];for(let E=0;E<b.length;E++){const w=b[E],L=w.getAttribute("rel");if(L&&L.toLowerCase().indexOf("icon")>-1){const P=w.getAttribute("href");if(P)if(P.toLowerCase().indexOf("https:")===-1&&P.toLowerCase().indexOf("http:")===-1&&P.indexOf("//")!==0){let U=e.protocol+"//"+e.host;if(P.indexOf("/")===0)U+=P;else{const x=e.pathname.split("/");x.pop();const I=x.join("/");U+=I+"/"+P}N.push(U)}else if(P.indexOf("//")===0){const U=e.protocol+P;N.push(U)}else N.push(P)}}return N}function n(...b){const N=t.getElementsByTagName("meta");for(let E=0;E<N.length;E++){const w=N[E],L=["itemprop","property","name"].map(P=>w.getAttribute(P)).filter(P=>P?b.includes(P):!1);if(L.length&&L){const P=w.getAttribute("content");if(P)return P}}return""}function i(){let b=n("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function s(){return n("description","og:description","twitter:description","keywords")}const a=i(),o=s(),u=e.origin,p=r();return{description:o,url:u,icons:p,name:a}}Iu=Fs.getWindowMetadata=mg;var hn={},wg=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Au="%[a-f0-9]{2}",ua=new RegExp("("+Au+")|([^%]+?)","gi"),la=new RegExp("("+Au+")+","gi");function cs(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],cs(r),cs(n))}function bg(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(ua)||[],r=1;r<e.length;r++)t=cs(e,r).join(""),e=t.match(ua)||[];return t}}function Eg(t){for(var e={"%FE%FF":"","%FF%FE":""},r=la.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=bg(r[0]);n!==r[0]&&(e[r[0]]=n)}r=la.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var a=i[s];t=t.replace(new RegExp(a,"g"),e[a])}return t}var xg=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Eg(t)}},Dg=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Sg=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var a=n[s],o=t[a];(i?e.indexOf(a)!==-1:e(a,o,t))&&(r[a]=o)}return r};(function(t){const e=wg,r=xg,n=Dg,i=Sg,s=x=>x==null,a=Symbol("encodeFragmentIdentifier");function o(x){switch(x.arrayFormat){case"index":return I=>(v,C)=>{const A=v.length;return C===void 0||x.skipNull&&C===null||x.skipEmptyString&&C===""?v:C===null?[...v,[d(I,x),"[",A,"]"].join("")]:[...v,[d(I,x),"[",d(A,x),"]=",d(C,x)].join("")]};case"bracket":return I=>(v,C)=>C===void 0||x.skipNull&&C===null||x.skipEmptyString&&C===""?v:C===null?[...v,[d(I,x),"[]"].join("")]:[...v,[d(I,x),"[]=",d(C,x)].join("")];case"colon-list-separator":return I=>(v,C)=>C===void 0||x.skipNull&&C===null||x.skipEmptyString&&C===""?v:C===null?[...v,[d(I,x),":list="].join("")]:[...v,[d(I,x),":list=",d(C,x)].join("")];case"comma":case"separator":case"bracket-separator":{const I=x.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(C,A)=>A===void 0||x.skipNull&&A===null||x.skipEmptyString&&A===""?C:(A=A===null?"":A,C.length===0?[[d(v,x),I,d(A,x)].join("")]:[[C,d(A,x)].join(x.arrayFormatSeparator)])}default:return I=>(v,C)=>C===void 0||x.skipNull&&C===null||x.skipEmptyString&&C===""?v:C===null?[...v,d(I,x)]:[...v,[d(I,x),"=",d(C,x)].join("")]}}function u(x){let I;switch(x.arrayFormat){case"index":return(v,C,A)=>{if(I=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!I){A[v]=C;return}A[v]===void 0&&(A[v]={}),A[v][I[1]]=C};case"bracket":return(v,C,A)=>{if(I=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!I){A[v]=C;return}if(A[v]===void 0){A[v]=[C];return}A[v]=[].concat(A[v],C)};case"colon-list-separator":return(v,C,A)=>{if(I=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!I){A[v]=C;return}if(A[v]===void 0){A[v]=[C];return}A[v]=[].concat(A[v],C)};case"comma":case"separator":return(v,C,A)=>{const c=typeof C=="string"&&C.includes(x.arrayFormatSeparator),_=typeof C=="string"&&!c&&b(C,x).includes(x.arrayFormatSeparator);C=_?b(C,x):C;const Y=c||_?C.split(x.arrayFormatSeparator).map(O=>b(O,x)):C===null?C:b(C,x);A[v]=Y};case"bracket-separator":return(v,C,A)=>{const c=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!c){A[v]=C&&b(C,x);return}const _=C===null?[]:C.split(x.arrayFormatSeparator).map(Y=>b(Y,x));if(A[v]===void 0){A[v]=_;return}A[v]=[].concat(A[v],_)};default:return(v,C,A)=>{if(A[v]===void 0){A[v]=C;return}A[v]=[].concat(A[v],C)}}}function p(x){if(typeof x!="string"||x.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(x,I){return I.encode?I.strict?e(x):encodeURIComponent(x):x}function b(x,I){return I.decode?r(x):x}function N(x){return Array.isArray(x)?x.sort():typeof x=="object"?N(Object.keys(x)).sort((I,v)=>Number(I)-Number(v)).map(I=>x[I]):x}function E(x){const I=x.indexOf("#");return I!==-1&&(x=x.slice(0,I)),x}function w(x){let I="";const v=x.indexOf("#");return v!==-1&&(I=x.slice(v)),I}function L(x){x=E(x);const I=x.indexOf("?");return I===-1?"":x.slice(I+1)}function P(x,I){return I.parseNumbers&&!Number.isNaN(Number(x))&&typeof x=="string"&&x.trim()!==""?x=Number(x):I.parseBooleans&&x!==null&&(x.toLowerCase()==="true"||x.toLowerCase()==="false")&&(x=x.toLowerCase()==="true"),x}function U(x,I){I=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},I),p(I.arrayFormatSeparator);const v=u(I),C=Object.create(null);if(typeof x!="string"||(x=x.trim().replace(/^[?#&]/,""),!x))return C;for(const A of x.split("&")){if(A==="")continue;let[c,_]=n(I.decode?A.replace(/\+/g," "):A,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(I.arrayFormat)?_:b(_,I),v(b(c,I),_,C)}for(const A of Object.keys(C)){const c=C[A];if(typeof c=="object"&&c!==null)for(const _ of Object.keys(c))c[_]=P(c[_],I);else C[A]=P(c,I)}return I.sort===!1?C:(I.sort===!0?Object.keys(C).sort():Object.keys(C).sort(I.sort)).reduce((A,c)=>{const _=C[c];return Boolean(_)&&typeof _=="object"&&!Array.isArray(_)?A[c]=N(_):A[c]=_,A},Object.create(null))}t.extract=L,t.parse=U,t.stringify=(x,I)=>{if(!x)return"";I=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},I),p(I.arrayFormatSeparator);const v=_=>I.skipNull&&s(x[_])||I.skipEmptyString&&x[_]==="",C=o(I),A={};for(const _ of Object.keys(x))v(_)||(A[_]=x[_]);const c=Object.keys(A);return I.sort!==!1&&c.sort(I.sort),c.map(_=>{const Y=x[_];return Y===void 0?"":Y===null?d(_,I):Array.isArray(Y)?Y.length===0&&I.arrayFormat==="bracket-separator"?d(_,I)+"[]":Y.reduce(C(_),[]).join("&"):d(_,I)+"="+d(Y,I)}).filter(_=>_.length>0).join("&")},t.parseUrl=(x,I)=>{I=Object.assign({decode:!0},I);const[v,C]=n(x,"#");return Object.assign({url:v.split("?")[0]||"",query:U(L(x),I)},I&&I.parseFragmentIdentifier&&C?{fragmentIdentifier:b(C,I)}:{})},t.stringifyUrl=(x,I)=>{I=Object.assign({encode:!0,strict:!0,[a]:!0},I);const v=E(x.url).split("?")[0]||"",C=t.extract(x.url),A=t.parse(C,{sort:!1}),c=Object.assign(A,x.query);let _=t.stringify(c,I);_&&(_=`?${_}`);let Y=w(x.url);return x.fragmentIdentifier&&(Y=`#${I[a]?d(x.fragmentIdentifier,I):x.fragmentIdentifier}`),`${v}${_}${Y}`},t.pick=(x,I,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[a]:!1},v);const{url:C,query:A,fragmentIdentifier:c}=t.parseUrl(x,v);return t.stringifyUrl({url:C,query:i(A,I),fragmentIdentifier:c},v)},t.exclude=(x,I,v)=>{const C=Array.isArray(I)?A=>!I.includes(A):(A,c)=>!I(A,c);return t.pick(x,C,v)}})(hn);const Cg={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}},Tu="base10",_t="base16",us="base64pad",Ms="utf8",Ou=0,br=1,Ig=0,ha=1,ls=12,Us=32;function Ag(){const t=Rs.generateKeyPair();return{privateKey:vt(t.secretKey,_t),publicKey:vt(t.publicKey,_t)}}function hs(){const t=Br.randomBytes(Us);return vt(t,_t)}function Tg(t,e){const r=Rs.sharedKey(pt(t,_t),pt(e,_t)),n=new Y0(di.SHA256,r).expand(Us);return vt(n,_t)}function Og(t){const e=di.hash(pt(t,_t));return vt(e,_t)}function fs(t){const e=di.hash(pt(t,Ms));return vt(e,_t)}function Ng(t){return pt(`${t}`,Tu)}function wn(t){return Number(vt(t,Tu))}function Pg(t){const e=Ng(typeof t.type<"u"?t.type:Ou);if(wn(e)===br&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?pt(t.senderPublicKey,_t):void 0,n=typeof t.iv<"u"?pt(t.iv,_t):Br.randomBytes(ls),i=new Ns.ChaCha20Poly1305(pt(t.symKey,_t)).seal(n,pt(t.message,Ms));return Lg({type:e,sealed:i,iv:n,senderPublicKey:r})}function Rg(t){const e=new Ns.ChaCha20Poly1305(pt(t.symKey,_t)),{sealed:r,iv:n}=$s(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return vt(i,Ms)}function Lg(t){if(wn(t.type)===br){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return vt(os([t.type,t.senderPublicKey,t.iv,t.sealed]),us)}return vt(os([t.type,t.iv,t.sealed]),us)}function $s(t){const e=pt(t,us),r=e.slice(Ig,ha),n=ha;if(wn(r)===br){const o=n+Us,u=o+ls,p=e.slice(n,o),d=e.slice(o,u),b=e.slice(u);return{type:r,sealed:b,iv:d,senderPublicKey:p}}const i=n+ls,s=e.slice(n,i),a=e.slice(i);return{type:r,sealed:a,iv:s}}function Fg(t,e){const r=$s(t);return Nu({type:wn(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?vt(r.senderPublicKey,_t):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Nu(t){const e=(t==null?void 0:t.type)||Ou;if(e===br){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function fa(t){return t.type===br&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Mg=Object.defineProperty,da=Object.getOwnPropertySymbols,Ug=Object.prototype.hasOwnProperty,$g=Object.prototype.propertyIsEnumerable,pa=(t,e,r)=>e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ga=(t,e)=>{for(var r in e||(e={}))Ug.call(e,r)&&pa(t,r,e[r]);if(da)for(var r of da(e))$g.call(e,r)&&pa(t,r,e[r]);return t};const Bg="ReactNative",en={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},kg="js";function Pu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function jg(){return!Su()&&!!Ls()&&navigator.product===Bg}function zg(){return!Pu()&&!!Ls()}function Hg(){return jg()?en.reactNative:Pu()?en.node:zg()?en.browser:en.unknown}function qg(t,e){let r=hn.parse(t);return r=ga(ga({},r),e),t=hn.stringify(r),t}function Kg(){return Iu()||{name:"",description:"",url:"",icons:[""]}}function Vg(){const t=ig();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Wg(){var t;const e=Hg();return e===en.browser?[e,((t=Cu())==null?void 0:t.host)||"unknown"].join(":"):e}function Gg(t,e,r){const n=Vg(),i=Wg();return[[t,e].join("-"),[kg,r].join("-"),n,i].join("/")}function Yg({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s}){const a=r.split("?"),o=Gg(t,e,n),u={auth:i,ua:o,projectId:s},p=qg(a[1]||"",u);return a[0]+"?"+p}function rr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Ru(t){return Object.fromEntries(t.entries())}function Lu(t){return new Map(Object.entries(t))}function Ut(t,e){return de.fromMiliseconds((e||Date.now())+de.toMiliseconds(t))}function tr(t){return de.fromMiliseconds(Date.now())>=de.toMiliseconds(t)}function vr(t){const e=de.toMiliseconds(t||de.FIVE_MINUTES);let r,n,i;return{resolve:s=>{i&&r&&(clearTimeout(i),r(s))},reject:s=>{i&&n&&(clearTimeout(i),n(s))},done:()=>new Promise((s,a)=>{i=setTimeout(a,e),r=s,n=a})}}function Fu(t,e){return new Promise(async(r,n)=>{const i=setTimeout(()=>n(),e),s=await t;clearTimeout(i),r(s)})}function Mu(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Jg(t){return Mu("topic",t)}function Xg(t){return Mu("id",t)}function Uu(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function ke(t,e){return`${t}${e?`:${e}`:""}`}const Qg="irn";function ds(t){return(t==null?void 0:t.relay)||{protocol:Qg}}function ps(t){const e=Cg[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Zg=Object.defineProperty,_a=Object.getOwnPropertySymbols,e1=Object.prototype.hasOwnProperty,t1=Object.prototype.propertyIsEnumerable,ya=(t,e,r)=>e in t?Zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,r1=(t,e)=>{for(var r in e||(e={}))e1.call(e,r)&&ya(t,r,e[r]);if(_a)for(var r of _a(e))t1.call(e,r)&&ya(t,r,e[r]);return t};function n1(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),a=t[i];r[s]=a}}),r}function i1(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",a=hn.parse(s);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:a.symKey,relay:n1(a)}}function s1(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function o1(t){return`${t.protocol}:${t.topic}@${t.version}?`+hn.stringify(r1({symKey:t.symKey},s1(t.relay)))}function bn(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function a1(t){const e=[];return Object.values(t).forEach(r=>{e.push(...bn(r.accounts))}),e}function c1(t,e){const r=[];return Object.values(t).forEach(n=>{bn(n.accounts).includes(e)&&r.push(...n.methods)}),r}function u1(t,e){const r=[];return Object.values(t).forEach(n=>{bn(n.accounts).includes(e)&&r.push(...n.events)}),r}function l1(t,e){const r=zn(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(a=>`${a.split(":")[0]}:${a.split(":")[1]}`)};return n}const h1={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},f1={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ie(t,e){const{message:r,code:n}=f1[t];return{message:e?`${r} ${e}`:r,code:n}}function We(t,e){const{message:r,code:n}=h1[t];return{message:e?`${r} ${e}`:r,code:n}}function En(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Yn(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function At(t){return typeof t>"u"}function nt(t,e){return e&&At(t)?!0:typeof t=="string"&&Boolean(t.trim().length)}function Bs(t,e){return e&&At(t)?!0:typeof t=="number"&&!isNaN(t)}function d1(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return rr(i,n)?(n.forEach(a=>{const{accounts:o,methods:u,events:p}=t.namespaces[a],d=bn(o),b=r[a];(!rr(b.chains,d)||!rr(b.methods,u)||!rr(b.events,p))&&(s=!1)}),s):!1}function ks(t){return nt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function p1(t){if(nt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&ks(r)}}return!1}function g1(t){if(nt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function _1(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function y1(t){return t==null?void 0:t.topic}function v1(t,e){let r=null;return nt(t==null?void 0:t.publicKey,!1)||(r=ie("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function va(t){let e=!0;return En(t)?t.length&&(e=t.every(r=>nt(r,!1))):e=!1,e}function m1(t,e,r){let n=null;return En(e)?e.forEach(i=>{n||(!ks(i)||!i.includes(t))&&(n=We("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=We("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}function w1(t,e){let r=null;return Object.entries(t).forEach(([n,i])=>{if(r)return;const s=m1(n,i==null?void 0:i.chains,`${e} requiredNamespace`);s&&(r=s)}),r}function b1(t,e){let r=null;return En(t)?t.forEach(n=>{r||p1(n)||(r=We("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=We("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function E1(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=b1(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function x1(t,e){let r=null;return va(t==null?void 0:t.methods)?va(t==null?void 0:t.events)||(r=We("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=We("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function $u(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=x1(n,`${e}, namespace`);i&&(r=i)}),r}function D1(t,e){let r=null;if(t&&Yn(t)){const n=$u(t,e);n&&(r=n);const i=w1(t,e);i&&(r=i)}else r=ie("MISSING_OR_INVALID",`${e}, requiredNamespaces should be an object with data`);return r}function zn(t,e){let r=null;if(t&&Yn(t)){const n=$u(t,e);n&&(r=n);const i=E1(t,e);i&&(r=i)}else r=ie("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Bu(t){return nt(t.protocol,!0)}function S1(t,e){let r=!1;return e&&!t?r=!0:t&&En(t)&&t.length&&t.forEach(n=>{r=Bu(n)}),r}function C1(t){return typeof t=="number"}function dt(t){return typeof t<"u"&&typeof t!==null}function I1(t){return!(!t||typeof t!="object"||!t.code||!Bs(t.code,!1)||!t.message||!nt(t.message,!1))}function A1(t){return!(At(t)||!nt(t.method,!1))}function T1(t){return!(At(t)||At(t.result)&&At(t.error)||!Bs(t.id,!1)||!nt(t.jsonrpc,!1))}function O1(t){return!(At(t)||!nt(t.name,!1))}function ma(t,e){return!(!ks(e)||!a1(t).includes(e))}function N1(t,e,r){return nt(r,!1)?c1(t,e).includes(r):!1}function P1(t,e,r){return nt(r,!1)?u1(t,e).includes(r):!1}function wa(t,e,r){let n=null;const i=Object.keys(t),s=Object.keys(e);return rr(i,s)?i.forEach(a=>{if(n)return;const o=t[a].chains,u=bn(e[a].accounts);rr(o,u)?rr(t[a].methods,e[a].methods)?rr(t[a].events,e[a].events)||(n=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy requiredNamespaces events for ${a}`)):n=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy requiredNamespaces methods for ${a}`):n=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy requiredNamespaces chains for ${a}`)}):n=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces`),n}function R1(t,e){return Bs(t,!1)&&t<=e.max&&t>=e.min}const L1="PARSE_ERROR",F1="INVALID_REQUEST",M1="METHOD_NOT_FOUND",U1="INVALID_PARAMS",ku="INTERNAL_ERROR",js="SERVER_ERROR",$1=[-32700,-32600,-32601,-32602,-32603],rn={[L1]:{code:-32700,message:"Parse error"},[F1]:{code:-32600,message:"Invalid Request"},[M1]:{code:-32601,message:"Method not found"},[U1]:{code:-32602,message:"Invalid params"},[ku]:{code:-32603,message:"Internal error"},[js]:{code:-32e3,message:"Server error"}},ju=js;function B1(t){return $1.includes(t)}function ba(t){return Object.keys(rn).includes(t)?rn[t]:rn[ju]}function k1(t){const e=Object.values(rn).find(r=>r.code===t);return e||rn[ju]}function zu(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Hu={},qt={},Ea;function j1(){if(Ea)return qt;Ea=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.isBrowserCryptoAvailable=qt.getSubtleCrypto=qt.getBrowerCrypto=void 0;function t(){return(lt===null||lt===void 0?void 0:lt.crypto)||(lt===null||lt===void 0?void 0:lt.msCrypto)||{}}qt.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}qt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return qt.isBrowserCryptoAvailable=r,qt}var Kt={},xa;function z1(){if(xa)return Kt;xa=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.isBrowser=Kt.isNode=Kt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Kt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Kt.isNode=e;function r(){return!t()&&!e()}return Kt.isBrowser=r,Kt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yt;e.__exportStar(j1(),t),e.__exportStar(z1(),t)})(Hu);function H1(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function pi(t,e,r){return{id:r||H1(),jsonrpc:"2.0",method:t,params:e}}function zs(t,e){return{id:t,jsonrpc:"2.0",result:e}}function gi(t,e,r){return{id:t,jsonrpc:"2.0",error:q1(e,r)}}function q1(t,e){return typeof t>"u"?ba(ku):(typeof t=="string"&&(t=Object.assign(Object.assign({},ba(js)),{message:t})),typeof e<"u"&&(t.data=e),B1(t.code)&&(t=k1(t.code)),t)}class K1{}class V1 extends K1{constructor(){super()}}class W1 extends V1{constructor(e){super()}}const G1="^https?:",Y1="^wss?:";function J1(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function qu(t,e){const r=J1(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Da(t){return qu(t,G1)}function Sa(t){return qu(t,Y1)}function X1(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Ku(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Hs(t){return Ku(t)&&"method"in t}function qs(t){return Ku(t)&&(Wt(t)||Nt(t))}function Wt(t){return"result"in t}function Nt(t){return"error"in t}class xn extends W1{constructor(e){super(e),this.events=new it.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(pi(e.method,e.params||[]),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Nt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),qs(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const Ca=10,Q1=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),Z1=()=>typeof window<"u",e_=Q1();class t_{constructor(e){if(this.url=e,this.events=new it.EventEmitter,this.registering=!1,!Sa(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=()=>{this.onClose(),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ln(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Sa(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Hu.isReactNative()?void 0:{rejectUnauthorized:!X1(e)},s=new e_(e,[],i);Z1()?s.onerror=a=>{const o=a;n(this.emitError(o.error))}:s.on("error",a=>{n(this.emitError(a))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=()=>this.onClose(),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ts(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=gi(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return zu(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ca&&this.events.setMaxListeners(Ca)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Jn={},r_={get exports(){return Jn},set exports(t){Jn=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",u="[object Array]",p="[object AsyncFunction]",d="[object Boolean]",b="[object Date]",N="[object Error]",E="[object Function]",w="[object GeneratorFunction]",L="[object Map]",P="[object Number]",U="[object Null]",x="[object Object]",I="[object Promise]",v="[object Proxy]",C="[object RegExp]",A="[object Set]",c="[object String]",_="[object Symbol]",Y="[object Undefined]",O="[object WeakMap]",B="[object ArrayBuffer]",z="[object DataView]",W="[object Float32Array]",g="[object Float64Array]",m="[object Int8Array]",H="[object Int16Array]",V="[object Int32Array]",q="[object Uint8Array]",$="[object Uint8ClampedArray]",J="[object Uint16Array]",X="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,fe=/^(?:0|[1-9]\d*)$/,oe={};oe[W]=oe[g]=oe[m]=oe[H]=oe[V]=oe[q]=oe[$]=oe[J]=oe[X]=!0,oe[o]=oe[u]=oe[B]=oe[d]=oe[z]=oe[b]=oe[N]=oe[E]=oe[L]=oe[P]=oe[x]=oe[C]=oe[A]=oe[c]=oe[O]=!1;var me=typeof lt=="object"&&lt&&lt.Object===Object&&lt,j=typeof self=="object"&&self&&self.Object===Object&&self,k=me||j||Function("return this")(),F=e&&!e.nodeType&&e,l=F&&!0&&t&&!t.nodeType&&t,T=l&&l.exports===F,ee=T&&me.process,te=function(){try{return ee&&ee.binding&&ee.binding("util")}catch{}}(),we=te&&te.isTypedArray;function xe(D,M){for(var Q=-1,ue=D==null?0:D.length,Re=0,ve=[];++Q<ue;){var Be=D[Q];M(Be,Q,D)&&(ve[Re++]=Be)}return ve}function y(D,M){for(var Q=-1,ue=M.length,Re=D.length;++Q<ue;)D[Re+Q]=M[Q];return D}function h(D,M){for(var Q=-1,ue=D==null?0:D.length;++Q<ue;)if(M(D[Q],Q,D))return!0;return!1}function f(D,M){for(var Q=-1,ue=Array(D);++Q<D;)ue[Q]=M(Q);return ue}function S(D){return function(M){return D(M)}}function R(D,M){return D.has(M)}function K(D,M){return D==null?void 0:D[M]}function G(D){var M=-1,Q=Array(D.size);return D.forEach(function(ue,Re){Q[++M]=[Re,ue]}),Q}function ne(D,M){return function(Q){return D(M(Q))}}function ae(D){var M=-1,Q=Array(D.size);return D.forEach(function(ue){Q[++M]=ue}),Q}var le=Array.prototype,he=Function.prototype,ce=Object.prototype,_e=k["__core-js_shared__"],be=he.toString,ge=ce.hasOwnProperty,De=function(){var D=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),Se=ce.toString,Ie=RegExp("^"+be.call(ge).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ae=T?k.Buffer:void 0,Ce=k.Symbol,Tt=k.Uint8Array,Rt=ce.propertyIsEnumerable,Xt=le.splice,mt=Ce?Ce.toStringTag:void 0,lr=Object.getOwnPropertySymbols,Hr=Ae?Ae.isBuffer:void 0,An=ne(Object.keys,Object),je=Dr(k,"DataView"),Ue=Dr(k,"Map"),ze=Dr(k,"Promise"),He=Dr(k,"Set"),qe=Dr(k,"WeakMap"),$e=Dr(Object,"create"),Ge=fr(je),Ye=fr(Ue),Je=fr(ze),Xe=fr(He),Qe=fr(qe),Ve=Ce?Ce.prototype:void 0,Ke=Ve?Ve.valueOf:void 0;function Le(D){var M=-1,Q=D==null?0:D.length;for(this.clear();++M<Q;){var ue=D[M];this.set(ue[0],ue[1])}}function Ze(){this.__data__=$e?$e(null):{},this.size=0}function et(D){var M=this.has(D)&&delete this.__data__[D];return this.size-=M?1:0,M}function jh(D){var M=this.__data__;if($e){var Q=M[D];return Q===n?void 0:Q}return ge.call(M,D)?M[D]:void 0}function zh(D){var M=this.__data__;return $e?M[D]!==void 0:ge.call(M,D)}function Hh(D,M){var Q=this.__data__;return this.size+=this.has(D)?0:1,Q[D]=$e&&M===void 0?n:M,this}Le.prototype.clear=Ze,Le.prototype.delete=et,Le.prototype.get=jh,Le.prototype.has=zh,Le.prototype.set=Hh;function zt(D){var M=-1,Q=D==null?0:D.length;for(this.clear();++M<Q;){var ue=D[M];this.set(ue[0],ue[1])}}function qh(){this.__data__=[],this.size=0}function Kh(D){var M=this.__data__,Q=On(M,D);if(Q<0)return!1;var ue=M.length-1;return Q==ue?M.pop():Xt.call(M,Q,1),--this.size,!0}function Vh(D){var M=this.__data__,Q=On(M,D);return Q<0?void 0:M[Q][1]}function Wh(D){return On(this.__data__,D)>-1}function Gh(D,M){var Q=this.__data__,ue=On(Q,D);return ue<0?(++this.size,Q.push([D,M])):Q[ue][1]=M,this}zt.prototype.clear=qh,zt.prototype.delete=Kh,zt.prototype.get=Vh,zt.prototype.has=Wh,zt.prototype.set=Gh;function hr(D){var M=-1,Q=D==null?0:D.length;for(this.clear();++M<Q;){var ue=D[M];this.set(ue[0],ue[1])}}function Yh(){this.size=0,this.__data__={hash:new Le,map:new(Ue||zt),string:new Le}}function Jh(D){var M=Nn(this,D).delete(D);return this.size-=M?1:0,M}function Xh(D){return Nn(this,D).get(D)}function Qh(D){return Nn(this,D).has(D)}function Zh(D,M){var Q=Nn(this,D),ue=Q.size;return Q.set(D,M),this.size+=Q.size==ue?0:1,this}hr.prototype.clear=Yh,hr.prototype.delete=Jh,hr.prototype.get=Xh,hr.prototype.has=Qh,hr.prototype.set=Zh;function Tn(D){var M=-1,Q=D==null?0:D.length;for(this.__data__=new hr;++M<Q;)this.add(D[M])}function ef(D){return this.__data__.set(D,n),this}function tf(D){return this.__data__.has(D)}Tn.prototype.add=Tn.prototype.push=ef,Tn.prototype.has=tf;function Qt(D){var M=this.__data__=new zt(D);this.size=M.size}function rf(){this.__data__=new zt,this.size=0}function nf(D){var M=this.__data__,Q=M.delete(D);return this.size=M.size,Q}function sf(D){return this.__data__.get(D)}function of(D){return this.__data__.has(D)}function af(D,M){var Q=this.__data__;if(Q instanceof zt){var ue=Q.__data__;if(!Ue||ue.length<r-1)return ue.push([D,M]),this.size=++Q.size,this;Q=this.__data__=new hr(ue)}return Q.set(D,M),this.size=Q.size,this}Qt.prototype.clear=rf,Qt.prototype.delete=nf,Qt.prototype.get=sf,Qt.prototype.has=of,Qt.prototype.set=af;function cf(D,M){var Q=Pn(D),ue=!Q&&xf(D),Re=!Q&&!ue&&Ai(D),ve=!Q&&!ue&&!Re&&Eo(D),Be=Q||ue||Re||ve,tt=Be?f(D.length,String):[],rt=tt.length;for(var Fe in D)(M||ge.call(D,Fe))&&!(Be&&(Fe=="length"||Re&&(Fe=="offset"||Fe=="parent")||ve&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||vf(Fe,rt)))&&tt.push(Fe);return tt}function On(D,M){for(var Q=D.length;Q--;)if(vo(D[Q][0],M))return Q;return-1}function uf(D,M,Q){var ue=M(D);return Pn(D)?ue:y(ue,Q(D))}function qr(D){return D==null?D===void 0?Y:U:mt&&mt in Object(D)?_f(D):Ef(D)}function po(D){return Kr(D)&&qr(D)==o}function go(D,M,Q,ue,Re){return D===M?!0:D==null||M==null||!Kr(D)&&!Kr(M)?D!==D&&M!==M:lf(D,M,Q,ue,go,Re)}function lf(D,M,Q,ue,Re,ve){var Be=Pn(D),tt=Pn(M),rt=Be?u:Zt(D),Fe=tt?u:Zt(M);rt=rt==o?x:rt,Fe=Fe==o?x:Fe;var wt=rt==x,Ot=Fe==x,at=rt==Fe;if(at&&Ai(D)){if(!Ai(M))return!1;Be=!0,wt=!1}if(at&&!wt)return ve||(ve=new Qt),Be||Eo(D)?_o(D,M,Q,ue,Re,ve):pf(D,M,rt,Q,ue,Re,ve);if(!(Q&i)){var Dt=wt&&ge.call(D,"__wrapped__"),St=Ot&&ge.call(M,"__wrapped__");if(Dt||St){var er=Dt?D.value():D,Ht=St?M.value():M;return ve||(ve=new Qt),Re(er,Ht,Q,ue,ve)}}return at?(ve||(ve=new Qt),gf(D,M,Q,ue,Re,ve)):!1}function hf(D){if(!bo(D)||wf(D))return!1;var M=mo(D)?Ie:Z;return M.test(fr(D))}function ff(D){return Kr(D)&&wo(D.length)&&!!oe[qr(D)]}function df(D){if(!bf(D))return An(D);var M=[];for(var Q in Object(D))ge.call(D,Q)&&Q!="constructor"&&M.push(Q);return M}function _o(D,M,Q,ue,Re,ve){var Be=Q&i,tt=D.length,rt=M.length;if(tt!=rt&&!(Be&&rt>tt))return!1;var Fe=ve.get(D);if(Fe&&ve.get(M))return Fe==M;var wt=-1,Ot=!0,at=Q&s?new Tn:void 0;for(ve.set(D,M),ve.set(M,D);++wt<tt;){var Dt=D[wt],St=M[wt];if(ue)var er=Be?ue(St,Dt,wt,M,D,ve):ue(Dt,St,wt,D,M,ve);if(er!==void 0){if(er)continue;Ot=!1;break}if(at){if(!h(M,function(Ht,dr){if(!R(at,dr)&&(Dt===Ht||Re(Dt,Ht,Q,ue,ve)))return at.push(dr)})){Ot=!1;break}}else if(!(Dt===St||Re(Dt,St,Q,ue,ve))){Ot=!1;break}}return ve.delete(D),ve.delete(M),Ot}function pf(D,M,Q,ue,Re,ve,Be){switch(Q){case z:if(D.byteLength!=M.byteLength||D.byteOffset!=M.byteOffset)return!1;D=D.buffer,M=M.buffer;case B:return!(D.byteLength!=M.byteLength||!ve(new Tt(D),new Tt(M)));case d:case b:case P:return vo(+D,+M);case N:return D.name==M.name&&D.message==M.message;case C:case c:return D==M+"";case L:var tt=G;case A:var rt=ue&i;if(tt||(tt=ae),D.size!=M.size&&!rt)return!1;var Fe=Be.get(D);if(Fe)return Fe==M;ue|=s,Be.set(D,M);var wt=_o(tt(D),tt(M),ue,Re,ve,Be);return Be.delete(D),wt;case _:if(Ke)return Ke.call(D)==Ke.call(M)}return!1}function gf(D,M,Q,ue,Re,ve){var Be=Q&i,tt=yo(D),rt=tt.length,Fe=yo(M),wt=Fe.length;if(rt!=wt&&!Be)return!1;for(var Ot=rt;Ot--;){var at=tt[Ot];if(!(Be?at in M:ge.call(M,at)))return!1}var Dt=ve.get(D);if(Dt&&ve.get(M))return Dt==M;var St=!0;ve.set(D,M),ve.set(M,D);for(var er=Be;++Ot<rt;){at=tt[Ot];var Ht=D[at],dr=M[at];if(ue)var xo=Be?ue(dr,Ht,at,M,D,ve):ue(Ht,dr,at,D,M,ve);if(!(xo===void 0?Ht===dr||Re(Ht,dr,Q,ue,ve):xo)){St=!1;break}er||(er=at=="constructor")}if(St&&!er){var Rn=D.constructor,Ln=M.constructor;Rn!=Ln&&"constructor"in D&&"constructor"in M&&!(typeof Rn=="function"&&Rn instanceof Rn&&typeof Ln=="function"&&Ln instanceof Ln)&&(St=!1)}return ve.delete(D),ve.delete(M),St}function yo(D){return uf(D,Cf,yf)}function Nn(D,M){var Q=D.__data__;return mf(M)?Q[typeof M=="string"?"string":"hash"]:Q.map}function Dr(D,M){var Q=K(D,M);return hf(Q)?Q:void 0}function _f(D){var M=ge.call(D,mt),Q=D[mt];try{D[mt]=void 0;var ue=!0}catch{}var Re=Se.call(D);return ue&&(M?D[mt]=Q:delete D[mt]),Re}var yf=lr?function(D){return D==null?[]:(D=Object(D),xe(lr(D),function(M){return Rt.call(D,M)}))}:If,Zt=qr;(je&&Zt(new je(new ArrayBuffer(1)))!=z||Ue&&Zt(new Ue)!=L||ze&&Zt(ze.resolve())!=I||He&&Zt(new He)!=A||qe&&Zt(new qe)!=O)&&(Zt=function(D){var M=qr(D),Q=M==x?D.constructor:void 0,ue=Q?fr(Q):"";if(ue)switch(ue){case Ge:return z;case Ye:return L;case Je:return I;case Xe:return A;case Qe:return O}return M});function vf(D,M){return M=M??a,!!M&&(typeof D=="number"||fe.test(D))&&D>-1&&D%1==0&&D<M}function mf(D){var M=typeof D;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?D!=="__proto__":D===null}function wf(D){return!!De&&De in D}function bf(D){var M=D&&D.constructor,Q=typeof M=="function"&&M.prototype||ce;return D===Q}function Ef(D){return Se.call(D)}function fr(D){if(D!=null){try{return be.call(D)}catch{}try{return D+""}catch{}}return""}function vo(D,M){return D===M||D!==D&&M!==M}var xf=po(function(){return arguments}())?po:function(D){return Kr(D)&&ge.call(D,"callee")&&!Rt.call(D,"callee")},Pn=Array.isArray;function Df(D){return D!=null&&wo(D.length)&&!mo(D)}var Ai=Hr||Af;function Sf(D,M){return go(D,M)}function mo(D){if(!bo(D))return!1;var M=qr(D);return M==E||M==w||M==p||M==v}function wo(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=a}function bo(D){var M=typeof D;return D!=null&&(M=="object"||M=="function")}function Kr(D){return D!=null&&typeof D=="object"}var Eo=we?S(we):ff;function Cf(D){return Df(D)?cf(D):df(D)}function If(){return[]}function Af(){return!1}t.exports=Sf})(r_,Jn);function n_(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=t.length,u=t.charAt(0),p=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function b(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var L=0,P=0,U=0,x=w.length;U!==x&&w[U]===0;)U++,L++;for(var I=(x-U)*d+1>>>0,v=new Uint8Array(I);U!==x;){for(var C=w[U],A=0,c=I-1;(C!==0||A<P)&&c!==-1;c--,A++)C+=256*v[c]>>>0,v[c]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");P=A,U++}for(var _=I-P;_!==I&&v[_]===0;)_++;for(var Y=u.repeat(L);_<I;++_)Y+=t.charAt(v[_]);return Y}function N(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var L=0;if(w[L]!==" "){for(var P=0,U=0;w[L]===u;)P++,L++;for(var x=(w.length-L)*p+1>>>0,I=new Uint8Array(x);w[L];){var v=r[w.charCodeAt(L)];if(v===255)return;for(var C=0,A=x-1;(v!==0||C<U)&&A!==-1;A--,C++)v+=o*I[A]>>>0,I[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");U=C,L++}if(w[L]!==" "){for(var c=x-U;c!==x&&I[c]===0;)c++;for(var _=new Uint8Array(P+(x-c)),Y=P;c!==x;)_[Y++]=I[c++];return _}}}function E(w){var L=N(w);if(L)return L;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:N,decode:E}}var i_=n_,s_=i_;const Vu=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},o_=t=>new TextEncoder().encode(t),a_=t=>new TextDecoder().decode(t);class c_{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class u_{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wu(this,e)}}class l_{constructor(e){this.decoders=e}or(e){return Wu(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Wu=(t,e)=>new l_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class h_{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new c_(e,r,n),this.decoder=new u_(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const _i=({name:t,prefix:e,encode:r,decode:n})=>new h_(t,e,r,n),Dn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=s_(r,e);return _i({prefix:t,name:e,encode:n,decode:s=>Vu(i(s))})},f_=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let o=0,u=0,p=0;for(let d=0;d<s;++d){const b=i[t[d]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,o+=r,o>=8&&(o-=8,a[p++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return a},d_=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,o=0;for(let u=0;u<t.length;++u)for(o=o<<8|t[u],a+=8;a>r;)a-=r,s+=e[i&o>>a];if(a&&(s+=e[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},ot=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>_i({prefix:e,name:t,encode(i){return d_(i,n,r)},decode(i){return f_(i,n,r,t)}}),p_=_i({prefix:"\0",name:"identity",encode:t=>a_(t),decode:t=>o_(t)});var g_=Object.freeze({__proto__:null,identity:p_});const __=ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var y_=Object.freeze({__proto__:null,base2:__});const v_=ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var m_=Object.freeze({__proto__:null,base8:v_});const w_=Dn({prefix:"9",name:"base10",alphabet:"0123456789"});var b_=Object.freeze({__proto__:null,base10:w_});const E_=ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),x_=ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var D_=Object.freeze({__proto__:null,base16:E_,base16upper:x_});const S_=ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),C_=ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),I_=ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),A_=ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),T_=ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),O_=ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),N_=ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),P_=ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),R_=ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var L_=Object.freeze({__proto__:null,base32:S_,base32upper:C_,base32pad:I_,base32padupper:A_,base32hex:T_,base32hexupper:O_,base32hexpad:N_,base32hexpadupper:P_,base32z:R_});const F_=Dn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),M_=Dn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var U_=Object.freeze({__proto__:null,base36:F_,base36upper:M_});const $_=Dn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B_=Dn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var k_=Object.freeze({__proto__:null,base58btc:$_,base58flickr:B_});const j_=ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),z_=ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),H_=ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),q_=ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var K_=Object.freeze({__proto__:null,base64:j_,base64pad:z_,base64url:H_,base64urlpad:q_});const Gu=Array.from(""),V_=Gu.reduce((t,e,r)=>(t[r]=e,t),[]),W_=Gu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function G_(t){return t.reduce((e,r)=>(e+=V_[r],e),"")}function Y_(t){const e=[];for(const r of t){const n=W_[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const J_=_i({prefix:"",name:"base256emoji",encode:G_,decode:Y_});var X_=Object.freeze({__proto__:null,base256emoji:J_}),Q_=Yu,Ia=128,Z_=127,ey=~Z_,ty=Math.pow(2,31);function Yu(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ty;)e[r++]=t&255|Ia,t/=128;for(;t&ey;)e[r++]=t&255|Ia,t>>>=7;return e[r]=t|0,Yu.bytes=r-n+1,e}var ry=gs,ny=128,Aa=127;function gs(t,n){var r=0,n=n||0,i=0,s=n,a,o=t.length;do{if(s>=o)throw gs.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&Aa)<<i:(a&Aa)*Math.pow(2,i),i+=7}while(a>=ny);return gs.bytes=s-n,r}var iy=Math.pow(2,7),sy=Math.pow(2,14),oy=Math.pow(2,21),ay=Math.pow(2,28),cy=Math.pow(2,35),uy=Math.pow(2,42),ly=Math.pow(2,49),hy=Math.pow(2,56),fy=Math.pow(2,63),dy=function(t){return t<iy?1:t<sy?2:t<oy?3:t<ay?4:t<cy?5:t<uy?6:t<ly?7:t<hy?8:t<fy?9:10},py={encode:Q_,decode:ry,encodingLength:dy},Ju=py;const Ta=(t,e,r=0)=>(Ju.encode(t,e,r),e),Oa=t=>Ju.encodingLength(t),_s=(t,e)=>{const r=e.byteLength,n=Oa(t),i=n+Oa(r),s=new Uint8Array(i+r);return Ta(t,s,0),Ta(r,s,n),s.set(e,i),new gy(t,r,e,s)};class gy{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Xu=({name:t,code:e,encode:r})=>new _y(t,e,r);class _y{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?_s(this.code,r):r.then(n=>_s(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Qu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),yy=Xu({name:"sha2-256",code:18,encode:Qu("SHA-256")}),vy=Xu({name:"sha2-512",code:19,encode:Qu("SHA-512")});var my=Object.freeze({__proto__:null,sha256:yy,sha512:vy});const Zu=0,wy="identity",el=Vu,by=t=>_s(Zu,el(t)),Ey={code:Zu,name:wy,encode:el,digest:by};var xy=Object.freeze({__proto__:null,identity:Ey});new TextEncoder,new TextDecoder;const Na={...g_,...y_,...m_,...b_,...D_,...L_,...U_,...k_,...K_,...X_};({...my,...xy});function Dy(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function tl(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Pa=tl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ki=tl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Dy(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Sy={utf8:Pa,"utf-8":Pa,hex:Na.base16,latin1:ki,ascii:ki,binary:ki,...Na};function Cy(t,e="utf8"){const r=Sy[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}const rl="wc",Iy=2,Ks="core",sr=`${rl}@${2}:${Ks}:`,Ay={name:Ks,logger:"error"},Ty={database:":memory:"},Oy="crypto",Ra="client_ed25519_seed",Ny=de.ONE_DAY,Py="keychain",Ry="0.3",Ly="messages",Fy="0.3",My=de.SIX_HOURS,Uy="publisher",nl="irn",$y="error",By="wss://relay.walletconnect.com",ky="relayer",ut={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},jy="_subscription",Mn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},La=de.ONE_SECOND,zy="2.3.3",Hy="0.3",Mt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},qy="subscription",Ky="0.3",Vy=de.FIVE_SECONDS*1e3,Wy="pairing",Gy="0.3",Qr={wc_pairingDelete:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:de.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:de.ONE_DAY,prompt:!1,tag:0},res:{ttl:de.ONE_DAY,prompt:!1,tag:0}}},Ft={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Yy="history",Jy="0.3",Xy="expirer",Ct={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Qy="0.3";class Zy{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Py,this.version=Ry,this.initialized=!1,this.storagePrefix=sr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ie("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ru(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Lu(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ev{constructor(e,r,n){this.core=e,this.logger=r,this.name=Oy,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=ta(i);return mu(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Ag();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),a=ta(s),o=hs();return await M0(o,i,Ny,a)},this.generateSharedKey=(i,s,a)=>{this.isInitialized();const o=this.getPrivateKey(i),u=Tg(o,s);return this.setSymKey(u,a)},this.setSymKey=async(i,s)=>{this.isInitialized();const a=s||Og(i);return await this.keychain.set(a,i),a},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,a)=>{this.isInitialized();const o=Nu(a),u=ln(s);if(fa(o)){const N=o.senderPublicKey,E=o.receiverPublicKey;i=await this.generateSharedKey(N,E)}const p=this.getSymKey(i),{type:d,senderPublicKey:b}=o;return Pg({type:d,symKey:p,message:u,senderPublicKey:b})},this.decode=async(i,s,a)=>{this.isInitialized();const o=Fg(s,a);if(fa(o)){const d=o.receiverPublicKey,b=o.senderPublicKey;i=await this.generateSharedKey(d,b)}const u=this.getSymKey(i),p=Rg({symKey:u,encoded:s});return Ts(p)},this.core=e,this.logger=Te.generateChildLogger(r,this.name),this.keychain=n||new Zy(this.core,this.logger)}get context(){return Te.getLoggerContext(this.logger)}getPayloadType(e){const r=$s(e);return wn(r.type)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ra)}catch{e=hs(),await this.keychain.set(Ra,e)}return Cy(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}let tv=class extends Kd{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Ly,this.version=Fy,this.initialized=!1,this.storagePrefix=sr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=fs(i);let a=this.messages.get(n);return typeof a>"u"&&(a={}),typeof a[s]<"u"||(a[s]=i,this.messages.set(n,a),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),a=fs(i);return typeof s[a]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Te.generateChildLogger(e,this.name),this.core=r}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ru(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Lu(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}};class rv extends Vd{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new it.EventEmitter,this.name=Uy,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||My,o=ds(s),u=(s==null?void 0:s.prompt)||!1,p=(s==null?void 0:s.tag)||0,d={topic:n,message:i,opts:{ttl:a,relay:o,prompt:u,tag:p}},b=fs(i);this.queue.set(b,d);try{await await Fu(this.rpcPublish(n,i,a,o,u,p),this.publishTimeout),this.relayer.events.emit(ut.publish,d)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(ut.connection_stalled);return}this.onPublish(b,d),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Te.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Te.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,a){var o,u,p,d;const b={method:ps(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:a}};return At((o=b.params)==null?void 0:o.prompt)&&((u=b.params)==null||delete u.prompt),At((p=b.params)==null?void 0:p.tag)&&((d=b.params)==null||delete d.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:b}),this.relayer.provider.request(b)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class nv{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var iv=Object.defineProperty,sv=Object.defineProperties,ov=Object.getOwnPropertyDescriptors,Fa=Object.getOwnPropertySymbols,av=Object.prototype.hasOwnProperty,cv=Object.prototype.propertyIsEnumerable,Ma=(t,e,r)=>e in t?iv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Un=(t,e)=>{for(var r in e||(e={}))av.call(e,r)&&Ma(t,r,e[r]);if(Fa)for(var r of Fa(e))cv.call(e,r)&&Ma(t,r,e[r]);return t},ji=(t,e)=>sv(t,ov(e));class uv extends Yd{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new nv,this.events=new it.EventEmitter,this.name=qy,this.version=Ky,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pendingSubInterval=20,this.storagePrefix=sr,this.subscribeTimeout=1e4,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable())},this.subscribe=async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=ds(i),a={topic:n,relay:s};this.pending.set(n,a);const o=await this.rpcSubscribe(n,s);return this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),o}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const a=new de.Watch;a.start(this.pendingSubscriptionWatchLabel);const o=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),i(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=Vy&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),s(!1))},this.pendingSubInterval)}),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{await this.restore(),await this.reset()},this.relayer=e,this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=ds(n);await this.rpcUnsubscribe(e,r,i);const s=We("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:ps(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Fu(this.relayer.provider.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(ut.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:ps(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.provider.request(i)}onSubscribe(e,r){this.setSubscription(e,ji(Un({},r),{id:e})),this.pending.delete(r.topic)}onResubscribe(e,r){this.addSubscription(e,ji(Un({},r),{id:e})),this.pending.delete(r.topic)}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Un({},r)),this.topicMap.set(r.topic,e),this.events.emit(Mt.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Mt.deleted,ji(Un({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Mt.sync)}async reset(){this.cached.length&&await Promise.all(this.cached.map(async e=>await this.resubscribe(e))),this.events.emit(Mt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async resubscribe(e){if(!this.ids.includes(e.id)){const{topic:r,relay:n}=e,i={topic:r,relay:n};this.pending.set(i.topic,i);const s=await this.rpcSubscribe(i.topic,i.relay);this.onResubscribe(s,i)}}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}checkPending(){this.relayer.transportExplicitlyClosed||this.pending.forEach(async e=>{const r=await this.rpcSubscribe(e.topic,e.relay);this.onSubscribe(r,e)})}registerEventListeners(){this.relayer.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(ut.connect,async()=>{await this.onConnect()}),this.relayer.on(ut.disconnect,()=>{this.onDisconnect()}),this.events.on(Mt.created,async e=>{const r=Mt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Mt.deleted,async e=>{const r=Mt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lv=Object.defineProperty,Ua=Object.getOwnPropertySymbols,hv=Object.prototype.hasOwnProperty,fv=Object.prototype.propertyIsEnumerable,$a=(t,e,r)=>e in t?lv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dv=(t,e)=>{for(var r in e||(e={}))hv.call(e,r)&&$a(t,r,e[r]);if(Ua)for(var r of Ua(e))fv.call(e,r)&&$a(t,r,e[r]);return t};class pv extends Wd{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new it.EventEmitter,this.name=ky,this.transportExplicitlyClosed=!1,this.initialized=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Te.generateChildLogger(e.logger,this.name):gn(Te.getDefaultLoggerOptions({level:e.logger||$y})),this.messages=new tv(this.logger,e.core),this.subscriber=new uv(this,this.logger),this.publisher=new rv(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||By,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.provider=await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Te.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r})}async subscribe(e,r){this.isInitialized();let n="";return await Promise.all([new Promise(i=>{this.subscriber.once(Mt.created,s=>{s.topic===e&&i()})}),new Promise(async i=>{n=await this.subscriber.subscribe(e,r),i()})]),n}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(ut.transport_closed))}async transportOpen(e){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Mt.resubscribed,()=>{r()})}),await Promise.race([this.provider.connect(),new Promise((r,n)=>this.once(ut.transport_closed,()=>{n(new Error("closeTransport called before connection was established"))}))])])}catch(r){const n=r;if(!/socket hang up/i.test(n.message))throw new Error(n.message);this.logger.error(n),this.events.emit(ut.transport_closed)}}async restartTransport(e){await this.transportClose(),await new Promise(r=>setTimeout(r,La)),await this.transportOpen(e)}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);return new xn(new t_(Yg({sdkVersion:zy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e})))}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Hs(e)){if(!e.method.endsWith(jy))return;const r=e.params,{topic:n,message:i}=r.data,s={topic:n,message:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(dv({type:"event",event:r.id},s)),this.events.emit(r.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(ut.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=zs(e.id,!0);await this.provider.connection.send(r)}registerEventListeners(){this.provider.on(Mn.payload,e=>this.onProviderPayload(e)),this.provider.on(Mn.connect,()=>{this.events.emit(ut.connect)}),this.provider.on(Mn.disconnect,()=>{this.events.emit(ut.disconnect),this.attemptToReconnect()}),this.provider.on(Mn.error,e=>this.events.emit(ut.error,e)),this.events.on(ut.connection_stalled,async()=>{await this.restartTransport()})}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.transportOpen()},de.toMiliseconds(La))}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gv=Object.defineProperty,Ba=Object.getOwnPropertySymbols,_v=Object.prototype.hasOwnProperty,yv=Object.prototype.propertyIsEnumerable,ka=(t,e,r)=>e in t?gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ja=(t,e)=>{for(var r in e||(e={}))_v.call(e,r)&&ka(t,r,e[r]);if(Ba)for(var r of Ba(e))yv.call(e,r)&&ka(t,r,e[r]);return t};class yi extends Gd{constructor(e,r,n,i=sr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Hy,this.cached=[],this.initialized=!1,this.storagePrefix=sr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{_1(a)?this.map.set(a.id,a):y1(a)?this.map.set(a.topic,a):this.getKey&&a!==null&&!At(a)&&this.map.set(this.getKey(a),a)}),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(u=>Jn(o[u],a[u]))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const u=ja(ja({},this.getData(a)),o);this.map.set(a,u),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),await this.persist())},this.logger=Te.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class vv{constructor(e,r){this.core=e,this.logger=r,this.name=Wy,this.version=Gy,this.events=new it,this.initialized=!1,this.storagePrefix=sr,this.ignoredPayloadTypes=[br],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=hs(),i=await this.core.crypto.setSymKey(n),s=Ut(de.FIVE_MINUTES),a={protocol:nl},o={topic:i,expiry:s,relay:a,active:!1},u=o1({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:a});return await this.pairings.set(i,o),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:u}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:a}=i1(n.uri),o=Ut(de.FIVE_MINUTES),u={topic:i,relay:a,expiry:o,active:!1};return await this.pairings.set(i,u),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:a}),this.core.expirer.set(i,o),n.activatePairing&&await this.activate({topic:i}),u},this.activate=async({topic:n})=>{this.isInitialized();const i=Ut(de.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:a,resolve:o,reject:u}=vr();this.events.once(ke("pairing_ping",s),({error:p})=>{p?u(p):o()}),await a()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",We("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const a=pi(i,s),o=await this.core.crypto.encode(n,a),u=Qr[i].req;return this.core.history.set(n,a),await this.core.relayer.publish(n,o,u),a.id},this.sendResult=async(n,i,s)=>{const a=zs(n,s),o=await this.core.crypto.encode(i,a),u=await this.core.history.get(i,n),p=Qr[u.request.method].res;await this.core.relayer.publish(i,o,p),await this.core.history.resolve(a)},this.sendError=async(n,i,s)=>{const a=gi(n,s),o=await this.core.crypto.encode(i,a),u=await this.core.history.get(i,n),p=Qr[u.request.method]?Qr[u.request.method].res:Qr.unregistered_method.res;await this.core.relayer.publish(i,o,p),await this.core.history.resolve(a)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,We("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>tr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n,a=s.method;if(this.pairings.keys.includes(i))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,a=(await this.core.history.get(i,s.id)).request.method;if(this.pairings.keys.includes(i))switch(a){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Wt(i)?this.events.emit(ke("pairing_ping",s),{}):Nt(i)&&this.events.emit(ke("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.sendResult(s,n,!0),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:a}=i;try{if(this.registeredMethods.includes(a))return;const o=We("WC_METHOD_UNSUPPORTED",a);await this.sendError(s,n,o),this.logger.error(o)}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(We("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!dt(n)){const{message:i}=ie("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!g1(n.uri)){const{message:i}=ie("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!dt(n)){const{message:s}=ie("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!dt(n)){const{message:s}=ie("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!nt(n,!1)){const{message:i}=ie("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(tr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ie("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Te.generateChildLogger(r,this.name),this.pairings=new yi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Te.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ut.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);Hs(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):qs(i)&&(await this.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.core.expirer.on(Ct.expired,async e=>{const{topic:r}=Uu(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class mv extends qd{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new it.EventEmitter,this.name=Yy,this.version=Jy,this.cached=[],this.initialized=!1,this.storagePrefix=sr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const a={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s};this.records.set(a.id,a),this.events.emit(Ft.created,a)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Nt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Ft.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Ft.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:pi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ft.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ft.created,e=>{const r=Ft.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Ft.updated,e=>{const r=Ft.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Ft.deleted,e=>{const r=Ft.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class wv extends Jd{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new it.EventEmitter,this.name=Xy,this.version=Qy,this.cached=[],this.initialized=!1,this.storagePrefix=sr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),a={target:s,expiry:i};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(Ct.created,{target:s,expiration:a})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ct.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Jg(e);if(typeof e=="number")return Xg(e);const{message:r}=ie("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ct.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;de.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ct.expired,{target:e,expiration:r})}checkExpirations(){this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(yn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ct.created,e=>{const r=Ct.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ct.expired,e=>{const r=Ct.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ct.deleted,e=>{const r=Ct.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bv=Object.defineProperty,za=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,xv=Object.prototype.propertyIsEnumerable,Ha=(t,e,r)=>e in t?bv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qa=(t,e)=>{for(var r in e||(e={}))Ev.call(e,r)&&Ha(t,r,e[r]);if(za)for(var r of za(e))xv.call(e,r)&&Ha(t,r,e[r]);return t};let Dv=class il extends Hd{constructor(e){super(e),this.protocol=rl,this.version=Iy,this.name=Ks,this.events=new it.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gn(Te.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Ay.logger}));this.logger=Te.generateChildLogger(r,this.name),this.heartbeat=new yn.HeartBeat,this.crypto=new ev(this,this.logger,e==null?void 0:e.keychain),this.history=new mv(this,this.logger),this.expirer=new wv(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Ad(qa(qa({},Ty),e==null?void 0:e.storageOptions)),this.relayer=new pv({core:this,logger:this.logger,relayUrl:e==null?void 0:e.relayUrl,projectId:this.projectId}),this.pairing=new vv(this,this.logger)}static async init(e){const r=new il(e);return await r.initialize(),r}get context(){return Te.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Sv=Dv,sl="wc",ol=2,al="client",Vs=`${sl}@${ol}:${al}:`,zi={name:al,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Cv="proposal",Iv="session",$n=de.SEVEN_DAYS,Av="engine",Zr={wc_sessionPropose:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1104},res:{ttl:de.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1106},res:{ttl:de.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1112},res:{ttl:de.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1115}}},Hi={min:de.FIVE_MINUTES,max:de.SEVEN_DAYS},Tv="request";var Ov=Object.defineProperty,Nv=Object.defineProperties,Pv=Object.getOwnPropertyDescriptors,Ka=Object.getOwnPropertySymbols,Rv=Object.prototype.hasOwnProperty,Lv=Object.prototype.propertyIsEnumerable,Va=(t,e,r)=>e in t?Ov(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vt=(t,e)=>{for(var r in e||(e={}))Rv.call(e,r)&&Va(t,r,e[r]);if(Ka)for(var r of Ka(e))Lv.call(e,r)&&Va(t,r,e[r]);return t},qi=(t,e)=>Nv(t,Pv(e));class Fv extends Qd{constructor(e){super(e),this.name=Av,this.events=new it,this.initialized=!1,this.ignoredPayloadTypes=[br],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Zr)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized(),await this.isValidConnect(r);const{pairingTopic:n,requiredNamespaces:i,relays:s}=r;let a=n,o,u=!1;if(a&&(u=this.client.core.pairing.pairings.get(a).active),!a||!u){const{topic:P,uri:U}=await this.client.core.pairing.create();a=P,o=U}const p=await this.client.core.crypto.generateKeyPair(),d={requiredNamespaces:i,relays:s??[{protocol:nl}],proposer:{publicKey:p,metadata:this.client.metadata}},{reject:b,resolve:N,done:E}=vr();if(this.events.once(ke("session_connect"),async({error:P,session:U})=>{if(P)b(P);else if(U){U.self.publicKey=p;const x=qi(Vt({},U),{requiredNamespaces:U.requiredNamespaces});await this.client.session.set(U.topic,x),await this.setExpiry(U.topic,U.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:U.peer.metadata}),N(x)}}),!a){const{message:P}=ie("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw new Error(P)}const w=await this.sendRequest(a,"wc_sessionPropose",d),L=Ut(de.FIVE_MINUTES);return await this.setProposal(w,Vt({id:w,expiry:L},d)),{uri:o,approval:E}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s}=r,a=this.client.proposal.get(n);let{pairingTopic:o,proposer:u,requiredNamespaces:p}=a;Yn(p)||(p=l1(s,"approve()"),this.client.proposal.set(n,qi(Vt({},a),{requiredNamespaces:p})));const d=await this.client.core.crypto.generateKeyPair(),b=u.publicKey,N=await this.client.core.crypto.generateSharedKey(d,b),E={relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:p,controller:{publicKey:d,metadata:this.client.metadata},expiry:Ut($n)};await this.client.core.relayer.subscribe(N);const w=await this.sendRequest(N,"wc_sessionSettle",E),{done:L,resolve:P,reject:U}=vr();this.events.once(ke("session_approve",w),({error:I})=>{I?U(I):P(this.client.session.get(N))});const x=qi(Vt({},E),{topic:N,acknowledged:!1,self:E.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:d});return await this.client.session.set(N,x),await this.setExpiry(N,Ut($n)),o&&await this.client.core.pairing.updateMetadata({topic:o,metadata:x.peer.metadata}),o&&n&&(await this.sendResult(n,o,{relay:{protocol:i??"irn"},responderPublicKey:d}),await this.client.proposal.delete(n,We("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o})),{topic:N,acknowledged:L}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,We("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:a,resolve:o,reject:u}=vr();return this.events.once(ke("session_update",s),({error:p})=>{p?u(p):o()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:a}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:a,reject:o}=vr();return this.events.once(ke("session_extend",i),({error:u})=>{u?o(u):a()}),await this.setExpiry(n,Ut($n)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:a}=r,o=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},a),{done:u,resolve:p,reject:d}=vr(a);return this.events.once(ke("session_request",o),({error:b,result:N})=>{b?d(b):p(N)}),await u()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Wt(i)?await this.sendResult(s,n,i.result):Nt(i)&&await this.sendError(s,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:a,reject:o}=vr();this.events.once(ke("session_ping",i),({error:u})=>{u?o(u):a()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",We("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>d1(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,We("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.deleteSymKey(r),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,We("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Zr.wc_sessionRequest.req.ttl,{id:i,topic:s,params:a}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:a}),n&&this.client.core.expirer.set(i,Ut(n))},this.sendRequest=async(r,n,i,s)=>{const a=pi(n,i),o=await this.client.core.crypto.encode(r,a),u=Zr[n].req;return s&&(u.ttl=s),this.client.core.history.set(r,a),this.client.core.relayer.publish(r,o,u),a.id},this.sendResult=async(r,n,i)=>{const s=zs(r,i),a=await this.client.core.crypto.encode(n,s),o=await this.client.core.history.get(n,r),u=Zr[o.request.method].res;this.client.core.relayer.publish(n,a,u),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{const s=gi(r,i),a=await this.client.core.crypto.encode(n,s),o=await this.client.core.history.get(n,r),u=Zr[o.request.method].res;this.client.core.relayer.publish(n,a,u),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{tr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{tr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Vt({},n.params));const a=Ut(de.FIVE_MINUTES),o=Vt({id:s,pairingTopic:r,expiry:a},i);await this.setProposal(s,o),this.client.events.emit("session_proposal",{id:s,params:o})}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Wt(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const o=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const u=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const p=await this.client.core.crypto.generateSharedKey(o,u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const d=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Nt(n)&&(await this.client.proposal.delete(i,We("USER_DISCONNECTED")),this.events.emit(ke("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:a,controller:o,expiry:u,namespaces:p,requiredNamespaces:d}=n.params,b={topic:r,relay:a,expiry:u,namespaces:p,acknowledged:!0,requiredNamespaces:d,controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}};await this.sendResult(n.id,r,!0),this.events.emit(ke("session_connect"),{session:b})}catch(a){await this.sendError(i,r,a),this.client.logger.error(a)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Wt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ke("session_approve",i),{})):Nt(n)&&(await this.client.session.delete(r,We("USER_DISCONNECTED")),this.events.emit(ke("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidUpdate(Vt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Wt(n)?this.events.emit(ke("session_update",i),{}):Nt(n)&&this.events.emit(ke("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Ut($n)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Wt(n)?this.events.emit(ke("session_extend",i),{}):Nt(n)&&this.events.emit(ke("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Wt(n)?this.events.emit(ke("session_ping",i),{}):Nt(n)&&this.events.emit(ke("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),this.client.core.relayer.once(ut.publish,async()=>{await this.deleteSession(r)}),await this.sendResult(i,r,!0),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Vt({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.client.events.emit("session_request",{id:i,topic:r,params:s})}catch(a){await this.sendError(i,r,a),this.client.logger.error(a)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Wt(n)?this.events.emit(ke("session_request",i),{result:n.result}):Nt(n)&&this.events.emit(ke("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidEmit(Vt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(a){await this.sendError(i,r,a),this.client.logger.error(a)}},this.isValidConnect=async r=>{if(!dt(r)){const{message:o}=ie("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(o)}const{pairingTopic:n,requiredNamespaces:i,relays:s}=r;if(At(n)||await this.isValidPairingTopic(n),!At(i)&&Yn(i)===0)return;const a=D1(i,"connect()");if(a)throw new Error(a.message);if(!S1(s,!0)){const{message:o}=ie("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(o)}},this.isValidApprove=async r=>{if(!dt(r))throw new Error(ie("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),o=zn(i,"approve()");if(o)throw new Error(o.message);const u=wa(a.requiredNamespaces,i,"update()");if(u)throw new Error(u.message);if(!nt(s,!0)){const{message:p}=ie("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(p)}},this.isValidReject=async r=>{if(!dt(r)){const{message:s}=ie("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!I1(i)){const{message:s}=ie("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!dt(r)){const{message:p}=ie("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(p)}const{relay:n,controller:i,namespaces:s,expiry:a}=r;if(!Bu(n)){const{message:p}=ie("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const o=v1(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);const u=zn(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(tr(a)){const{message:p}=ie("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async r=>{if(!dt(r)){const{message:u}=ie("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),a=zn(i,"update()");if(a)throw new Error(a.message);const o=wa(s.requiredNamespaces,i,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async r=>{if(!dt(r)){const{message:i}=ie("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!dt(r)){const{message:u}=ie("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:s,expiry:a}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!ma(o,s)){const{message:u}=ie("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!A1(i)){const{message:u}=ie("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!N1(o,s,i.method)){const{message:u}=ie("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(a&&!R1(a,Hi)){const{message:u}=ie("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${Hi.min} and ${Hi.max}`);throw new Error(u)}},this.isValidRespond=async r=>{if(!dt(r)){const{message:s}=ie("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!T1(i)){const{message:s}=ie("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!dt(r)){const{message:i}=ie("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!dt(r)){const{message:o}=ie("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(o)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!ma(a,s)){const{message:o}=ie("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(o)}if(!O1(i)){const{message:o}=ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}if(!P1(a,s,i.name)){const{message:o}=ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidDisconnect=async r=>{if(!dt(r)){const{message:i}=ie("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(ut.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);Hs(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):qs(i)&&(await this.client.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.client.core.expirer.on(Ct.expired,async e=>{const{topic:r,id:n}=Uu(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ie("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!nt(e,!1)){const{message:r}=ie("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(tr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ie("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!nt(e,!1)){const{message:r}=ie("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=ie("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(tr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=ie("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(nt(e,!1)){const{message:r}=ie("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ie("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!C1(e)){const{message:r}=ie("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ie("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(tr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=ie("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Mv extends yi{constructor(e,r){super(e,r,Cv,Vs),this.core=e,this.logger=r}}class Uv extends yi{constructor(e,r){super(e,r,Iv,Vs),this.core=e,this.logger=r}}class $v extends yi{constructor(e,r){super(e,r,Tv,Vs),this.core=e,this.logger=r}}let cl=class ul extends Xd{constructor(e){super(e),this.protocol=sl,this.version=ol,this.name=zi.name,this.events=new it.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||zi.name,this.metadata=(e==null?void 0:e.metadata)||Kg();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gn(Te.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||zi.logger}));this.core=(e==null?void 0:e.core)||new Sv(e),this.logger=Te.generateChildLogger(r,this.name),this.session=new Uv(this.core,this.logger),this.proposal=new Mv(this.core,this.logger),this.pendingRequest=new $v(this.core,this.logger),this.engine=new Fv(this)}static async init(e){const r=new ul(e);return await r.initialize(),r}get context(){return Te.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Ws={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});var ll=Pe.getLocalStorage=bl=Pe.getLocalStorageOrThrow=wl=Pe.getCrypto=ml=Pe.getCryptoOrThrow=vl=Pe.getLocation=yl=Pe.getLocationOrThrow=_l=Pe.getNavigator=gl=Pe.getNavigatorOrThrow=pl=Pe.getDocument=dl=Pe.getDocumentOrThrow=fl=Pe.getFromWindowOrThrow=hl=Pe.getFromWindow=void 0;function Er(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var hl=Pe.getFromWindow=Er;function jr(t){const e=Er(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var fl=Pe.getFromWindowOrThrow=jr;function Bv(){return jr("document")}var dl=Pe.getDocumentOrThrow=Bv;function kv(){return Er("document")}var pl=Pe.getDocument=kv;function jv(){return jr("navigator")}var gl=Pe.getNavigatorOrThrow=jv;function zv(){return Er("navigator")}var _l=Pe.getNavigator=zv;function Hv(){return jr("location")}var yl=Pe.getLocationOrThrow=Hv;function qv(){return Er("location")}var vl=Pe.getLocation=qv;function Kv(){return jr("crypto")}var ml=Pe.getCryptoOrThrow=Kv;function Vv(){return Er("crypto")}var wl=Pe.getCrypto=Vv;function Wv(){return jr("localStorage")}var bl=Pe.getLocalStorageOrThrow=Wv;function Gv(){return Er("localStorage")}ll=Pe.getLocalStorage=Gv;Object.defineProperty(Ws,"__esModule",{value:!0});var El=Ws.getWindowMetadata=void 0;const Wa=Pe;function Yv(){let t,e;try{t=Wa.getDocumentOrThrow(),e=Wa.getLocationOrThrow()}catch{return null}function r(){const b=t.getElementsByTagName("link"),N=[];for(let E=0;E<b.length;E++){const w=b[E],L=w.getAttribute("rel");if(L&&L.toLowerCase().indexOf("icon")>-1){const P=w.getAttribute("href");if(P)if(P.toLowerCase().indexOf("https:")===-1&&P.toLowerCase().indexOf("http:")===-1&&P.indexOf("//")!==0){let U=e.protocol+"//"+e.host;if(P.indexOf("/")===0)U+=P;else{const x=e.pathname.split("/");x.pop();const I=x.join("/");U+=I+"/"+P}N.push(U)}else if(P.indexOf("//")===0){const U=e.protocol+P;N.push(U)}else N.push(P)}}return N}function n(...b){const N=t.getElementsByTagName("meta");for(let E=0;E<N.length;E++){const w=N[E],L=["itemprop","property","name"].map(P=>w.getAttribute(P)).filter(P=>P?b.includes(P):!1);if(L.length&&L){const P=w.getAttribute("content");if(P)return P}}return""}function i(){let b=n("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function s(){return n("description","og:description","twitter:description","keywords")}const a=i(),o=s(),u=e.origin,p=r();return{description:o,url:u,icons:p,name:a}}El=Ws.getWindowMetadata=Yv;var Jv=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n},Xv=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Qv=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Zv=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),em=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),tm=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),rm=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,nm=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ga=3,im=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",rm]],Ya=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function sm(t){return t?Ja(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new tm:typeof navigator<"u"?Ja(navigator.userAgent):cm()}function om(t){return t!==""&&im.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Ja(t){var e=om(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new em;var i=n[1]&&n[1].split(/[._]/).slice(0,3);i?i.length<Ga&&(i=Jv(i,um(Ga-i.length))):i=[];var s=i.join("."),a=am(t),o=nm.exec(t);return o&&o[1]?new Zv(r,s,a,o[1]):new Xv(r,s,a)}function am(t){for(var e=0,r=Ya.length;e<r;e++){var n=Ya[e],i=n[0],s=n[1],a=s.exec(t);if(a)return i}return null}function cm(){var t=typeof process<"u"&&process.version;return t?new Qv(process.version.slice(1)):null}function um(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function Gs(t){return sm(t)}function vi(){const t=Gs();return t&&t.os?t.os:void 0}function xl(){const t=vi();return t?t.toLowerCase().includes("android"):!1}function Dl(){const t=vi();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function lm(){return vi()?xl()||Dl():!1}function Sl(){const t=Gs();return t&&t.name?t.name.toLowerCase()==="node":!1}function hm(){return!Sl()&&!!Cl()}const fm=hl,dm=fl,pm=dl,gm=pl,_m=gl,Cl=_l,ym=yl,vm=vl,mm=ml,wm=wl,bm=bl,mi=ll;function Em(){return El()}function xm(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function Dm(t){return typeof t=="string"?t:JSON.stringify(t)}const Il=xm,Al=Dm;function Tl(t,e){const r=Al(e),n=mi();n&&n.setItem(t,r)}function Sm(t){let e=null,r=null;const n=mi();return n&&(r=n.getItem(t)),e=r&&Il(r),e}function Cm(t){const e=mi();e&&e.removeItem(t)}const Ol="WALLETCONNECT_DEEPLINK_CHOICE";function Im(t,e){const r=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${r}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${r}`:""}function Am(t){const e=t.href.split("?")[0];Tl(Ol,Object.assign(Object.assign({},t),{href:e}))}function Nl(t,e){return t.filter(r=>r.name.toLowerCase().includes(e.toLowerCase()))[0]}function Tm(t,e){let r=t;return e&&(r=e.map(n=>Nl(t,n)).filter(Boolean)),r}const Pl="https://registry.walletconnect.com";function Om(){return Pl+"/api/v2/wallets"}function Nm(){return Pl+"/api/v2/dapps"}function Rl(t,e="mobile"){var r;return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:(r=t.image_url.sm)!==null&&r!==void 0?r:"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}function Pm(t,e="mobile"){return Object.values(t).filter(r=>!!r[e].universal||!!r[e].native).map(r=>Rl(r,e))}const Rm=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:Gs,detectOS:vi,formatIOSMobile:Im,formatMobileRegistry:Pm,formatMobileRegistryEntry:Rl,getClientMeta:Em,getCrypto:wm,getCryptoOrThrow:mm,getDappRegistryUrl:Nm,getDocument:gm,getDocumentOrThrow:pm,getFromWindow:fm,getFromWindowOrThrow:dm,getLocal:Sm,getLocalStorage:mi,getLocalStorageOrThrow:bm,getLocation:vm,getLocationOrThrow:ym,getMobileLinkRegistry:Tm,getMobileRegistryEntry:Nl,getNavigator:Cl,getNavigatorOrThrow:_m,getWalletRegistryUrl:Om,isAndroid:xl,isBrowser:hm,isIOS:Dl,isMobile:lm,isNode:Sl,mobileLinkChoiceKey:Ol,removeLocal:Cm,safeJsonParse:Il,safeJsonStringify:Al,saveMobileLinkInfo:Am,setLocal:Tl},Symbol.toStringTag,{value:"Module"})),Lm=As(Rm);var Sn={},Fm=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ll={},cr={},Mm={}.toString,Ys=Array.isArray||function(t){return Mm.call(t)=="[object Array]"},Um=Ys;function $m(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}Ee.TYPED_ARRAY_SUPPORT=$m();var Xa=Ee.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function Ee(t,e,r){return!Ee.TYPED_ARRAY_SUPPORT&&!(this instanceof Ee)?new Ee(t,e,r):typeof t=="number"?Fl(this,t):Km(this,t,e,r)}Ee.TYPED_ARRAY_SUPPORT&&(Ee.prototype.__proto__=Uint8Array.prototype,Ee.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Ee[Symbol.species]===Ee&&Object.defineProperty(Ee,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function Js(t){if(t>=Xa)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Xa.toString(16)+" bytes");return t|0}function Bm(t){return t!==t}function Rr(t,e){var r;return Ee.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=Ee.prototype):(r=t,r===null&&(r=new Ee(e)),r.length=e),r}function Fl(t,e){var r=Rr(t,e<0?0:Js(e)|0);if(!Ee.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function km(t,e){var r=Ul(e)|0,n=Rr(t,r),i=n.write(e);return i!==r&&(n=n.slice(0,i)),n}function ys(t,e){for(var r=e.length<0?0:Js(e.length)|0,n=Rr(t,r),i=0;i<r;i+=1)n[i]=e[i]&255;return n}function jm(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return r===void 0&&n===void 0?i=new Uint8Array(e):n===void 0?i=new Uint8Array(e,r):i=new Uint8Array(e,r,n),Ee.TYPED_ARRAY_SUPPORT?i.__proto__=Ee.prototype:i=ys(t,i),i}function zm(t,e){if(Ee.isBuffer(e)){var r=Js(e.length)|0,n=Rr(t,r);return n.length===0||e.copy(n,0,0,r),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Bm(e.length)?Rr(t,0):ys(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return ys(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ml(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Ul(t){if(Ee.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:Ml(t).length}function Hm(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function qm(t,e,r,n){return Hm(Ml(e,t.length-r),t,r,n)}function Km(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?jm(t,e,r,n):typeof e=="string"?km(t,e):zm(t,e)}Ee.prototype.write=function(e,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return qm(this,e,r,n)};Ee.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(Ee.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=Ee.prototype;else{var s=r-e;i=new Ee(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};Ee.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n,a;if(this===e&&n<r&&r<i)for(a=s-1;a>=0;--a)e[a+r]=this[a+n];else if(s<1e3||!Ee.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+r]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s};Ee.prototype.fill=function(e,r,n){if(typeof e=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{var a=Ee.isBuffer(e)?e:new Ee(e),o=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%o]}return this};Ee.concat=function(e,r){if(!Um(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Rr(null,0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Fl(null,r),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!Ee.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};Ee.byteLength=Ul;Ee.prototype._isBuffer=!0;Ee.isBuffer=function(e){return!!(e!=null&&e._isBuffer)};cr.alloc=function(t){var e=new Ee(t);return e.fill(0),e};cr.from=function(t){return new Ee(t)};var xt={},Xs,Vm=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];xt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};xt.getSymbolTotalCodewords=function(e){return Vm[e]};xt.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e};xt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Xs=e};xt.isKanjiModeEnabled=function(){return typeof Xs<"u"};xt.toSJIS=function(e){return Xs(e)};var wi={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(wi);function $l(){this.buffer=[],this.length=0}$l.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Wm=$l,Qa=cr;function Cn(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=Qa.alloc(t*t),this.reservedBit=Qa.alloc(t*t)}Cn.prototype.set=function(t,e,r,n){var i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};Cn.prototype.get=function(t,e){return this.data[t*this.size+e]};Cn.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};Cn.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Gm=Cn,Bl={};(function(t){var e=xt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];for(var i=Math.floor(n/7)+2,s=e(n),a=s===145?26:Math.ceil((s-13)/(2*i-2))*2,o=[s-7],u=1;u<i-1;u++)o[u]=o[u-1]-a;return o.push(6),o.reverse()},t.getPositions=function(n){for(var i=[],s=t.getRowColCoords(n),a=s.length,o=0;o<a;o++)for(var u=0;u<a;u++)o===0&&u===0||o===0&&u===a-1||o===a-1&&u===0||i.push([s[o],s[u]]);return i}})(Bl);var kl={},Ym=xt.getSymbolSize,Za=7;kl.getPositions=function(e){var r=Ym(e);return[[0,0],[r-Za,0],[0,r-Za]]};var jl={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){for(var s=i.size,a=0,o=0,u=0,p=null,d=null,b=0;b<s;b++){o=u=0,p=d=null;for(var N=0;N<s;N++){var E=i.get(b,N);E===p?o++:(o>=5&&(a+=e.N1+(o-5)),p=E,o=1),E=i.get(N,b),E===d?u++:(u>=5&&(a+=e.N1+(u-5)),d=E,u=1)}o>=5&&(a+=e.N1+(o-5)),u>=5&&(a+=e.N1+(u-5))}return a},t.getPenaltyN2=function(i){for(var s=i.size,a=0,o=0;o<s-1;o++)for(var u=0;u<s-1;u++){var p=i.get(o,u)+i.get(o,u+1)+i.get(o+1,u)+i.get(o+1,u+1);(p===4||p===0)&&a++}return a*e.N2},t.getPenaltyN3=function(i){for(var s=i.size,a=0,o=0,u=0,p=0;p<s;p++){o=u=0;for(var d=0;d<s;d++)o=o<<1&2047|i.get(p,d),d>=10&&(o===1488||o===93)&&a++,u=u<<1&2047|i.get(d,p),d>=10&&(u===1488||u===93)&&a++}return a*e.N3},t.getPenaltyN4=function(i){for(var s=0,a=i.data.length,o=0;o<a;o++)s+=i.data[o];var u=Math.abs(Math.ceil(s*100/a/5)-10);return u*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){for(var a=s.size,o=0;o<a;o++)for(var u=0;u<a;u++)s.isReserved(u,o)||s.xor(u,o,r(i,u,o))},t.getBestMask=function(i,s){for(var a=Object.keys(t.Patterns).length,o=0,u=1/0,p=0;p<a;p++){s(p),t.applyMask(p,i);var d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(p,i),d<u&&(u=d,o=p)}return o}})(jl);var bi={},nr=wi,Bn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],kn=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];bi.getBlocksCount=function(e,r){switch(r){case nr.L:return Bn[(e-1)*4+0];case nr.M:return Bn[(e-1)*4+1];case nr.Q:return Bn[(e-1)*4+2];case nr.H:return Bn[(e-1)*4+3];default:return}};bi.getTotalCodewordsCount=function(e,r){switch(r){case nr.L:return kn[(e-1)*4+0];case nr.M:return kn[(e-1)*4+1];case nr.Q:return kn[(e-1)*4+2];case nr.H:return kn[(e-1)*4+3];default:return}};var zl={},Ei={},Hl=cr,nn=Hl.alloc(512),Xn=Hl.alloc(256);(function(){for(var e=1,r=0;r<255;r++)nn[r]=e,Xn[e]=r,e<<=1,e&256&&(e^=285);for(r=255;r<512;r++)nn[r]=nn[r-255]})();Ei.log=function(e){if(e<1)throw new Error("log("+e+")");return Xn[e]};Ei.exp=function(e){return nn[e]};Ei.mul=function(e,r){return e===0||r===0?0:nn[Xn[e]+Xn[r]]};(function(t){var e=cr,r=Ei;t.mul=function(i,s){for(var a=e.alloc(i.length+s.length-1),o=0;o<i.length;o++)for(var u=0;u<s.length;u++)a[o+u]^=r.mul(i[o],s[u]);return a},t.mod=function(i,s){for(var a=e.from(i);a.length-s.length>=0;){for(var o=a[0],u=0;u<s.length;u++)a[u]^=r.mul(s[u],o);for(var p=0;p<a.length&&a[p]===0;)p++;a=a.slice(p)}return a},t.generateECPolynomial=function(i){for(var s=e.from([1]),a=0;a<i;a++)s=t.mul(s,[1,r.exp(a)]);return s}})(zl);var ql={},xi={};xi.byteLength=Qm;xi.toByteArray=ew;xi.fromByteArray=nw;var $t=[],It=[],Jm=typeof Uint8Array<"u"?Uint8Array:Array,Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ar=0,Xm=Ki.length;Ar<Xm;++Ar)$t[Ar]=Ki[Ar],It[Ki.charCodeAt(Ar)]=Ar;It["-".charCodeAt(0)]=62;It["_".charCodeAt(0)]=63;function Kl(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Qm(t){var e=Kl(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Zm(t,e,r){return(e+r)*3/4-r}function ew(t){var e,r=Kl(t),n=r[0],i=r[1],s=new Jm(Zm(t,n,i)),a=0,o=i>0?n-4:n,u;for(u=0;u<o;u+=4)e=It[t.charCodeAt(u)]<<18|It[t.charCodeAt(u+1)]<<12|It[t.charCodeAt(u+2)]<<6|It[t.charCodeAt(u+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=It[t.charCodeAt(u)]<<2|It[t.charCodeAt(u+1)]>>4,s[a++]=e&255),i===1&&(e=It[t.charCodeAt(u)]<<10|It[t.charCodeAt(u+1)]<<4|It[t.charCodeAt(u+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function tw(t){return $t[t>>18&63]+$t[t>>12&63]+$t[t>>6&63]+$t[t&63]}function rw(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(tw(n));return i.join("")}function nw(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(rw(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push($t[e>>2]+$t[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push($t[e>>10]+$t[e>>4&63]+$t[e<<2&63]+"=")),i.join("")}var Qs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Qs.read=function(t,e,r,n,i){var s,a,o=i*8-n-1,u=(1<<o)-1,p=u>>1,d=-7,b=r?i-1:0,N=r?-1:1,E=t[e+b];for(b+=N,s=E&(1<<-d)-1,E>>=-d,d+=o;d>0;s=s*256+t[e+b],b+=N,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+t[e+b],b+=N,d-=8);if(s===0)s=1-p;else{if(s===u)return a?NaN:(E?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-p}return(E?-1:1)*a*Math.pow(2,s-n)};Qs.write=function(t,e,r,n,i,s){var a,o,u,p=s*8-i-1,d=(1<<p)-1,b=d>>1,N=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:s-1,w=n?1:-1,L=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+b>=1?e+=N/u:e+=N*Math.pow(2,1-b),e*u>=2&&(a++,u/=2),a+b>=d?(o=0,a=d):a+b>=1?(o=(e*u-1)*Math.pow(2,i),a=a+b):(o=e*Math.pow(2,b-1)*Math.pow(2,i),a=0));i>=8;t[r+E]=o&255,E+=w,o/=256,i-=8);for(a=a<<i|o,p+=i;p>0;t[r+E]=a&255,E+=w,a/=256,p-=8);t[r+E-w]|=L*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=xi,r=Qs,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var y=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(y,h),y.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(y){if(y>i)throw new RangeError('The value "'+y+'" is invalid for option "size"');var h=new Uint8Array(y);return Object.setPrototypeOf(h,o.prototype),h}function o(y,h,f){if(typeof y=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(y)}return u(y,h,f)}o.poolSize=8192;function u(y,h,f){if(typeof y=="string")return N(y,h);if(ArrayBuffer.isView(y))return w(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(te(y,ArrayBuffer)||y&&te(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(y,SharedArrayBuffer)||y&&te(y.buffer,SharedArrayBuffer)))return L(y,h,f);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=y.valueOf&&y.valueOf();if(S!=null&&S!==y)return o.from(S,h,f);var R=P(y);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return o.from(y[Symbol.toPrimitive]("string"),h,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}o.from=function(y,h,f){return u(y,h,f)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function p(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function d(y,h,f){return p(y),y<=0?a(y):h!==void 0?typeof f=="string"?a(y).fill(h,f):a(y).fill(h):a(y)}o.alloc=function(y,h,f){return d(y,h,f)};function b(y){return p(y),a(y<0?0:U(y)|0)}o.allocUnsafe=function(y){return b(y)},o.allocUnsafeSlow=function(y){return b(y)};function N(y,h){if((typeof h!="string"||h==="")&&(h="utf8"),!o.isEncoding(h))throw new TypeError("Unknown encoding: "+h);var f=I(y,h)|0,S=a(f),R=S.write(y,h);return R!==f&&(S=S.slice(0,R)),S}function E(y){for(var h=y.length<0?0:U(y.length)|0,f=a(h),S=0;S<h;S+=1)f[S]=y[S]&255;return f}function w(y){if(te(y,Uint8Array)){var h=new Uint8Array(y);return L(h.buffer,h.byteOffset,h.byteLength)}return E(y)}function L(y,h,f){if(h<0||y.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<h+(f||0))throw new RangeError('"length" is outside of buffer bounds');var S;return h===void 0&&f===void 0?S=new Uint8Array(y):f===void 0?S=new Uint8Array(y,h):S=new Uint8Array(y,h,f),Object.setPrototypeOf(S,o.prototype),S}function P(y){if(o.isBuffer(y)){var h=U(y.length)|0,f=a(h);return f.length===0||y.copy(f,0,0,h),f}if(y.length!==void 0)return typeof y.length!="number"||we(y.length)?a(0):E(y);if(y.type==="Buffer"&&Array.isArray(y.data))return E(y.data)}function U(y){if(y>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return y|0}function x(y){return+y!=y&&(y=0),o.alloc(+y)}o.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==o.prototype},o.compare=function(h,f){if(te(h,Uint8Array)&&(h=o.from(h,h.offset,h.byteLength)),te(f,Uint8Array)&&(f=o.from(f,f.offset,f.byteLength)),!o.isBuffer(h)||!o.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===f)return 0;for(var S=h.length,R=f.length,K=0,G=Math.min(S,R);K<G;++K)if(h[K]!==f[K]){S=h[K],R=f[K];break}return S<R?-1:R<S?1:0},o.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(h,f){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return o.alloc(0);var S;if(f===void 0)for(f=0,S=0;S<h.length;++S)f+=h[S].length;var R=o.allocUnsafe(f),K=0;for(S=0;S<h.length;++S){var G=h[S];if(te(G,Uint8Array))K+G.length>R.length?o.from(G).copy(R,K):Uint8Array.prototype.set.call(R,G,K);else if(o.isBuffer(G))G.copy(R,K);else throw new TypeError('"list" argument must be an Array of Buffers');K+=G.length}return R};function I(y,h){if(o.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||te(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);var f=y.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&f===0)return 0;for(var R=!1;;)switch(h){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return k(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return T(y).length;default:if(R)return S?-1:k(y).length;h=(""+h).toLowerCase(),R=!0}}o.byteLength=I;function v(y,h,f){var S=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,h>>>=0,f<=h))return"";for(y||(y="utf8");;)switch(y){case"hex":return $(this,h,f);case"utf8":case"utf-8":return g(this,h,f);case"ascii":return V(this,h,f);case"latin1":case"binary":return q(this,h,f);case"base64":return W(this,h,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,h,f);default:if(S)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),S=!0}}o.prototype._isBuffer=!0;function C(y,h,f){var S=y[h];y[h]=y[f],y[f]=S}o.prototype.swap16=function(){var h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var f=0;f<h;f+=2)C(this,f,f+1);return this},o.prototype.swap32=function(){var h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var f=0;f<h;f+=4)C(this,f,f+3),C(this,f+1,f+2);return this},o.prototype.swap64=function(){var h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var f=0;f<h;f+=8)C(this,f,f+7),C(this,f+1,f+6),C(this,f+2,f+5),C(this,f+3,f+4);return this},o.prototype.toString=function(){var h=this.length;return h===0?"":arguments.length===0?g(this,0,h):v.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(h){if(!o.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:o.compare(this,h)===0},o.prototype.inspect=function(){var h="",f=t.INSPECT_MAX_BYTES;return h=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(h+=" ... "),"<Buffer "+h+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(h,f,S,R,K){if(te(h,Uint8Array)&&(h=o.from(h,h.offset,h.byteLength)),!o.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(f===void 0&&(f=0),S===void 0&&(S=h?h.length:0),R===void 0&&(R=0),K===void 0&&(K=this.length),f<0||S>h.length||R<0||K>this.length)throw new RangeError("out of range index");if(R>=K&&f>=S)return 0;if(R>=K)return-1;if(f>=S)return 1;if(f>>>=0,S>>>=0,R>>>=0,K>>>=0,this===h)return 0;for(var G=K-R,ne=S-f,ae=Math.min(G,ne),le=this.slice(R,K),he=h.slice(f,S),ce=0;ce<ae;++ce)if(le[ce]!==he[ce]){G=le[ce],ne=he[ce];break}return G<ne?-1:ne<G?1:0};function A(y,h,f,S,R){if(y.length===0)return-1;if(typeof f=="string"?(S=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,we(f)&&(f=R?0:y.length-1),f<0&&(f=y.length+f),f>=y.length){if(R)return-1;f=y.length-1}else if(f<0)if(R)f=0;else return-1;if(typeof h=="string"&&(h=o.from(h,S)),o.isBuffer(h))return h.length===0?-1:c(y,h,f,S,R);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(y,h,f):Uint8Array.prototype.lastIndexOf.call(y,h,f):c(y,[h],f,S,R);throw new TypeError("val must be string, number or Buffer")}function c(y,h,f,S,R){var K=1,G=y.length,ne=h.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(y.length<2||h.length<2)return-1;K=2,G/=2,ne/=2,f/=2}function ae(be,ge){return K===1?be[ge]:be.readUInt16BE(ge*K)}var le;if(R){var he=-1;for(le=f;le<G;le++)if(ae(y,le)===ae(h,he===-1?0:le-he)){if(he===-1&&(he=le),le-he+1===ne)return he*K}else he!==-1&&(le-=le-he),he=-1}else for(f+ne>G&&(f=G-ne),le=f;le>=0;le--){for(var ce=!0,_e=0;_e<ne;_e++)if(ae(y,le+_e)!==ae(h,_e)){ce=!1;break}if(ce)return le}return-1}o.prototype.includes=function(h,f,S){return this.indexOf(h,f,S)!==-1},o.prototype.indexOf=function(h,f,S){return A(this,h,f,S,!0)},o.prototype.lastIndexOf=function(h,f,S){return A(this,h,f,S,!1)};function _(y,h,f,S){f=Number(f)||0;var R=y.length-f;S?(S=Number(S),S>R&&(S=R)):S=R;var K=h.length;S>K/2&&(S=K/2);for(var G=0;G<S;++G){var ne=parseInt(h.substr(G*2,2),16);if(we(ne))return G;y[f+G]=ne}return G}function Y(y,h,f,S){return ee(k(h,y.length-f),y,f,S)}function O(y,h,f,S){return ee(F(h),y,f,S)}function B(y,h,f,S){return ee(T(h),y,f,S)}function z(y,h,f,S){return ee(l(h,y.length-f),y,f,S)}o.prototype.write=function(h,f,S,R){if(f===void 0)R="utf8",S=this.length,f=0;else if(S===void 0&&typeof f=="string")R=f,S=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(S)?(S=S>>>0,R===void 0&&(R="utf8")):(R=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var K=this.length-f;if((S===void 0||S>K)&&(S=K),h.length>0&&(S<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");for(var G=!1;;)switch(R){case"hex":return _(this,h,f,S);case"utf8":case"utf-8":return Y(this,h,f,S);case"ascii":case"latin1":case"binary":return O(this,h,f,S);case"base64":return B(this,h,f,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,h,f,S);default:if(G)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),G=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(y,h,f){return h===0&&f===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(h,f))}function g(y,h,f){f=Math.min(y.length,f);for(var S=[],R=h;R<f;){var K=y[R],G=null,ne=K>239?4:K>223?3:K>191?2:1;if(R+ne<=f){var ae,le,he,ce;switch(ne){case 1:K<128&&(G=K);break;case 2:ae=y[R+1],(ae&192)===128&&(ce=(K&31)<<6|ae&63,ce>127&&(G=ce));break;case 3:ae=y[R+1],le=y[R+2],(ae&192)===128&&(le&192)===128&&(ce=(K&15)<<12|(ae&63)<<6|le&63,ce>2047&&(ce<55296||ce>57343)&&(G=ce));break;case 4:ae=y[R+1],le=y[R+2],he=y[R+3],(ae&192)===128&&(le&192)===128&&(he&192)===128&&(ce=(K&15)<<18|(ae&63)<<12|(le&63)<<6|he&63,ce>65535&&ce<1114112&&(G=ce))}}G===null?(G=65533,ne=1):G>65535&&(G-=65536,S.push(G>>>10&1023|55296),G=56320|G&1023),S.push(G),R+=ne}return H(S)}var m=4096;function H(y){var h=y.length;if(h<=m)return String.fromCharCode.apply(String,y);for(var f="",S=0;S<h;)f+=String.fromCharCode.apply(String,y.slice(S,S+=m));return f}function V(y,h,f){var S="";f=Math.min(y.length,f);for(var R=h;R<f;++R)S+=String.fromCharCode(y[R]&127);return S}function q(y,h,f){var S="";f=Math.min(y.length,f);for(var R=h;R<f;++R)S+=String.fromCharCode(y[R]);return S}function $(y,h,f){var S=y.length;(!h||h<0)&&(h=0),(!f||f<0||f>S)&&(f=S);for(var R="",K=h;K<f;++K)R+=xe[y[K]];return R}function J(y,h,f){for(var S=y.slice(h,f),R="",K=0;K<S.length-1;K+=2)R+=String.fromCharCode(S[K]+S[K+1]*256);return R}o.prototype.slice=function(h,f){var S=this.length;h=~~h,f=f===void 0?S:~~f,h<0?(h+=S,h<0&&(h=0)):h>S&&(h=S),f<0?(f+=S,f<0&&(f=0)):f>S&&(f=S),f<h&&(f=h);var R=this.subarray(h,f);return Object.setPrototypeOf(R,o.prototype),R};function X(y,h,f){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+h>f)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(h,f,S){h=h>>>0,f=f>>>0,S||X(h,f,this.length);for(var R=this[h],K=1,G=0;++G<f&&(K*=256);)R+=this[h+G]*K;return R},o.prototype.readUintBE=o.prototype.readUIntBE=function(h,f,S){h=h>>>0,f=f>>>0,S||X(h,f,this.length);for(var R=this[h+--f],K=1;f>0&&(K*=256);)R+=this[h+--f]*K;return R},o.prototype.readUint8=o.prototype.readUInt8=function(h,f){return h=h>>>0,f||X(h,1,this.length),this[h]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(h,f){return h=h>>>0,f||X(h,2,this.length),this[h]|this[h+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(h,f){return h=h>>>0,f||X(h,2,this.length),this[h]<<8|this[h+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(h,f){return h=h>>>0,f||X(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(h,f){return h=h>>>0,f||X(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},o.prototype.readIntLE=function(h,f,S){h=h>>>0,f=f>>>0,S||X(h,f,this.length);for(var R=this[h],K=1,G=0;++G<f&&(K*=256);)R+=this[h+G]*K;return K*=128,R>=K&&(R-=Math.pow(2,8*f)),R},o.prototype.readIntBE=function(h,f,S){h=h>>>0,f=f>>>0,S||X(h,f,this.length);for(var R=f,K=1,G=this[h+--R];R>0&&(K*=256);)G+=this[h+--R]*K;return K*=128,G>=K&&(G-=Math.pow(2,8*f)),G},o.prototype.readInt8=function(h,f){return h=h>>>0,f||X(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},o.prototype.readInt16LE=function(h,f){h=h>>>0,f||X(h,2,this.length);var S=this[h]|this[h+1]<<8;return S&32768?S|4294901760:S},o.prototype.readInt16BE=function(h,f){h=h>>>0,f||X(h,2,this.length);var S=this[h+1]|this[h]<<8;return S&32768?S|4294901760:S},o.prototype.readInt32LE=function(h,f){return h=h>>>0,f||X(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},o.prototype.readInt32BE=function(h,f){return h=h>>>0,f||X(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},o.prototype.readFloatLE=function(h,f){return h=h>>>0,f||X(h,4,this.length),r.read(this,h,!0,23,4)},o.prototype.readFloatBE=function(h,f){return h=h>>>0,f||X(h,4,this.length),r.read(this,h,!1,23,4)},o.prototype.readDoubleLE=function(h,f){return h=h>>>0,f||X(h,8,this.length),r.read(this,h,!0,52,8)},o.prototype.readDoubleBE=function(h,f){return h=h>>>0,f||X(h,8,this.length),r.read(this,h,!1,52,8)};function re(y,h,f,S,R,K){if(!o.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>R||h<K)throw new RangeError('"value" argument is out of bounds');if(f+S>y.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(h,f,S,R){if(h=+h,f=f>>>0,S=S>>>0,!R){var K=Math.pow(2,8*S)-1;re(this,h,f,S,K,0)}var G=1,ne=0;for(this[f]=h&255;++ne<S&&(G*=256);)this[f+ne]=h/G&255;return f+S},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(h,f,S,R){if(h=+h,f=f>>>0,S=S>>>0,!R){var K=Math.pow(2,8*S)-1;re(this,h,f,S,K,0)}var G=S-1,ne=1;for(this[f+G]=h&255;--G>=0&&(ne*=256);)this[f+G]=h/ne&255;return f+S},o.prototype.writeUint8=o.prototype.writeUInt8=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,1,255,0),this[f]=h&255,f+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,2,65535,0),this[f]=h&255,this[f+1]=h>>>8,f+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,2,65535,0),this[f]=h>>>8,this[f+1]=h&255,f+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,4,4294967295,0),this[f+3]=h>>>24,this[f+2]=h>>>16,this[f+1]=h>>>8,this[f]=h&255,f+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,4,4294967295,0),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4},o.prototype.writeIntLE=function(h,f,S,R){if(h=+h,f=f>>>0,!R){var K=Math.pow(2,8*S-1);re(this,h,f,S,K-1,-K)}var G=0,ne=1,ae=0;for(this[f]=h&255;++G<S&&(ne*=256);)h<0&&ae===0&&this[f+G-1]!==0&&(ae=1),this[f+G]=(h/ne>>0)-ae&255;return f+S},o.prototype.writeIntBE=function(h,f,S,R){if(h=+h,f=f>>>0,!R){var K=Math.pow(2,8*S-1);re(this,h,f,S,K-1,-K)}var G=S-1,ne=1,ae=0;for(this[f+G]=h&255;--G>=0&&(ne*=256);)h<0&&ae===0&&this[f+G+1]!==0&&(ae=1),this[f+G]=(h/ne>>0)-ae&255;return f+S},o.prototype.writeInt8=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,1,127,-128),h<0&&(h=255+h+1),this[f]=h&255,f+1},o.prototype.writeInt16LE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,2,32767,-32768),this[f]=h&255,this[f+1]=h>>>8,f+2},o.prototype.writeInt16BE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,2,32767,-32768),this[f]=h>>>8,this[f+1]=h&255,f+2},o.prototype.writeInt32LE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,4,2147483647,-2147483648),this[f]=h&255,this[f+1]=h>>>8,this[f+2]=h>>>16,this[f+3]=h>>>24,f+4},o.prototype.writeInt32BE=function(h,f,S){return h=+h,f=f>>>0,S||re(this,h,f,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4};function Z(y,h,f,S,R,K){if(f+S>y.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function fe(y,h,f,S,R){return h=+h,f=f>>>0,R||Z(y,h,f,4),r.write(y,h,f,S,23,4),f+4}o.prototype.writeFloatLE=function(h,f,S){return fe(this,h,f,!0,S)},o.prototype.writeFloatBE=function(h,f,S){return fe(this,h,f,!1,S)};function oe(y,h,f,S,R){return h=+h,f=f>>>0,R||Z(y,h,f,8),r.write(y,h,f,S,52,8),f+8}o.prototype.writeDoubleLE=function(h,f,S){return oe(this,h,f,!0,S)},o.prototype.writeDoubleBE=function(h,f,S){return oe(this,h,f,!1,S)},o.prototype.copy=function(h,f,S,R){if(!o.isBuffer(h))throw new TypeError("argument should be a Buffer");if(S||(S=0),!R&&R!==0&&(R=this.length),f>=h.length&&(f=h.length),f||(f=0),R>0&&R<S&&(R=S),R===S||h.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),h.length-f<R-S&&(R=h.length-f+S);var K=R-S;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,S,R):Uint8Array.prototype.set.call(h,this.subarray(S,R),f),K},o.prototype.fill=function(h,f,S,R){if(typeof h=="string"){if(typeof f=="string"?(R=f,f=0,S=this.length):typeof S=="string"&&(R=S,S=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!o.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(h.length===1){var K=h.charCodeAt(0);(R==="utf8"&&K<128||R==="latin1")&&(h=K)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(f<0||this.length<f||this.length<S)throw new RangeError("Out of range index");if(S<=f)return this;f=f>>>0,S=S===void 0?this.length:S>>>0,h||(h=0);var G;if(typeof h=="number")for(G=f;G<S;++G)this[G]=h;else{var ne=o.isBuffer(h)?h:o.from(h,R),ae=ne.length;if(ae===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(G=0;G<S-f;++G)this[G+f]=ne[G%ae]}return this};var me=/[^+/0-9A-Za-z-_]/g;function j(y){if(y=y.split("=")[0],y=y.trim().replace(me,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function k(y,h){h=h||1/0;for(var f,S=y.length,R=null,K=[],G=0;G<S;++G){if(f=y.charCodeAt(G),f>55295&&f<57344){if(!R){if(f>56319){(h-=3)>-1&&K.push(239,191,189);continue}else if(G+1===S){(h-=3)>-1&&K.push(239,191,189);continue}R=f;continue}if(f<56320){(h-=3)>-1&&K.push(239,191,189),R=f;continue}f=(R-55296<<10|f-56320)+65536}else R&&(h-=3)>-1&&K.push(239,191,189);if(R=null,f<128){if((h-=1)<0)break;K.push(f)}else if(f<2048){if((h-=2)<0)break;K.push(f>>6|192,f&63|128)}else if(f<65536){if((h-=3)<0)break;K.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((h-=4)<0)break;K.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return K}function F(y){for(var h=[],f=0;f<y.length;++f)h.push(y.charCodeAt(f)&255);return h}function l(y,h){for(var f,S,R,K=[],G=0;G<y.length&&!((h-=2)<0);++G)f=y.charCodeAt(G),S=f>>8,R=f%256,K.push(R),K.push(S);return K}function T(y){return e.toByteArray(j(y))}function ee(y,h,f,S){for(var R=0;R<S&&!(R+f>=h.length||R>=y.length);++R)h[R+f]=y[R];return R}function te(y,h){return y instanceof h||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===h.name}function we(y){return y!==y}var xe=function(){for(var y="0123456789abcdef",h=new Array(256),f=0;f<16;++f)for(var S=f*16,R=0;R<16;++R)h[S+R]=y[f]+y[R];return h}()})(ql);var ec=cr,Vl=zl,iw=ql.Buffer;function Zs(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Zs.prototype.initialize=function(e){this.degree=e,this.genPoly=Vl.generateECPolynomial(this.degree)};Zs.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var r=ec.alloc(this.degree),n=iw.concat([e,r],e.length+this.degree),i=Vl.mod(n,this.genPoly),s=this.degree-i.length;if(s>0){var a=ec.alloc(this.degree);return i.copy(a,s),a}return i};var sw=Zs,Wl={},ur={},eo={};eo.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var jt={},Gl="[0-9]+",ow="[A-Z $%*+\\-./:]+",fn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";fn=fn.replace(/u/g,"\\u");var aw="(?:(?![A-Z0-9 $%*+\\-./:]|"+fn+`)(?:.|[\r
]))+`;jt.KANJI=new RegExp(fn,"g");jt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");jt.BYTE=new RegExp(aw,"g");jt.NUMERIC=new RegExp(Gl,"g");jt.ALPHANUMERIC=new RegExp(ow,"g");var cw=new RegExp("^"+fn+"$"),uw=new RegExp("^"+Gl+"$"),lw=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");jt.testKanji=function(e){return cw.test(e)};jt.testNumeric=function(e){return uw.test(e)};jt.testAlphanumeric=function(e){return lw.test(e)};(function(t){var e=eo,r=jt;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,a){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?s.ccBits[0]:a<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");var s=i.toLowerCase();switch(s){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,a){if(t.isValid(s))return s;try{return n(s)}catch{return a}}})(ur);(function(t){var e=xt,r=bi,n=wi,i=ur,s=eo,a=Ys,o=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,u=e.getBCHDigit(o);function p(E,w,L){for(var P=1;P<=40;P++)if(w<=t.getCapacity(P,L,E))return P}function d(E,w){return i.getCharCountIndicator(E,w)+4}function b(E,w){var L=0;return E.forEach(function(P){var U=d(P.mode,w);L+=U+P.getBitsLength()}),L}function N(E,w){for(var L=1;L<=40;L++){var P=b(E,L);if(P<=t.getCapacity(L,w,i.MIXED))return L}}t.from=function(w,L){return s.isValid(w)?parseInt(w,10):L},t.getCapacity=function(w,L,P){if(!s.isValid(w))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=i.BYTE);var U=e.getSymbolTotalCodewords(w),x=r.getTotalCodewordsCount(w,L),I=(U-x)*8;if(P===i.MIXED)return I;var v=I-d(P,w);switch(P){case i.NUMERIC:return Math.floor(v/10*3);case i.ALPHANUMERIC:return Math.floor(v/11*2);case i.KANJI:return Math.floor(v/13);case i.BYTE:default:return Math.floor(v/8)}},t.getBestVersionForData=function(w,L){var P,U=n.from(L,n.M);if(a(w)){if(w.length>1)return N(w,U);if(w.length===0)return 1;P=w[0]}else P=w;return p(P.mode,P.getLength(),U)},t.getEncodedBits=function(w){if(!s.isValid(w)||w<7)throw new Error("Invalid QR Code version");for(var L=w<<12;e.getBCHDigit(L)-u>=0;)L^=o<<e.getBCHDigit(L)-u;return w<<12|L}})(Wl);var Yl={},vs=xt,Jl=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,hw=1<<14|1<<12|1<<10|1<<4|1<<1,tc=vs.getBCHDigit(Jl);Yl.getEncodedBits=function(e,r){for(var n=e.bit<<3|r,i=n<<10;vs.getBCHDigit(i)-tc>=0;)i^=Jl<<vs.getBCHDigit(i)-tc;return(n<<10|i)^hw};var Xl={},fw=ur;function Lr(t){this.mode=fw.NUMERIC,this.data=t.toString()}Lr.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Lr.prototype.getLength=function(){return this.data.length};Lr.prototype.getBitsLength=function(){return Lr.getBitsLength(this.data.length)};Lr.prototype.write=function(e){var r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);var s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var dw=Lr,pw=ur,Vi=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Fr(t){this.mode=pw.ALPHANUMERIC,this.data=t}Fr.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Fr.prototype.getLength=function(){return this.data.length};Fr.prototype.getBitsLength=function(){return Fr.getBitsLength(this.data.length)};Fr.prototype.write=function(e){var r;for(r=0;r+2<=this.data.length;r+=2){var n=Vi.indexOf(this.data[r])*45;n+=Vi.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Vi.indexOf(this.data[r]),6)};var gw=Fr,_w=cr,yw=ur;function Mr(t){this.mode=yw.BYTE,this.data=_w.from(t)}Mr.getBitsLength=function(e){return e*8};Mr.prototype.getLength=function(){return this.data.length};Mr.prototype.getBitsLength=function(){return Mr.getBitsLength(this.data.length)};Mr.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var vw=Mr,mw=ur,ww=xt;function Ur(t){this.mode=mw.KANJI,this.data=t}Ur.getBitsLength=function(e){return e*13};Ur.prototype.getLength=function(){return this.data.length};Ur.prototype.getBitsLength=function(){return Ur.getBitsLength(this.data.length)};Ur.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=ww.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var bw=Ur;(function(t){var e=ur,r=dw,n=gw,i=vw,s=bw,a=jt,o=xt,u=Lf;function p(U){return unescape(encodeURIComponent(U)).length}function d(U,x,I){for(var v=[],C;(C=U.exec(I))!==null;)v.push({data:C[0],index:C.index,mode:x,length:C[0].length});return v}function b(U){var x=d(a.NUMERIC,e.NUMERIC,U),I=d(a.ALPHANUMERIC,e.ALPHANUMERIC,U),v,C;o.isKanjiModeEnabled()?(v=d(a.BYTE,e.BYTE,U),C=d(a.KANJI,e.KANJI,U)):(v=d(a.BYTE_KANJI,e.BYTE,U),C=[]);var A=x.concat(I,v,C);return A.sort(function(c,_){return c.index-_.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function N(U,x){switch(x){case e.NUMERIC:return r.getBitsLength(U);case e.ALPHANUMERIC:return n.getBitsLength(U);case e.KANJI:return s.getBitsLength(U);case e.BYTE:return i.getBitsLength(U)}}function E(U){return U.reduce(function(x,I){var v=x.length-1>=0?x[x.length-1]:null;return v&&v.mode===I.mode?(x[x.length-1].data+=I.data,x):(x.push(I),x)},[])}function w(U){for(var x=[],I=0;I<U.length;I++){var v=U[I];switch(v.mode){case e.NUMERIC:x.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:x.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:x.push([v,{data:v.data,mode:e.BYTE,length:p(v.data)}]);break;case e.BYTE:x.push([{data:v.data,mode:e.BYTE,length:p(v.data)}])}}return x}function L(U,x){for(var I={},v={start:{}},C=["start"],A=0;A<U.length;A++){for(var c=U[A],_=[],Y=0;Y<c.length;Y++){var O=c[Y],B=""+A+Y;_.push(B),I[B]={node:O,lastCount:0},v[B]={};for(var z=0;z<C.length;z++){var W=C[z];I[W]&&I[W].node.mode===O.mode?(v[W][B]=N(I[W].lastCount+O.length,O.mode)-N(I[W].lastCount,O.mode),I[W].lastCount+=O.length):(I[W]&&(I[W].lastCount=O.length),v[W][B]=N(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,x))}}C=_}for(z=0;z<C.length;z++)v[C[z]].end=0;return{map:v,table:I}}function P(U,x){var I,v=e.getBestModeForData(U);if(I=e.from(x,v),I!==e.BYTE&&I.bit<v.bit)throw new Error('"'+U+'" cannot be encoded with mode '+e.toString(I)+`.
 Suggested mode is: `+e.toString(v));switch(I===e.KANJI&&!o.isKanjiModeEnabled()&&(I=e.BYTE),I){case e.NUMERIC:return new r(U);case e.ALPHANUMERIC:return new n(U);case e.KANJI:return new s(U);case e.BYTE:return new i(U)}}t.fromArray=function(x){return x.reduce(function(I,v){return typeof v=="string"?I.push(P(v,null)):v.data&&I.push(P(v.data,v.mode)),I},[])},t.fromString=function(x,I){for(var v=b(x,o.isKanjiModeEnabled()),C=w(v),A=L(C,I),c=u.find_path(A.map,"start","end"),_=[],Y=1;Y<c.length-1;Y++)_.push(A.table[c[Y]].node);return t.fromArray(E(_))},t.rawSplit=function(x){return t.fromArray(b(x,o.isKanjiModeEnabled()))}})(Xl);var rc=cr,Di=xt,Wi=wi,Ew=Wm,xw=Gm,Dw=Bl,Sw=kl,ms=jl,ws=bi,Cw=sw,Qn=Wl,Iw=Yl,Aw=ur,Gi=Xl,Tw=Ys;function Ow(t,e){for(var r=t.size,n=Sw.getPositions(e),i=0;i<n.length;i++)for(var s=n[i][0],a=n[i][1],o=-1;o<=7;o++)if(!(s+o<=-1||r<=s+o))for(var u=-1;u<=7;u++)a+u<=-1||r<=a+u||(o>=0&&o<=6&&(u===0||u===6)||u>=0&&u<=6&&(o===0||o===6)||o>=2&&o<=4&&u>=2&&u<=4?t.set(s+o,a+u,!0,!0):t.set(s+o,a+u,!1,!0))}function Nw(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Pw(t,e){for(var r=Dw.getPositions(e),n=0;n<r.length;n++)for(var i=r[n][0],s=r[n][1],a=-2;a<=2;a++)for(var o=-2;o<=2;o++)a===-2||a===2||o===-2||o===2||a===0&&o===0?t.set(i+a,s+o,!0,!0):t.set(i+a,s+o,!1,!0)}function Rw(t,e){for(var r=t.size,n=Qn.getEncodedBits(e),i,s,a,o=0;o<18;o++)i=Math.floor(o/3),s=o%3+r-8-3,a=(n>>o&1)===1,t.set(i,s,a,!0),t.set(s,i,a,!0)}function Yi(t,e,r){var n=t.size,i=Iw.getEncodedBits(e,r),s,a;for(s=0;s<15;s++)a=(i>>s&1)===1,s<6?t.set(s,8,a,!0):s<8?t.set(s+1,8,a,!0):t.set(n-15+s,8,a,!0),s<8?t.set(8,n-s-1,a,!0):s<9?t.set(8,15-s-1+1,a,!0):t.set(8,15-s-1,a,!0);t.set(n-8,8,1,!0)}function Lw(t,e){for(var r=t.size,n=-1,i=r-1,s=7,a=0,o=r-1;o>0;o-=2)for(o===6&&o--;;){for(var u=0;u<2;u++)if(!t.isReserved(i,o-u)){var p=!1;a<e.length&&(p=(e[a]>>>s&1)===1),t.set(i,o-u,p),s--,s===-1&&(a++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function Fw(t,e,r){var n=new Ew;r.forEach(function(p){n.put(p.mode.bit,4),n.put(p.getLength(),Aw.getCharCountIndicator(p.mode,t)),p.write(n)});var i=Di.getSymbolTotalCodewords(t),s=ws.getTotalCodewordsCount(t,e),a=(i-s)*8;for(n.getLengthInBits()+4<=a&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var o=(a-n.getLengthInBits())/8,u=0;u<o;u++)n.put(u%2?17:236,8);return Mw(n,t,e)}function Mw(t,e,r){for(var n=Di.getSymbolTotalCodewords(e),i=ws.getTotalCodewordsCount(e,r),s=n-i,a=ws.getBlocksCount(e,r),o=n%a,u=a-o,p=Math.floor(n/a),d=Math.floor(s/a),b=d+1,N=p-d,E=new Cw(N),w=0,L=new Array(a),P=new Array(a),U=0,x=rc.from(t.buffer),I=0;I<a;I++){var v=I<u?d:b;L[I]=x.slice(w,w+v),P[I]=E.encode(L[I]),w+=v,U=Math.max(U,v)}var C=rc.alloc(n),A=0,c,_;for(c=0;c<U;c++)for(_=0;_<a;_++)c<L[_].length&&(C[A++]=L[_][c]);for(c=0;c<N;c++)for(_=0;_<a;_++)C[A++]=P[_][c];return C}function Uw(t,e,r,n){var i;if(Tw(t))i=Gi.fromArray(t);else if(typeof t=="string"){var s=e;if(!s){var a=Gi.rawSplit(t);s=Qn.getBestVersionForData(a,r)}i=Gi.fromString(t,s||40)}else throw new Error("Invalid data");var o=Qn.getBestVersionForData(i,r);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);var u=Fw(e,r,i),p=Di.getSymbolSize(e),d=new xw(p);return Ow(d,e),Nw(d),Pw(d,e),Yi(d,r,0),e>=7&&Rw(d,e),Lw(d,u),isNaN(n)&&(n=ms.getBestMask(d,Yi.bind(null,d,r))),ms.applyMask(n,d),Yi(d,r,n),{modules:d,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Ll.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");var n=Wi.M,i,s;return typeof r<"u"&&(n=Wi.from(r.errorCorrectionLevel,Wi.M),i=Qn.from(r.version),s=ms.from(r.maskPattern),r.toSJISFunc&&Di.setToSJISFunction(r.toSJISFunc)),Uw(e,i,n,s)};var Ql={},to={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");var i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});var i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:s,scale:s?4:a,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){var s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){for(var a=i.modules.size,o=i.modules.data,u=t.getScale(a,s),p=Math.floor((a+s.margin*2)*u),d=s.margin*u,b=[s.color.light,s.color.dark],N=0;N<p;N++)for(var E=0;E<p;E++){var w=(N*p+E)*4,L=s.color.light;if(N>=d&&E>=d&&N<p-d&&E<p-d){var P=Math.floor((N-d)/u),U=Math.floor((E-d)/u);L=b[o[P*a+U]?1:0]}n[w++]=L.r,n[w++]=L.g,n[w++]=L.b,n[w]=L.a}}})(to);(function(t){var e=to;function r(i,s,a){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=a,s.width=a,s.style.height=a+"px",s.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,a,o){var u=o,p=a;typeof u>"u"&&(!a||!a.getContext)&&(u=a,a=void 0),a||(p=n()),u=e.getOptions(u);var d=e.getImageWidth(s.modules.size,u),b=p.getContext("2d"),N=b.createImageData(d,d);return e.qrToImageData(N.data,s,u),r(b,p,d),b.putImageData(N,0,0),p},t.renderToDataURL=function(s,a,o){var u=o;typeof u>"u"&&(!a||!a.getContext)&&(u=a,a=void 0),u||(u={});var p=t.render(s,a,u),d=u.type||"image/png",b=u.rendererOpts||{};return p.toDataURL(d,b.quality)}})(Ql);var Zl={},$w=to;function nc(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Ji(t,e,r){var n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Bw(t,e,r){for(var n="",i=0,s=!1,a=0,o=0;o<t.length;o++){var u=Math.floor(o%e),p=Math.floor(o/e);!u&&!s&&(s=!0),t[o]?(a++,o>0&&u>0&&t[o-1]||(n+=s?Ji("M",u+r,.5+p+r):Ji("m",i,0),i=0,s=!1),u+1<e&&t[o+1]||(n+=Ji("h",a),a=0)):i++}return n}Zl.render=function(e,r,n){var i=$w.getOptions(r),s=e.modules.size,a=e.modules.data,o=s+i.margin*2,u=i.color.light.a?"<path "+nc(i.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",p="<path "+nc(i.color.dark,"stroke")+' d="'+Bw(a,s,i.margin)+'"/>',d='viewBox="0 0 '+o+" "+o+'"',b=i.width?'width="'+i.width+'" height="'+i.width+'" ':"",N='<svg xmlns="http://www.w3.org/2000/svg" '+b+d+' shape-rendering="crispEdges">'+u+p+`</svg>
`;return typeof n=="function"&&n(null,N),N};var kw=Fm,bs=Ll,eh=Ql,jw=Zl;function ro(t,e,r,n,i){var s=[].slice.call(arguments,1),a=s.length,o=typeof s[a-1]=="function";if(!o&&!kw())throw new Error("Callback required as last argument");if(o){if(a<2)throw new Error("Too few arguments provided");a===2?(i=r,r=e,e=n=void 0):a===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(r=e,e=n=void 0):a===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(p,d){try{var b=bs.create(r,n);p(t(b,e,n))}catch(N){d(N)}})}try{var u=bs.create(r,n);i(null,t(u,e,n))}catch(p){i(p)}}Sn.create=bs.create;Sn.toCanvas=ro.bind(null,eh.render);Sn.toDataURL=ro.bind(null,eh.renderToDataURL);Sn.toString=ro.bind(null,function(t,e,r){return jw.render(t,r)});var zw=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(i){t.addRange(i)}),e&&e.focus()}},Hw=zw,ic={"text/plain":"Text","text/html":"Url",default:"Text"},qw="Copy to clipboard: #{key}, Enter";function Kw(t){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function Vw(t,e){var r,n,i,s,a,o,u=!1;e||(e={}),r=e.debug||!1;try{i=Hw(),s=document.createRange(),a=document.getSelection(),o=document.createElement("span"),o.textContent=t,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=ic[e.format]||ic.default;window.clipboardData.setData(b,t)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,t);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(o),s.selectNodeContents(o),a.addRange(s);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");u=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),u=!0}catch(b){r&&console.error("unable to copy using clipboardData: ",b),r&&console.error("falling back to prompt"),n=Kw("message"in e?e.message:qw),window.prompt(n,t)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(s):a.removeAllRanges()),o&&document.body.removeChild(o),i()}return u}var Ww=Vw,pe,sn,no,th,sc,io,rh,Yt={},Si=[],Gw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Gt(t,e){for(var r in e)t[r]=e[r];return t}function nh(t){var e=t.parentNode;e&&e.removeChild(t)}function Jt(t,e,r){var n,i=arguments,s={};for(n in e)n!=="key"&&n!=="ref"&&(s[n]=e[n]);if(arguments.length>3)for(r=[r],n=3;n<arguments.length;n++)r.push(i[n]);if(r!=null&&(s.children=r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)s[n]===void 0&&(s[n]=t.defaultProps[n]);return Zn(t,s,e&&e.key,e&&e.ref,null)}function Zn(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return i==null&&(s.__v=s),pe.vnode&&pe.vnode(s),s}function ih(){return{}}function In(t){return t.children}function Pt(t,e){this.props=t,this.context=e}function dn(t,e){if(e==null)return t.__?dn(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?dn(t):null}function sh(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return sh(t)}}function Hn(t){(!t.__d&&(t.__d=!0)&&sn.push(t)&&!no++||sc!==pe.debounceRendering)&&((sc=pe.debounceRendering)||th)(Yw)}function Yw(){for(var t;no=sn.length;)t=sn.sort(function(e,r){return e.__v.__b-r.__v.__b}),sn=[],t.some(function(e){var r,n,i,s,a,o,u;e.__d&&(o=(a=(r=e).__v).__e,(u=r.__P)&&(n=[],(i=Gt({},a)).__v=i,s=so(u,a,i,r.__n,u.ownerSVGElement!==void 0,null,n,o??dn(a)),ah(n,a),s!=o&&sh(a)))})}function oh(t,e,r,n,i,s,a,o,u){var p,d,b,N,E,w,L,P=r&&r.__k||Si,U=P.length;if(o==Yt&&(o=s!=null?s[0]:U?dn(r,0):null),p=0,e.__k=ir(e.__k,function(x){if(x!=null){if(x.__=e,x.__b=e.__b+1,(b=P[p])===null||b&&x.key==b.key&&x.type===b.type)P[p]=void 0;else for(d=0;d<U;d++){if((b=P[d])&&x.key==b.key&&x.type===b.type){P[d]=void 0;break}b=null}if(N=so(t,x,b=b||Yt,n,i,s,a,o,u),(d=x.ref)&&b.ref!=d&&(L||(L=[]),b.ref&&L.push(b.ref,null,x),L.push(d,x.__c||N,x)),N!=null){var I;if(w==null&&(w=N),x.__d!==void 0)I=x.__d,x.__d=void 0;else if(s==b||N!=o||N.parentNode==null){e:if(o==null||o.parentNode!==t)t.appendChild(N),I=null;else{for(E=o,d=0;(E=E.nextSibling)&&d<U;d+=2)if(E==N)break e;t.insertBefore(N,o),I=o}e.type=="option"&&(t.value="")}o=I!==void 0?I:N.nextSibling,typeof e.type=="function"&&(e.__d=o)}else o&&b.__e==o&&o.parentNode!=t&&(o=dn(b))}return p++,x}),e.__e=w,s!=null&&typeof e.type!="function")for(p=s.length;p--;)s[p]!=null&&nh(s[p]);for(p=U;p--;)P[p]!=null&&on(P[p],P[p]);if(L)for(p=0;p<L.length;p++)ch(L[p],L[++p],L[++p])}function ir(t,e,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")e&&r.push(e(null));else if(Array.isArray(t))for(var n=0;n<t.length;n++)ir(t[n],e,r);else r.push(e?e(typeof t=="string"||typeof t=="number"?Zn(null,t,null,null,t):t.__e!=null||t.__c!=null?Zn(t.type,t.props,t.key,null,t.__v):t):t);return r}function Jw(t,e,r,n,i){var s;for(s in r)s==="children"||s==="key"||s in e||ei(t,s,null,r[s],n);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||r[s]===e[s]||ei(t,s,e[s],r[s],n)}function oc(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=typeof r=="number"&&Gw.test(e)===!1?r+"px":r??""}function ei(t,e,r,n,i){var s,a,o,u,p;if(i?e==="className"&&(e="class"):e==="class"&&(e="className"),e==="style")if(s=t.style,typeof r=="string")s.cssText=r;else{if(typeof n=="string"&&(s.cssText="",n=null),n)for(u in n)r&&u in r||oc(s,u,"");if(r)for(p in r)n&&r[p]===n[p]||oc(s,p,r[p])}else e[0]==="o"&&e[1]==="n"?(a=e!==(e=e.replace(/Capture$/,"")),o=e.toLowerCase(),e=(o in t?o:e).slice(2),r?(n||t.addEventListener(e,ac,a),(t.l||(t.l={}))[e]=r):t.removeEventListener(e,ac,a)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&!i&&e in t?t[e]=r??"":typeof r!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):r==null||r===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function ac(t){this.l[t.type](pe.event?pe.event(t):t)}function so(t,e,r,n,i,s,a,o,u){var p,d,b,N,E,w,L,P,U,x,I=e.type;if(e.constructor!==void 0)return null;(p=pe.__b)&&p(e);try{e:if(typeof I=="function"){if(P=e.props,U=(p=I.contextType)&&n[p.__c],x=p?U?U.props.value:p.__:n,r.__c?L=(d=e.__c=r.__c).__=d.__E:("prototype"in I&&I.prototype.render?e.__c=d=new I(P,x):(e.__c=d=new Pt(P,x),d.constructor=I,d.render=Qw),U&&U.sub(d),d.props=P,d.state||(d.state={}),d.context=x,d.__n=n,b=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),I.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Gt({},d.__s)),Gt(d.__s,I.getDerivedStateFromProps(P,d.__s))),N=d.props,E=d.state,b)I.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(I.getDerivedStateFromProps==null&&P!==N&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(P,x),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(P,d.__s,x)===!1||e.__v===r.__v&&!d.__){for(d.props=P,d.state=d.__s,e.__v!==r.__v&&(d.__d=!1),d.__v=e,e.__e=r.__e,e.__k=r.__k,d.__h.length&&a.push(d),p=0;p<e.__k.length;p++)e.__k[p]&&(e.__k[p].__=e);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(P,d.__s,x),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(N,E,w)})}d.context=x,d.props=P,d.state=d.__s,(p=pe.__r)&&p(e),d.__d=!1,d.__v=e,d.__P=t,p=d.render(d.props,d.state,d.context),e.__k=p!=null&&p.type==In&&p.key==null?p.props.children:Array.isArray(p)?p:[p],d.getChildContext!=null&&(n=Gt(Gt({},n),d.getChildContext())),b||d.getSnapshotBeforeUpdate==null||(w=d.getSnapshotBeforeUpdate(N,E)),oh(t,e,r,n,i,s,a,o,u),d.base=e.__e,d.__h.length&&a.push(d),L&&(d.__E=d.__=null),d.__e=!1}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Xw(r.__e,e,r,n,i,s,a,u);(p=pe.diffed)&&p(e)}catch(v){e.__v=null,pe.__e(v,e,r)}return e.__e}function ah(t,e){pe.__c&&pe.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){pe.__e(n,r.__v)}})}function Xw(t,e,r,n,i,s,a,o){var u,p,d,b,N,E=r.props,w=e.props;if(i=e.type==="svg"||i,s!=null){for(u=0;u<s.length;u++)if((p=s[u])!=null&&((e.type===null?p.nodeType===3:p.localName===e.type)||t==p)){t=p,s[u]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(w);t=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,w.is&&{is:w.is}),s=null,o=!1}if(e.type===null)E!==w&&t.data!=w&&(t.data=w);else{if(s!=null&&(s=Si.slice.call(t.childNodes)),d=(E=r.props||Yt).dangerouslySetInnerHTML,b=w.dangerouslySetInnerHTML,!o){if(E===Yt)for(E={},N=0;N<t.attributes.length;N++)E[t.attributes[N].name]=t.attributes[N].value;(b||d)&&(b&&d&&b.__html==d.__html||(t.innerHTML=b&&b.__html||""))}Jw(t,w,E,i,o),b?e.__k=[]:(e.__k=e.props.children,oh(t,e,r,n,e.type!=="foreignObject"&&i,s,a,Yt,o)),o||("value"in w&&(u=w.value)!==void 0&&u!==t.value&&ei(t,"value",u,E.value,!1),"checked"in w&&(u=w.checked)!==void 0&&u!==t.checked&&ei(t,"checked",u,E.checked,!1))}return t}function ch(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){pe.__e(n,r)}}function on(t,e,r){var n,i,s;if(pe.unmount&&pe.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ch(n,null,e)),r||typeof t.type=="function"||(r=(i=t.__e)!=null),t.__e=t.__d=void 0,(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){pe.__e(a,e)}n.base=n.__P=null}if(n=t.__k)for(s=0;s<n.length;s++)n[s]&&on(n[s],e,r);i!=null&&nh(i)}function Qw(t,e,r){return this.constructor(t,r)}function pn(t,e,r){var n,i,s;pe.__&&pe.__(t,e),i=(n=r===io)?null:r&&r.__k||e.__k,t=Jt(In,null,[t]),s=[],so(e,(n?e:r||e).__k=t,i||Yt,Yt,e.ownerSVGElement!==void 0,r&&!n?[r]:i?null:Si.slice.call(e.childNodes),s,r||Yt,n),ah(s,t)}function uh(t,e){pn(t,e,io)}function Zw(t,e){var r,n;for(n in e=Gt(Gt({},t.props),e),arguments.length>2&&(e.children=Si.slice.call(arguments,2)),r={},e)n!=="key"&&n!=="ref"&&(r[n]=e[n]);return Zn(t.type,r,e.key||t.key,e.ref||t.ref,null)}function lh(t){var e={},r={__c:"__cC"+rh++,__:t,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s=this;return this.getChildContext||(i=[],this.getChildContext=function(){return e[r.__c]=s,e},this.shouldComponentUpdate=function(a){s.props.value!==a.value&&i.some(function(o){o.context=a.value,Hn(o)})},this.sub=function(a){i.push(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){i.splice(i.indexOf(a),1),o&&o.call(a)}}),n.children}};return r.Consumer.contextType=r,r.Provider.__=r,r}pe={__e:function(t,e){for(var r,n;e=e.__;)if((r=e.__c)&&!r.__)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null&&(n=!0,r.setState(r.constructor.getDerivedStateFromError(t))),r.componentDidCatch!=null&&(n=!0,r.componentDidCatch(t)),n)return Hn(r.__E=r)}catch(i){t=i}throw t}},Pt.prototype.setState=function(t,e){var r;r=this.__s!==this.state?this.__s:this.__s=Gt({},this.state),typeof t=="function"&&(t=t(r,this.props)),t&&Gt(r,t),t!=null&&this.__v&&(e&&this.__h.push(e),Hn(this))},Pt.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Hn(this))},Pt.prototype.render=In,sn=[],no=0,th=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,io=Yt,rh=0;var xr,gt,cc,$r=0,Es=[],uc=pe.__r,lc=pe.diffed,hc=pe.__c,fc=pe.unmount;function zr(t,e){pe.__h&&pe.__h(gt,t,$r||e),$r=0;var r=gt.__H||(gt.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function oo(t){return $r=1,ao(yh,t)}function ao(t,e,r){var n=zr(xr++,2);return n.__c||(n.__c=gt,n.__=[r?r(e):yh(void 0,e),function(i){var s=t(n.__[0],i);n.__[0]!==s&&(n.__[0]=s,n.__c.setState({}))}]),n.__}function hh(t,e){var r=zr(xr++,3);!pe.__s&&uo(r.__H,e)&&(r.__=t,r.__H=e,gt.__H.__h.push(r))}function co(t,e){var r=zr(xr++,4);!pe.__s&&uo(r.__H,e)&&(r.__=t,r.__H=e,gt.__h.push(r))}function fh(t){return $r=5,Ci(function(){return{current:t}},[])}function dh(t,e,r){$r=6,co(function(){typeof t=="function"?t(e()):t&&(t.current=e())},r==null?r:r.concat(t))}function Ci(t,e){var r=zr(xr++,7);return uo(r.__H,e)?(r.__H=e,r.__h=t,r.__=t()):r.__}function ph(t,e){return $r=8,Ci(function(){return t},e)}function gh(t){var e=gt.context[t.__c],r=zr(xr++,9);return r.__c=t,e?(r.__==null&&(r.__=!0,e.sub(gt)),e.props.value):t.__}function _h(t,e){pe.useDebugValue&&pe.useDebugValue(e?e(t):t)}function eb(t){var e=zr(xr++,10),r=oo();return e.__=t,gt.componentDidCatch||(gt.componentDidCatch=function(n){e.__&&e.__(n),r[1](n)}),[r[0],function(){r[1](void 0)}]}function tb(){Es.some(function(t){if(t.__P)try{t.__H.__h.forEach(xs),t.__H.__h.forEach(Ds),t.__H.__h=[]}catch(e){return t.__H.__h=[],pe.__e(e,t.__v),!0}}),Es=[]}function xs(t){t.t&&t.t()}function Ds(t){var e=t.__();typeof e=="function"&&(t.t=e)}function uo(t,e){return!t||e.some(function(r,n){return r!==t[n]})}function yh(t,e){return typeof e=="function"?e(t):e}pe.__r=function(t){uc&&uc(t),xr=0,(gt=t.__c).__H&&(gt.__H.__h.forEach(xs),gt.__H.__h.forEach(Ds),gt.__H.__h=[])},pe.diffed=function(t){lc&&lc(t);var e=t.__c;if(e){var r=e.__H;r&&r.__h.length&&(Es.push(e)!==1&&cc===pe.requestAnimationFrame||((cc=pe.requestAnimationFrame)||function(n){var i,s=function(){clearTimeout(a),cancelAnimationFrame(i),setTimeout(n)},a=setTimeout(s,100);typeof window<"u"&&(i=requestAnimationFrame(s))})(tb))}},pe.__c=function(t,e){e.some(function(r){try{r.__h.forEach(xs),r.__h=r.__h.filter(function(n){return!n.__||Ds(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],pe.__e(n,r.__v)}}),hc&&hc(t,e)},pe.unmount=function(t){fc&&fc(t);var e=t.__c;if(e){var r=e.__H;if(r)try{r.__.forEach(function(n){return n.t&&n.t()})}catch(n){pe.__e(n,e.__v)}}};function lo(t,e){for(var r in e)t[r]=e[r];return t}function Ss(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}var vh=function(t){var e,r;function n(i){var s;return(s=t.call(this,i)||this).isPureReactComponent=!0,s}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.shouldComponentUpdate=function(i,s){return Ss(this.props,i)||Ss(this.state,s)},n}(Pt);function mh(t,e){function r(i){var s=this.props.ref,a=s==i.ref;return!a&&s&&(s.call?s(null):s.current=null),e?!e(this.props,i)||!a:Ss(this.props,i)}function n(i){return this.shouldComponentUpdate=r,Jt(t,lo({},i))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(t.displayName||t.name)+")",n.t=!0,n}var dc=pe.__b;function wh(t){function e(r){var n=lo({},r);return delete n.ref,t(n,r.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}pe.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),dc&&dc(t)};var pc=function(t,e){return t?ir(t).reduce(function(r,n,i){return r.concat(e(n,i))},[]):null},bh={map:pc,forEach:pc,count:function(t){return t?ir(t).length:0},only:function(t){if((t=ir(t)).length!==1)throw new Error("Children.only() expects only one child.");return t[0]},toArray:ir},rb=pe.__e;function Eh(t){return t&&((t=lo({},t)).__c=null,t.__k=t.__k&&t.__k.map(Eh)),t}function ti(){this.__u=0,this.o=null,this.__b=null}function xh(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function Dh(t){var e,r,n;function i(s){if(e||(e=t()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw e;return Jt(r,s)}return i.displayName="Lazy",i.t=!0,i}function Nr(){this.i=null,this.l=null}pe.__e=function(t,e,r){if(t.then){for(var n,i=e;i=i.__;)if((n=i.__c)&&n.__c)return n.__c(t,e.__c)}rb(t,e,r)},(ti.prototype=new Pt).__c=function(t,e){var r=this;r.o==null&&(r.o=[]),r.o.push(e);var n=xh(r.__v),i=!1,s=function(){i||(i=!0,n?n(a):a())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){s(),e.__c&&e.__c()};var a=function(){var o;if(!--r.__u)for(r.__v.__k[0]=r.state.u,r.setState({u:r.__b=null});o=r.o.pop();)o.forceUpdate()};r.__u++||r.setState({u:r.__b=r.__v.__k[0]}),t.then(s,s)},ti.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=Eh(this.__b),this.__b=null),[Jt(Pt,null,e.u?null:t.children),e.u&&t.fallback]};var gc=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Nr.prototype=new Pt).u=function(t){var e=this,r=xh(e.__v),n=e.l.get(t);return n[0]++,function(i){var s=function(){e.props.revealOrder?(n.push(i),gc(e,t,n)):i()};r?r(s):s()}},Nr.prototype.render=function(t){this.i=null,this.l=new Map;var e=ir(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Nr.prototype.componentDidUpdate=Nr.prototype.componentDidMount=function(){var t=this;t.l.forEach(function(e,r){gc(t,r,e)})};var nb=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(r){return r.children},t}();function ib(t){var e=this,r=t.container,n=Jt(nb,{context:e.context},t.vnode);return e.s&&e.s!==r&&(e.v.parentNode&&e.s.removeChild(e.v),on(e.h),e.p=!1),t.vnode?e.p?(r.__k=e.__k,pn(n,r),e.__k=r.__k):(e.v=document.createTextNode(""),uh("",r),r.appendChild(e.v),e.p=!0,e.s=r,pn(n,r,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),on(e.h)),e.h=n,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),on(e.h)},null}function Sh(t,e){return Jt(ib,{vnode:t,container:e})}var _c=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;Pt.prototype.isReactComponent={};var Ch=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function Cs(t,e,r){if(e.__k==null)for(;e.firstChild;)e.removeChild(e.firstChild);return pn(t,e),typeof r=="function"&&r(),t?t.__c:null}function sb(t,e,r){return uh(t,e),typeof r=="function"&&r(),t?t.__c:null}var yc=pe.event;function Xi(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(r){this["UNSAFE_"+e]=r}})}pe.event=function(t){yc&&(t=yc(t)),t.persist=function(){};var e=!1,r=!1,n=t.stopPropagation;t.stopPropagation=function(){n.call(t),e=!0};var i=t.preventDefault;return t.preventDefault=function(){i.call(t),r=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return r},t.nativeEvent=t};var vc={configurable:!0,get:function(){return this.class}},mc=pe.vnode;pe.vnode=function(t){t.$$typeof=Ch;var e=t.type,r=t.props;if(e){if(r.class!=r.className&&(vc.enumerable="className"in r,r.className!=null&&(r.class=r.className),Object.defineProperty(r,"className",vc)),typeof e!="function"){var n,i,s;for(s in r.defaultValue&&r.value!==void 0&&(r.value||r.value===0||(r.value=r.defaultValue),delete r.defaultValue),Array.isArray(r.value)&&r.multiple&&e==="select"&&(ir(r.children).forEach(function(a){r.value.indexOf(a.props.value)!=-1&&(a.props.selected=!0)}),delete r.value),r)if(n=_c.test(s))break;if(n)for(s in i=t.props={},r)i[_c.test(s)?s.replace(/[A-Z0-9]/,"-$&").toLowerCase():s]=r[s]}(function(a){var o=t.type,u=t.props;if(u&&typeof o=="string"){var p={};for(var d in u)/^on(Ani|Tra|Tou)/.test(d)&&(u[d.toLowerCase()]=u[d],delete u[d]),p[d.toLowerCase()]=d;if(p.ondoubleclick&&(u.ondblclick=u[p.ondoubleclick],delete u[p.ondoubleclick]),p.onbeforeinput&&(u.onbeforeinput=u[p.onbeforeinput],delete u[p.onbeforeinput]),p.onchange&&(o==="textarea"||o.toLowerCase()==="input"&&!/^fil|che|ra/i.test(u.type))){var b=p.oninput||"oninput";u[b]||(u[b]=u[p.onchange],delete u[p.onchange])}}})(),typeof e=="function"&&!e.m&&e.prototype&&(Xi(e.prototype,"componentWillMount"),Xi(e.prototype,"componentWillReceiveProps"),Xi(e.prototype,"componentWillUpdate"),e.m=!0)}mc&&mc(t)};var ob="16.8.0";function Ih(t){return Jt.bind(null,t)}function ho(t){return!!t&&t.$$typeof===Ch}function Ah(t){return ho(t)?Zw.apply(null,arguments):t}function Th(t){return!!t.__k&&(pn(null,t),!0)}function Oh(t){return t&&(t.base||t.nodeType===1&&t)||null}var Nh=function(t,e){return t(e)};const ab={useState:oo,useReducer:ao,useEffect:hh,useLayoutEffect:co,useRef:fh,useImperativeHandle:dh,useMemo:Ci,useCallback:ph,useContext:gh,useDebugValue:_h,version:"16.8.0",Children:bh,render:Cs,hydrate:Cs,unmountComponentAtNode:Th,createPortal:Sh,createElement:Jt,createContext:lh,createFactory:Ih,cloneElement:Ah,createRef:ih,Fragment:In,isValidElement:ho,findDOMNode:Oh,Component:Pt,PureComponent:vh,memo:mh,forwardRef:wh,unstable_batchedUpdates:Nh,Suspense:ti,SuspenseList:Nr,lazy:Dh},cb=Object.freeze(Object.defineProperty({__proto__:null,Children:bh,Component:Pt,Fragment:In,PureComponent:vh,Suspense:ti,SuspenseList:Nr,cloneElement:Ah,createContext:lh,createElement:Jt,createFactory:Ih,createPortal:Sh,createRef:ih,default:ab,findDOMNode:Oh,forwardRef:wh,hydrate:sb,isValidElement:ho,lazy:Dh,memo:mh,render:Cs,unmountComponentAtNode:Th,unstable_batchedUpdates:Nh,useCallback:ph,useContext:gh,useDebugValue:_h,useEffect:hh,useErrorBoundary:eb,useImperativeHandle:dh,useLayoutEffect:co,useMemo:Ci,useReducer:ao,useRef:fh,useState:oo,version:ob},Symbol.toStringTag,{value:"Module"})),ub=As(cb);function Ph(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ft=Lm,Rh=Ph(Sn),lb=Ph(Ww),se=ub;function hb(t){Rh.toString(t,{type:"terminal"}).then(console.log)}var fb=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function db(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}var pb="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",gb="WalletConnect",_b=300,yb="rgb(64, 153, 255)",Lh="walletconnect-wrapper",wc="walletconnect-style-sheet",Fh="walletconnect-qrcode-modal",vb="walletconnect-qrcode-close",Mh="walletconnect-qrcode-text",mb="walletconnect-connect-button";function wb(t){return se.createElement("div",{className:"walletconnect-modal__header"},se.createElement("img",{src:pb,className:"walletconnect-modal__headerLogo"}),se.createElement("p",null,gb),se.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},se.createElement("div",{id:vb,className:"walletconnect-modal__close__icon"},se.createElement("div",{className:"walletconnect-modal__close__line1"}),se.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function bb(t){return se.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:mb+"-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}var Eb="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function xb(t){var e=t.color,r=t.href,n=t.name,i=t.logo,s=t.onClick;return se.createElement("a",{className:"walletconnect-modal__base__row",href:r,onClick:s,rel:"noopener noreferrer",target:"_blank"},se.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),se.createElement("div",{className:"walletconnect-modal__base__row__right"},se.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),se.createElement("img",{src:Eb,className:"walletconnect-modal__base__row__right__caret"})))}function Db(t){var e=t.color,r=t.href,n=t.name,i=t.logo,s=t.onClick,a=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return se.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:r,onClick:s,rel:"noopener noreferrer",target:"_blank"},se.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),se.createElement("div",{style:{fontSize:a},className:"walletconnect-connect__button__text"},n))}var Sb=5,Qi=12;function Cb(t){var e=ft.isAndroid(),r=se.useState(""),n=r[0],i=r[1],s=se.useState(""),a=s[0],o=s[1],u=se.useState(1),p=u[0],d=u[1],b=a?t.links.filter(function(v){return v.name.toLowerCase().includes(a.toLowerCase())}):t.links,N=t.errorMessage,E=a||b.length>Sb,w=Math.ceil(b.length/Qi),L=[(p-1)*Qi+1,p*Qi],P=b.length?b.filter(function(v,C){return C+1>=L[0]&&C+1<=L[1]}):[],U=!e&&w>1,x=void 0;function I(v){i(v.target.value),clearTimeout(x),v.target.value?x=setTimeout(function(){o(v.target.value),d(1)},1e3):(i(""),o(""),d(1))}return se.createElement("div",null,se.createElement("p",{id:Mh,className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),!e&&se.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:I}),se.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":E&&b.length?"__wrap":"")},e?se.createElement(bb,{name:t.text.connect,color:yb,href:t.uri,onClick:se.useCallback(function(){ft.saveMobileLinkInfo({name:"Unknown",href:t.uri})},[])}):P.length?P.map(function(v){var C=v.color,A=v.name,c=v.shortName,_=v.logo,Y=ft.formatIOSMobile(t.uri,v),O=se.useCallback(function(){ft.saveMobileLinkInfo({name:A,href:Y})},[P]);return E?se.createElement(Db,{color:C,href:Y,name:c||A,logo:_,onClick:O}):se.createElement(xb,{color:C,href:Y,name:A,logo:_,onClick:O})}):se.createElement(se.Fragment,null,se.createElement("p",null,N.length?t.errorMessage:t.links.length&&!b.length?t.text.no_wallets_found:t.text.loading))),U&&se.createElement("div",{className:"walletconnect-modal__footer"},Array(w).fill(0).map(function(v,C){var A=C+1,c=p===A;return se.createElement("a",{style:{margin:"auto 10px",fontWeight:c?"bold":"normal"},onClick:function(){return d(A)}},A)})))}function Ib(t){var e=!!t.message.trim();return se.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}var Ab=function(t){try{var e="";return Promise.resolve(Rh.toString(t,{margin:0,type:"svg"})).then(function(r){return typeof r=="string"&&(e=r.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(r){return Promise.reject(r)}};function Tb(t){var e=se.useState(""),r=e[0],n=e[1],i=se.useState(""),s=i[0],a=i[1];se.useEffect(function(){try{return Promise.resolve(Ab(t.uri)).then(function(u){a(u)})}catch(u){Promise.reject(u)}},[]);var o=function(){var u=lb(t.uri);u?(n(t.text.copied_to_clipboard),setInterval(function(){return n("")},1200)):(n("Error"),setInterval(function(){return n("")},1200))};return se.createElement("div",null,se.createElement("p",{id:Mh,className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),se.createElement("div",{dangerouslySetInnerHTML:{__html:s}}),se.createElement("div",{className:"walletconnect-modal__footer"},se.createElement("a",{onClick:o},t.text.copy_to_clipboard)),se.createElement(Ib,{message:r}))}function Ob(t){var e=ft.isAndroid(),r=ft.isMobile(),n=r?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,i=se.useState(!1),s=i[0],a=i[1],o=se.useState(!1),u=o[0],p=o[1],d=se.useState(!r),b=d[0],N=d[1],E={mobile:r,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},w=se.useState(""),L=w[0],P=w[1],U=se.useState(!1),x=U[0],I=U[1],v=se.useState([]),C=v[0],A=v[1],c=se.useState(""),_=c[0],Y=c[1],O=function(){u||s||n&&!n.length||C.length>0||se.useEffect(function(){var z=function(){try{if(e)return Promise.resolve();a(!0);var W=db(function(){var g=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:ft.getWalletRegistryUrl();return Promise.resolve(fetch(g)).then(function(m){return Promise.resolve(m.json()).then(function(H){var V=H.listings,q=r?"mobile":"desktop",$=ft.getMobileLinkRegistry(ft.formatMobileRegistry(V,q),n);a(!1),p(!0),Y($.length?"":t.text.no_supported_wallets),A($);var J=$.length===1;J&&(P(ft.formatIOSMobile(t.uri,$[0])),N(!0)),I(J)})})},function(g){a(!1),p(!0),Y(t.text.something_went_wrong),console.error(g)});return Promise.resolve(W&&W.then?W.then(function(){}):void 0)}catch(g){return Promise.reject(g)}};z()})};O();var B=r?b:!b;return se.createElement("div",{id:Fh,className:"walletconnect-qrcode__base animated fadeIn"},se.createElement("div",{className:"walletconnect-modal__base"},se.createElement(wb,{onClose:t.onClose}),x&&b?se.createElement("div",{className:"walletconnect-modal__single_wallet"},se.createElement("a",{onClick:function(){return ft.saveMobileLinkInfo({name:C[0].name,href:L})},href:L,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(x?C[0].name:"")+" ")):e||s||!s&&C.length?se.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(B?" right__selected":"")},se.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),r?se.createElement(se.Fragment,null,se.createElement("a",{onClick:function(){return N(!1),O()}},t.text.mobile),se.createElement("a",{onClick:function(){return N(!0)}},t.text.qrcode)):se.createElement(se.Fragment,null,se.createElement("a",{onClick:function(){return N(!0)}},t.text.qrcode),se.createElement("a",{onClick:function(){return N(!1),O()}},t.text.desktop))):null,se.createElement("div",null,b||!e&&!s&&!C.length?se.createElement(Tb,Object.assign({},E)):se.createElement(Cb,Object.assign({},E,{links:C,errorMessage:_})))))}var Nb={choose_preferred_wallet:"Whle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine untersttzten Wallet",no_wallets_found:"keine Wallet gefunden"},Pb={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},Rb={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera mvil",scan_qrcode_with_wallet:"Escanea el cdigo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Cdigo QR",mobile:"Mvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali mal",no_supported_wallets:"Todava no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},Lb={choose_preferred_wallet:"Choisissez votre portefeuille prfr",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi!",connect_with:"Connectez-vous  l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv"},Fb={choose_preferred_wallet:"  ",connect_mobile_wallet:"  ",scan_qrcode_with_wallet:"WalletConnect   QR ",connect:"",qrcode:"QR ",mobile:"",desktop:"",copy_to_clipboard:" ",copied_to_clipboard:" !",connect_with:" ",loading:" ...",something_went_wrong:" .",no_supported_wallets:"   ",no_wallets_found:"   "},Mb={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se  carteira mvel",scan_qrcode_with_wallet:"Ler o cdigo QR com uma carteira compatvel com WalletConnect",connect:"Conectar",qrcode:"Cdigo QR",mobile:"Mvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda no h carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},Ub={choose_preferred_wallet:"",connect_mobile_wallet:"",scan_qrcode_with_wallet:" WalletConnect ",connect:"",qrcode:"",mobile:"",desktop:"",copy_to_clipboard:"",copied_to_clipboard:"",connect_with:"",loading:"...",something_went_wrong:"",no_supported_wallets:"",no_wallets_found:""},$b={choose_preferred_wallet:"       ",connect_mobile_wallet:"     ",scan_qrcode_with_wallet:" QR        WalletConnect  ",connect:"",qrcode:" QR",mobile:"",desktop:"",copy_to_clipboard:"   ",copied_to_clipboard:"    !",connect_with:" ",loading:"...",something_went_wrong:"  ",no_supported_wallets:"        ",no_wallets_found:"    "},bc={de:Nb,en:Pb,es:Rb,fr:Lb,ko:Fb,pt:Mb,zh:Ub,fa:$b};function Bb(){var t=ft.getDocumentOrThrow(),e=t.getElementById(wc);e&&t.head.removeChild(e);var r=t.createElement("style");r.setAttribute("id",wc),r.innerText=fb,t.head.appendChild(r)}function kb(){var t=ft.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id",Lh),t.body.appendChild(e),e}function Uh(){var t=ft.getDocumentOrThrow(),e=t.getElementById(Fh);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var r=t.getElementById(Lh);r&&t.body.removeChild(r)},_b))}function jb(t){return function(){Uh(),t&&t()}}function zb(){var t=ft.getNavigatorOrThrow().language.split("-")[0]||"en";return bc[t]||bc.en}function Hb(t,e,r){Bb();var n=kb();se.render(se.createElement(Ob,{text:zb(),uri:t,onClose:jb(e),qrcodeModalOptions:r}),n)}function qb(){Uh()}var $h=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function Kb(t,e,r){$h()?hb(t):Hb(t,e,r)}function Vb(){$h()||qb()}var Wb={open:Kb,close:Vb},Ec=Wb,ri={},Gb={get exports(){return ri},set exports(t){ri=t}};(function(t,e){var r=typeof self<"u"?self:lt,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(a){var o={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(g){return g&&DataView.prototype.isPrototypeOf(g)}if(o.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(g){return g&&p.indexOf(Object.prototype.toString.call(g))>-1};function b(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function N(g){return typeof g!="string"&&(g=String(g)),g}function E(g){var m={next:function(){var H=g.shift();return{done:H===void 0,value:H}}};return o.iterable&&(m[Symbol.iterator]=function(){return m}),m}function w(g){this.map={},g instanceof w?g.forEach(function(m,H){this.append(H,m)},this):Array.isArray(g)?g.forEach(function(m){this.append(m[0],m[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(m){this.append(m,g[m])},this)}w.prototype.append=function(g,m){g=b(g),m=N(m);var H=this.map[g];this.map[g]=H?H+", "+m:m},w.prototype.delete=function(g){delete this.map[b(g)]},w.prototype.get=function(g){return g=b(g),this.has(g)?this.map[g]:null},w.prototype.has=function(g){return this.map.hasOwnProperty(b(g))},w.prototype.set=function(g,m){this.map[b(g)]=N(m)},w.prototype.forEach=function(g,m){for(var H in this.map)this.map.hasOwnProperty(H)&&g.call(m,this.map[H],H,this)},w.prototype.keys=function(){var g=[];return this.forEach(function(m,H){g.push(H)}),E(g)},w.prototype.values=function(){var g=[];return this.forEach(function(m){g.push(m)}),E(g)},w.prototype.entries=function(){var g=[];return this.forEach(function(m,H){g.push([H,m])}),E(g)},o.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);function L(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function P(g){return new Promise(function(m,H){g.onload=function(){m(g.result)},g.onerror=function(){H(g.error)}})}function U(g){var m=new FileReader,H=P(m);return m.readAsArrayBuffer(g),H}function x(g){var m=new FileReader,H=P(m);return m.readAsText(g),H}function I(g){for(var m=new Uint8Array(g),H=new Array(m.length),V=0;V<m.length;V++)H[V]=String.fromCharCode(m[V]);return H.join("")}function v(g){if(g.slice)return g.slice(0);var m=new Uint8Array(g.byteLength);return m.set(new Uint8Array(g)),m.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:o.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:o.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():o.arrayBuffer&&o.blob&&u(g)?(this._bodyArrayBuffer=v(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||d(g))?this._bodyArrayBuffer=v(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var g=L(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?L(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(U)}),this.text=function(){var g=L(this);if(g)return g;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(g){var m=g.toUpperCase();return A.indexOf(m)>-1?m:g}function _(g,m){m=m||{};var H=m.body;if(g instanceof _){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,m.headers||(this.headers=new w(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!H&&g._bodyInit!=null&&(H=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new w(m.headers)),this.method=c(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&H)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(H)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function Y(g){var m=new FormData;return g.trim().split("&").forEach(function(H){if(H){var V=H.split("="),q=V.shift().replace(/\+/g," "),$=V.join("=").replace(/\+/g," ");m.append(decodeURIComponent(q),decodeURIComponent($))}}),m}function O(g){var m=new w,H=g.replace(/\r?\n[\t ]+/g," ");return H.split(/\r?\n/).forEach(function(V){var q=V.split(":"),$=q.shift().trim();if($){var J=q.join(":").trim();m.append($,J)}}),m}C.call(_.prototype);function B(g,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new w(m.headers),this.url=m.url||"",this._initBody(g)}C.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},B.error=function(){var g=new B(null,{status:0,statusText:""});return g.type="error",g};var z=[301,302,303,307,308];B.redirect=function(g,m){if(z.indexOf(m)===-1)throw new RangeError("Invalid status code");return new B(null,{status:m,headers:{location:g}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(m,H){this.message=m,this.name=H;var V=Error(m);this.stack=V.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function W(g,m){return new Promise(function(H,V){var q=new _(g,m);if(q.signal&&q.signal.aborted)return V(new a.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function J(){$.abort()}$.onload=function(){var X={status:$.status,statusText:$.statusText,headers:O($.getAllResponseHeaders()||"")};X.url="responseURL"in $?$.responseURL:X.headers.get("X-Request-URL");var re="response"in $?$.response:$.responseText;H(new B(re,X))},$.onerror=function(){V(new TypeError("Network request failed"))},$.ontimeout=function(){V(new TypeError("Network request failed"))},$.onabort=function(){V(new a.DOMException("Aborted","AbortError"))},$.open(q.method,q.url,!0),q.credentials==="include"?$.withCredentials=!0:q.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&o.blob&&($.responseType="blob"),q.headers.forEach(function(X,re){$.setRequestHeader(re,X)}),q.signal&&(q.signal.addEventListener("abort",J),$.onreadystatechange=function(){$.readyState===4&&q.signal.removeEventListener("abort",J)}),$.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return W.polyfill=!0,s.fetch||(s.fetch=W,s.Headers=w,s.Request=_,s.Response=B),a.Headers=w,a.Request=_,a.Response=B,a.fetch=W,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Gb,ri);const xc=Rf(ri),Yb={Accept:"application/json","Content-Type":"application/json"},Jb="POST",Dc={headers:Yb,method:Jb},Sc=10;class Ii{constructor(e){if(this.url=e,this.events=new it.EventEmitter,this.isAvailable=!1,this.registering=!1,!Da(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const n=ln(e),s=await(await xc(this.url,Object.assign(Object.assign({},Dc),{body:n}))).json();this.onPayload({data:s})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Da(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{const r=ln({id:1,jsonrpc:"2.0",method:"test",params:[]});await xc(e,Object.assign(Object.assign({},Dc),{body:r})),this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ts(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=gi(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return zu(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Sc&&this.events.setMaxListeners(Sc)}}function Xb(t){var e;const r=(e=t[Object.keys(t)[0]])==null?void 0:e.chains[0];return[r.split(":")[0],r.split(":")[1]]}function or(t,e){let r;return e.rpcMap&&(r=e.rpcMap[Qb([t])]),r}function Qb(t){return Number(t[0].split(":")[1])}class Zb{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=this.getDefaultChainId()}async request(e){var r;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":{const n=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";return this.setDefaultChain(parseInt(n,16).toString()),null}case"eth_chainId":return this.getDefaultChainId()}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){if(this.chainId=parseInt(e),!this.httpProviders[e]){const n=r||or(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}requestAccounts(){return this.getAccounts()}createHttpProvider(e,r){const n=r||or(e,this.namespace);return typeof n>"u"?void 0:new xn(new Ii(n))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return parseInt(e.split(":")[1])}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}}class eE{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||or(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||or(e,this.namespace);return typeof n>"u"?void 0:new xn(new Ii(n))}}class tE{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||or(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||or(e,this.namespace);return typeof n>"u"?void 0:new xn(new Ii(n))}}class rE{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getDefaultChainId(){if(this.chainId)return this.chainId;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||or(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||or(e,this.namespace);return typeof n>"u"?void 0:new xn(new Ii(n))}}const Cc="error",nE="wss://relay.walletconnect.com",iE="wc",sE="universal_provider",Ic=`${iE}@${2}:${sE}:`;var oE=Object.defineProperty,aE=Object.defineProperties,cE=Object.getOwnPropertyDescriptors,Ac=Object.getOwnPropertySymbols,uE=Object.prototype.hasOwnProperty,lE=Object.prototype.propertyIsEnumerable,Tc=(t,e,r)=>e in t?oE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oc=(t,e)=>{for(var r in e||(e={}))uE.call(e,r)&&Tc(t,r,e[r]);if(Ac)for(var r of Ac(e))lE.call(e,r)&&Tc(t,r,e[r]);return t},hE=(t,e)=>aE(t,cE(e));class fo{constructor(e){this.events=new it,this.rpcProviders={},this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gn(Te.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Cc}))}static async init(e){const r=new fo(e);return await r.initialize(),r}async request(e,r){const[n,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Oc({},e),chainId:`${n}:${i}`,topic:this.session.topic})}sendAsync(e,r,n){this.request(e,n).then(i=>r(null,i)).catch(i=>r(i,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:We("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");const{namespaces:r}=e;return this.setNamespaces(r),this.createProviders(),await this.cleanupPendingPairings(),e.skipPairing===!0?void 0:await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces});return r&&(this.uri=r,this.events.emit("display_uri",r)),this.session=await n(),this.onSessionUpdate(),this.onConnect(),this.session}setDefaultChain(e,r){try{const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(En(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}async checkStorage(){if(this.namespaces=await this.client.core.storage.getItem(`${Ic}/namespaces`)||{},this.namespaces&&this.createProviders(),this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.onSessionUpdate()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await cl.init({logger:this.providerOpts.logger||Cc,relayUrl:this.providerOpts.relayUrl||nE,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(e=>{switch(e){case"eip155":this.rpcProviders[e]=new Zb({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"solana":this.rpcProviders[e]=new eE({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"cosmos":this.rpcProviders[e]=new tE({client:this.client,namespace:this.namespaces[e],events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new rE({client:this.client,namespace:this.namespaces[e],events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;n.name==="accountsChanged"?this.events.emit("accountsChanged",n.data):n.name==="chainChanged"?this.onChainChanged(n.data,r.chainId):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=hE(Oc({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){if(!e||!Object.keys(e).length)throw new Error("Namespaces must be not empty");this.client.core.storage.setItem(`${Ic}/namespaces`,e),this.namespaces=e}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);return!r||!n?Xb(this.namespaces):[r,n]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r){const[n,i]=this.validateChain(r);this.getProvider(n).setDefaultChain(i),this.events.emit("chainChanged",e)}onConnect(){this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}}const fE="58ab318eb4080a7a4e53297a62ebd861",dE={eip155:{methods:["eth_accounts","eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","_signTypedData","eth_signTypedData_v4"],chains:["eip155:56","eip155:1"],events:["chainChanged","accountsChanged"],rpcMap:{56:"https://rpc.ankr.com/bsc",1:"https://eth.rpc.blxrbdn.com	"}}},pE={projectId:fE,metadata:{name:"Vite Start",description:"vite web3 dapp start",url:window.location.host,icons:[`${window.location.origin}/favicon.svg`]}};Uc("WalletConnectStore",()=>{const t=Do(null),e=qn(),r=qn(),n=Nc(()=>!!r.value),{ethereumStore:i,ethereumState:s}=es(),a=Zi(),o=Do(null),{setProvider:u}=$c(),p=E=>{o.value=(E==null?void 0:E.toString())??null,console.error(E)},d=async()=>{const E=await cl.init(pE).catch(w=>(p(w),w));e.value=E,await fo.init({client:E}).then(w=>{r.value=w}).catch(w=>(p(w),w))};return Pc(r,()=>{r.value&&(r.value.on("display_uri",E=>{t.value=E,Ec.open(E,()=>{})}),r.value.client.on("session_delete",E=>{u(void 0),i.reset()}),r.value.client.on("session_ping",E=>{}),r.value.client.on("session_update",async E=>{if(r.value){const w=new tn(r.value);u(w);const L=await w.getSigner().getAddress();if(L){s.account.value=L;const{chainId:P}=await w.getNetwork();a.setNetwork(P)}else i.reset()}else i.reset()}),r.value.on("connect",async E=>{const w=new tn(r.value);u(w);const L=await w.getSigner().getAddress();if(L){s.account.value=L;const{chainId:P}=await w.getNetwork();a.setNetwork(P)}else i.reset();Ec.close()}))}),{client:e,universalProvider:r,connectUri:t,initialized:n,error:o,init:d,reset:async()=>{t.value=null,o.value=null,r.value&&await r.value.disconnect()},requestConnection:async()=>{r.value&&await r.value.disconnect().finally(()=>r.value&&r.value.connect({namespaces:dE}).catch(E=>(p(E),E)))}}});const gE=ni({name:"Network",components:{IconBnb:Xf},setup(){return{switchNetwork:()=>{Hc(jc.ETHEREUM)}}},computed:{...kc(zc,["accountConnected","account","balance","network"])}}),_E={class:""};function yE(t,e,r,n,i,s){var o,u;const a=an("IconBnb");return t.accountConnected?(bt(),kt(Rc,{key:0},[t.accountConnected?(bt(),kt("button",{key:0,class:"hidden h-9 items-center rounded-md border bg-transparent px-4 text-sm leading-9 dark:border-white/20 dark:hover:bg-opacity-60 sm:flex",onClick:e[0]||(e[0]=p=>t.switchNetwork())},[((o=t.network)==null?void 0:o.chainId)=="0x38"?(bt(),Is(a,{key:0,class:"mr-2 inline"})):Ti("",!0),Me("span",_E,Tf((u=t.network)==null?void 0:u.chainName),1)])):Ti("",!0)],64)):Ti("",!0)}const Bh=ii(gE,[["render",yE]]),vE={fill:"none"},mE=["clip-path"],wE=Me("path",{d:"m35.786 39.083l2.828-2.828a6 6 0 0 0 0-8.486v0a6 6 0 0 0-8.485 0l-2.462 2.462m-10.266-6.705l7.071-7.07a6 6 0 0 0 0-8.486v0a6 6 0 0 0-8.485 0l-7.071 7.071"},null,-1),bE=Me("path",{d:"m18.283 22.645l-8.66 8.66a6 6 0 0 0 0 8.486v0a6 6 0 0 0 8.485 0l9.9-9.9"},null,-1),EE=Me("path",{"stroke-linejoin":"round",d:"M15 9H7"},null,-1),xE=[wE,bE,EE],DE=["id"],SE=Me("path",{fill:"currentColor",d:"M0 0h48v48H0z"},null,-1),CE=[SE];function IE(t,e){return bt(),kt("svg",{class:Of(["icon inline","iconify iconify--icon-park-outline"]),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"32",height:"32",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 48 48"},[Me("g",vE,[Me("g",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"4","clip-path":"url(#"+t.idMap.IconifyId182534a9ab8bf9b6c81+")"},xE,8,mE),Me("defs",null,[Me("clipPath",{id:t.idMap.IconifyId182534a9ab8bf9b6c81},CE,8,DE)])])])}const AE={name:"logo-favicon",render:IE,data(){return{idMap:{IconifyId182534a9ab8bf9b6c81:"uicons-"+(()=>Math.random().toString(36).substr(2,10))()}}}};const TE=ni({name:"AppHeader",components:{network:Bh,Favicon:AE},setup(){return Co(),{addressFilter:n=>{if(!(!n||n.length<10))return n=n.toLocaleUpperCase(),`${n.substring(0,4)}...${n.substring(n.length-4,n.length)}`},switchNetwork:()=>{Hc(jc.BSC)},connectWallet:()=>{Co().requestConnect()}}},computed:{...kc(zc,["accountConnected","account"]),links(){return[{label:"Buy",link:"/buy"}]}}}),kh=t=>(Fc("data-v-06a0d8db"),t=t(),Mc(),t),OE={class:"header sticky inset-x-0 top-0 z-20 flex items-center justify-between border-b border-b-white/5 px-4 sm:h-20 sm:px-7.5 xl:px-10"},NE={class:"flex items-center gap-2"},PE=kh(()=>Me("span",{class:"text-xl text-white/80"},"Moseu",-1)),RE={class:"flex h-full items-center gap-2 sm:gap-4"},LE=kh(()=>Me("span",null,"Connect Wallet",-1)),FE={href:"https://github.com/AxyLm/vite-web3-start",target:"_blank",class:"block"};function ME(t,e,r,n,i,s){const a=an("Favicon"),o=an("router-link"),u=Bh,p=Kf,d=Bf;return bt(),kt("header",OE,[Me("div",NE,[Or(o,{to:"/"},{default:Lc(()=>[Or(a,{class:"h-6 w-6"})]),_:1}),PE]),Me("div",RE,[t.accountConnected?(bt(),Is(u,{key:0})):(bt(),kt("button",{key:1,class:"h-9 items-center rounded-md border bg-transparent px-2 text-sm leading-9 dark:border-white/20 sm:flex sm:px-4",onClick:e[0]||(e[0]=b=>t.connectWallet())},[Or(p,{class:"mr-2 inline"}),LE])),Me("a",FE,[Or(d,{class:"h-6 w-6"})])])])}const UE=ii(TE,[["render",ME],["__scopeId","data-v-06a0d8db"]]);const $E=ni({components:{},setup(){return{}}}),BE=t=>(Fc("data-v-4bcfd3d6"),t=t(),Mc(),t),kE={class:"absolute bottom-0 flex h-16 w-full items-center justify-center bg-base-200 px-4 sm:px-7.5 xl:px-10"},jE=BE(()=>Me("div",{class:"flex items-center gap-2 text-xs"},[Me("span",{class:"text-white/70"}," powered by "),Me("a",{href:"http://moseu.com",target:"_blank",rel:"noopener noreferrer",class:"font-bold text-primary"}," Moseu ")],-1)),zE=[jE];function HE(t,e,r,n,i,s){return bt(),kt("footer",kE,zE)}const qE=ii($E,[["render",HE],["__scopeId","data-v-4bcfd3d6"]]);const KE=ni({name:"Layout",components:{appHeader:UE,appFooter:qE}}),VE={class:"views-layout relative z-10",style:{}};function WE(t,e,r,n,i,s){const a=an("app-header"),o=an("router-view");return bt(),kt(Rc,null,[Or(a),Me("div",VE,[Or(o,null,{default:Lc(({Component:u})=>[(bt(),Is(Nf(u),{class:"layout-content mx-auto px-4 pb-8 sm:px-7.5"}))]),_:1})])],64)}const l2=ii(KE,[["render",WE],["__scopeId","data-v-39f433c6"]]);export{l2 as default};
